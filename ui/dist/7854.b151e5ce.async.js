"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7854],{47854:function(U,T,t){t.r(T);var F=t(19632),d=t.n(F),I=t(15009),E=t.n(I),b=t(97857),A=t.n(b),w=t(99289),j=t.n(w),K=t(5574),p=t.n(K),x=t(67294),g=t(25278),f=t(77569),y=t(2453),S=t(17788),Z=t(85265),M=t(83622),O=t(4393),o=t(71230),m=t(15746),i=t(59847),n=t(34041),v=t(96154),u=t(13457),$=t(24969),ie=t(48689),V=t(49081),le=t(3057),X=t(48382),c=t(32007),e=t(85893),Fe=g.Z.TextArea,_e=function(B){var oe=B.visible,z=B.onClose,de=B.title,k=B.formData,H=B.categoryTreeSelect,J=B.onSuccess,me=f.Z.useForm(),ce=p()(me,1),Y=ce[0],De=f.Z.useForm(),he=p()(De,1),Q=he[0],pe=f.Z.useForm(),fe=p()(pe,1),N=fe[0],Ee=(0,x.useState)({itemSkuList:(k==null?void 0:k.sku)||[{skuName:"",barcode:"",skuCode:"",length:void 0,width:void 0,height:void 0,grossWeight:void 0,netWeight:void 0,costPrice:void 0,sellingPrice:void 0}]}),q=p()(Ee,2),C=q[0],P=q[1],Ce=(0,x.useState)(!1),ee=p()(Ce,2),ge=ee[0],R=ee[1],ve=(0,x.useState)(""),te=p()(ve,2),je=te[0],Pe=te[1],ye=(0,x.useState)(!1),re=p()(ye,2),Me=re[0],Oe=re[1],Le=(0,x.useState)(!1),ne=p()(Le,2),ue=ne[0],W=ne[1],be=function(){var h=j()(E()().mark(function D(){var s,_;return E()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Y.validateFields();case 3:return s=r.sent,r.next=6,Q.validateFields();case 6:if(C.itemSkuList.length!==0){r.next=9;break}return y.ZP.error("\u81F3\u5C11\u5305\u542B\u4E00\u4E2A\u5546\u54C1\u89C4\u683C"),r.abrupt("return");case 9:if(W(!0),_=A()(A()({},s),{},{sku:C.itemSkuList}),!k.id){r.next=16;break}return r.next=14,(0,V.$G)(_);case 14:r.next=18;break;case 16:return r.next=18,(0,V.jX)(_);case 18:y.ZP.success("\u64CD\u4F5C\u6210\u529F"),J(),r.next=25;break;case 22:r.prev=22,r.t0=r.catch(0),console.error("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25:",r.t0);case 25:return r.prev=25,W(!1),r.finish(25);case 28:case"end":return r.stop()}},D,null,[[0,22,25,28]])}));return function(){return h.apply(this,arguments)}}(),Ze=function(D){Pe("\u65B0\u589E\u5546\u54C1\u5206\u7C7B"),Oe(D),D&&N.setFieldsValue({parentId:void 0}),R(!0)},Te=function(){var h=j()(E()().mark(function D(){var s;return E()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,N.validateFields();case 3:if(s=l.sent,W(!0),!s.id){l.next=10;break}return l.next=8,(0,X.M3)(s);case 8:l.next=12;break;case 10:return l.next=12,(0,X.Sp)(s);case 12:y.ZP.success(s.id?"\u4FEE\u6539\u6210\u529F":"\u65B0\u589E\u6210\u529F"),R(!1),J(),l.next=20;break;case 17:l.prev=17,l.t0=l.catch(0),console.error("\u5206\u7C7B\u8868\u5355\u9A8C\u8BC1\u5931\u8D25:",l.t0);case 20:return l.prev=20,W(!1),l.finish(20);case 23:case"end":return l.stop()}},D,null,[[0,17,20,23]])}));return function(){return h.apply(this,arguments)}}(),xe=function(){P(function(D){return{itemSkuList:[].concat(d()(D.itemSkuList),[{skuName:"",barcode:"",skuCode:"",length:void 0,width:void 0,height:void 0,grossWeight:void 0,netWeight:void 0,costPrice:void 0,sellingPrice:void 0}])}})},Se=function(){var h=j()(E()().mark(function D(s,_){return E()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s.id){r.next=3;break}return P(function(a){return{itemSkuList:a.itemSkuList.filter(function(se,G){return G!==_})}}),r.abrupt("return");case 3:if(C.itemSkuList.length!==1){r.next=6;break}return y.ZP.error("\u81F3\u5C11\u5305\u542B\u4E00\u4E2A\u5546\u54C1\u89C4\u683C"),r.abrupt("return");case 6:S.Z.confirm({title:"\u786E\u8BA4\u5220\u9664\u89C4\u683C\u3010".concat(s.skuName,"\u3011\u5417\uFF1F"),onOk:function(){var a=j()(E()().mark(function G(){var ae;return E()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,(0,le.pe)(s.id);case 3:y.ZP.success("\u5220\u9664\u6210\u529F"),ae=C.itemSkuList.filter(function(Ae,Be){return Be!==_}),P({itemSkuList:ae}),L.next=11;break;case 8:L.prev=8,L.t0=L.catch(0),L.t0===409&&S.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:["\u89C4\u683C\u3010",s.skuName,"\u3011\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,e.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})});case 11:case"end":return L.stop()}},G,null,[[0,8]])}));function se(){return a.apply(this,arguments)}return se}()});case 7:case"end":return r.stop()}},D)}));return function(s,_){return h.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Z.Z,{title:de,width:"80%",open:oe,onClose:z,footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(M.ZP,{onClick:z,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(M.ZP,{type:"primary",loading:ue,onClick:be,children:"\u786E\u5B9A"})]}),children:[(0,e.jsx)(O.Z,{children:(0,e.jsxs)(f.Z,{form:Y,layout:"vertical",initialValues:k,children:[(0,e.jsxs)(o.Z,{gutter:24,children:[(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0"}],children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"})})}),(0,e.jsx)(m.Z,{span:10,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u5206\u7C7B",name:"itemCategory",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B"}],children:(0,e.jsx)(i.Z,{treeData:H,placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",style:{width:"100%"},fieldNames:{label:"title",value:"key",children:"children"}})})}),(0,e.jsx)(m.Z,{span:1,children:(0,e.jsx)(M.ZP,{type:"link",icon:(0,e.jsx)($.Z,{}),style:{height:32,lineHeight:"32px"},onClick:function(){return Ze(!0)},children:"\u65B0\u589E\u5206\u7C7B"})})]}),(0,e.jsxs)(o.Z,{gutter:24,children:[(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7"})})}),(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u5355\u4F4D",name:"unit",children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u8F93\u5165\u5355\u4F4D\u7C7B\u522B"})})})]}),(0,e.jsx)(o.Z,{gutter:24,children:(0,e.jsx)(m.Z,{span:12,children:(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u54C1\u724C",name:"itemBrand",children:(0,e.jsx)(n.Z,{placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u54C1\u724C",style:{width:"100%"},allowClear:!0,showSearch:!0})})})})]})}),(0,e.jsx)(O.Z,{title:"\u89C4\u683C",className:c.Z.mt20,children:(0,e.jsx)(f.Z,{form:Q,children:(0,e.jsxs)(v.Z,{dataSource:C.itemSkuList,bordered:!0,pagination:!1,footer:function(){return(0,e.jsx)("div",{style:{padding:"6px 2px",textAlign:"center"},children:(0,e.jsx)(M.ZP,{type:"link",icon:(0,e.jsx)($.Z,{}),onClick:xe,children:"\u6DFB\u52A0\u5546\u54C1\u89C4\u683C"})})},children:[(0,e.jsx)(v.Z.Column,{title:"\u89C4\u683C\u540D\u79F0",dataIndex:"skuName",render:function(D,s,_){return(0,e.jsx)(f.Z.Item,{name:["itemSkuList",_,"skuName"],rules:[{required:!0,message:"\u89C4\u683C\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}],style:{marginBottom:0},children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C\u540D\u79F0"})})}}),(0,e.jsx)(v.Z.Column,{title:"\u7F16\u53F7/\u6761\u7801",width:250,render:function(D,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,style:{width:50},children:"\u7F16\u53F7"}),(0,e.jsx)(g.Z,{value:s.skuCode,onChange:function(r){var a=d()(C.itemSkuList);a[_].skuCode=r.target.value,P({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,style:{width:50},children:"\u6761\u7801"}),(0,e.jsx)(g.Z,{value:s.barcode,onChange:function(r){var a=d()(C.itemSkuList);a[_].barcode=r.target.value,P({itemSkuList:a})}})]})]})}}),(0,e.jsx)(v.Z.Column,{title:"\u957F/\u5BBD/\u9AD8(cm)",width:200,render:function(D,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u957F"}),(0,e.jsx)(u.Z,{min:0,precision:1,style:{width:"100%"},value:s.length,onChange:function(r){var a=d()(C.itemSkuList);a[_].length=r,P({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u5BBD"}),(0,e.jsx)(u.Z,{min:0,precision:1,style:{width:"100%"},value:s.width,onChange:function(r){var a=d()(C.itemSkuList);a[_].width=r,P({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u9AD8"}),(0,e.jsx)(u.Z,{min:0,precision:1,style:{width:"100%"},value:s.height,onChange:function(r){var a=d()(C.itemSkuList);a[_].height=r,P({itemSkuList:a})}})]})]})}}),(0,e.jsx)(v.Z.Column,{title:"\u51C0\u91CD/\u6BDB\u91CD(kg)",width:240,render:function(D,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u51C0\u91CD"}),(0,e.jsx)(u.Z,{min:0,precision:3,style:{width:"100%"},value:s.netWeight,onChange:function(r){var a=d()(C.itemSkuList);a[_].netWeight=r,P({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u6BDB\u91CD"}),(0,e.jsx)(u.Z,{min:0,precision:3,style:{width:"100%"},value:s.grossWeight,onChange:function(r){var a=d()(C.itemSkuList);a[_].grossWeight=r,P({itemSkuList:a})}})]})]})}}),(0,e.jsx)(v.Z.Column,{title:"\u6210\u672C\u4EF7/\u9500\u552E\u4EF7(\u5143)",width:240,render:function(D,s,_){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:c.Z.flexCenter,children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u6210\u672C\u4EF7"}),(0,e.jsx)(u.Z,{min:0,precision:2,style:{width:"100%"},value:s.costPrice,onChange:function(r){var a=d()(C.itemSkuList);a[_].costPrice=r,P({itemSkuList:a})}})]}),(0,e.jsxs)("div",{className:c.Z.flexCenter,style:{marginTop:5},children:[(0,e.jsx)("span",{className:c.Z.mr5,children:"\u9500\u552E\u4EF7"}),(0,e.jsx)(u.Z,{min:0,precision:2,style:{width:"100%"},value:s.sellingPrice,onChange:function(r){var a=d()(C.itemSkuList);a[_].sellingPrice=r,P({itemSkuList:a})}})]})]})}}),(0,e.jsx)(v.Z.Column,{title:"\u64CD\u4F5C",width:80,align:"right",render:function(D,s,_){return(0,e.jsx)(M.ZP,{type:"link",icon:(0,e.jsx)(ie.Z,{}),onClick:function(){return Se(s,_)}})}})]})})})]}),(0,e.jsx)(S.Z,{title:je,width:500,open:ge,onCancel:function(){return R(!1)},footer:(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)(M.ZP,{onClick:function(){return R(!1)},style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(M.ZP,{type:"primary",loading:ue,onClick:Te,children:"\u786E\u5B9A"})]}),children:(0,e.jsxs)(f.Z,{form:N,layout:"vertical",children:[(0,e.jsx)(f.Z.Item,{label:"\u4E0A\u7EA7\u5206\u7C7B",name:"parentId",children:(0,e.jsx)(i.Z,{treeData:H,placeholder:"\u4E0A\u7EA7\u5206\u7C7B",style:{width:"100%"},fieldNames:{label:"title",value:"key",children:"children"},disabled:!Me})}),(0,e.jsx)(f.Z.Item,{label:"\u5546\u54C1\u5206\u7C7B\u540D\u79F0",name:"categoryName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u5206\u7C7B\u540D\u79F0"}],children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5206\u7C7B\u540D\u79F0"})})]})})]})};T.default=_e},49081:function(U,T,t){t.d(T,{$G:function(){return M},Ry:function(){return o},jX:function(){return S},rV:function(){return y}});var F=t(15009),d=t.n(F),I=t(99289),E=t.n(I),b=t(76772),A=t(30964);function w(i){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function i(n){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/item/list",{method:"GET",params:n}));case 1:case"end":return u.stop()}},i)})),j.apply(this,arguments)}function K(i){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function i(n){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/item/listNoPage",{method:"GET",params:n}));case 1:case"end":return u.stop()}},i)})),p.apply(this,arguments)}function x(i){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function i(n){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/itemSku/selectList",{method:"GET",params:n}));case 1:case"end":return u.stop()}},i)})),g.apply(this,arguments)}function f(i,n){return downLoadXlsx("/api/wms/item/export",{params:i},"item_".concat(new Date().getTime(),".xlsx"))}function y(i){return(0,b.request)("/api/wms/item/".concat(i),{method:"GET"})}function S(i){return Z.apply(this,arguments)}function Z(){return Z=E()(d()().mark(function i(n){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,b.request)("/api/wms/item",{method:"POST",data:n}));case 1:case"end":return u.stop()}},i)})),Z.apply(this,arguments)}function M(i){return O.apply(this,arguments)}function O(){return O=E()(d()().mark(function i(n){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,b.request)("/api/wms/item",{method:"PUT",data:n}));case 1:case"end":return u.stop()}},i)})),O.apply(this,arguments)}function o(i){return m.apply(this,arguments)}function m(){return m=E()(d()().mark(function i(n){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,b.request)("/api/wms/item/".concat(n),{method:"DELETE"}));case 1:case"end":return u.stop()}},i)})),m.apply(this,arguments)}},3057:function(U,T,t){t.d(T,{pe:function(){return M},uE:function(){return w}});var F=t(15009),d=t.n(F),I=t(99289),E=t.n(I),b=t(76772),A=t(30964);function w(o){return j.apply(this,arguments)}function j(){return j=E()(d()().mark(function o(m){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/itemSku/list",{method:"GET",params:m}));case 1:case"end":return n.stop()}},o)})),j.apply(this,arguments)}function K(o){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function o(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/itemSku/listNoPage",{method:"GET",params:m}));case 1:case"end":return n.stop()}},o)})),p.apply(this,arguments)}function x(o,m){return downLoadXlsx("/api/wms/itemSku/export",{params:o},"itemSku_".concat(new Date().getTime(),".xlsx"))}function g(o){return request("/api/wms/itemSku/".concat(o),{method:"GET"})}function f(o){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function o(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/itemSku",{method:"POST",data:m}));case 1:case"end":return n.stop()}},o)})),y.apply(this,arguments)}function S(o){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function o(m){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/wms/itemSku",{method:"PUT",data:m}));case 1:case"end":return n.stop()}},o)})),Z.apply(this,arguments)}function M(o){return O.apply(this,arguments)}function O(){return O=E()(d()().mark(function o(m){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,b.request)("/api/wms/itemSku/".concat(m),{method:"DELETE"}));case 1:case"end":return n.stop()}},o)})),O.apply(this,arguments)}},32007:function(U,T){T.Z={appContainer:"appContainer___wvvxK",mt20:"mt20___z4Ygz",mr10:"mr10___G6Gvv",flexSpaceBetween:"flexSpaceBetween___HgehM",flexCenter:"flexCenter___bf7Eo",customTreeNode:"customTreeNode___gqrNv","ant-btn":"ant-btn___WJ3od",myCell:"myCell___vfuzR"}}}]);
