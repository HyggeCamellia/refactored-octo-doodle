"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1283],{21283:function(Y,B,s){s.r(B);var Z=s(97857),y=s.n(Z),L=s(5574),w=s.n(L),U=s(15009),a=s.n(U),K=s(99289),m=s.n(K),C=s(67294),d=s(76772),c=s(2453),j=s(83622),R=s(17788),W=s(6110),$=s(65385),x=s(2236),I=s(11475),F=s(48689),k=s(3355),S=s(24969),O=s(38002),N=s(94162),e=s(85893),A=function(){var g=m()(a()().mark(function h(u){var f,l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(f=c.ZP.loading("\u6B63\u5728\u5220\u9664"),u){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,(0,O.jw)(u.map(function(E){return E.infoId}).join(","));case 6:return l=r.sent,f(),l.code===200?c.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.ZP.error(l.msg),r.abrupt("return",!0);case 12:return r.prev=12,r.t0=r.catch(3),f(),c.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),r.abrupt("return",!1);case 17:case"end":return r.stop()}},h,null,[[3,12]])}));return function(u){return g.apply(this,arguments)}}(),G=function(){var g=m()(a()().mark(function h(){var u,f;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=c.ZP.loading("\u8BF7\u7A0D\u5019"),n.prev=1,n.next=4,(0,O.KF)();case 4:return f=n.sent,u(),f.code===200?c.ZP.success("\u6E05\u7A7A\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.ZP.error(f.msg),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),u(),c.ZP.error("\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},h,null,[[1,10]])}));return function(){return g.apply(this,arguments)}}(),z=function(){var g=m()(a()().mark(function h(u){var f,l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f=c.ZP.loading("\u6B63\u5728\u89E3\u9501"),r.prev=1,r.next=4,(0,O.Ny)(u);case 4:return l=r.sent,f(),l.code===200?c.ZP.success("\u89E3\u9501\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.ZP.error(l.msg),r.abrupt("return",!0);case 10:return r.prev=10,r.t0=r.catch(1),f(),c.ZP.error("\u89E3\u9501\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),r.abrupt("return",!1);case 15:case"end":return r.stop()}},h,null,[[1,10]])}));return function(u){return g.apply(this,arguments)}}(),Q=function(){var g=m()(a()().mark(function h(){var u;return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=c.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),l.prev=1,l.next=4,(0,O.Q6)();case 4:return u(),c.ZP.success("\u5BFC\u51FA\u6210\u529F"),l.abrupt("return",!0);case 9:return l.prev=9,l.t0=l.catch(1),u(),c.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),l.abrupt("return",!1);case 14:case"end":return l.stop()}},h,null,[[1,9]])}));return function(){return g.apply(this,arguments)}}(),H=function(){var h=(0,C.useRef)(),u=(0,C.useRef)(),f=(0,C.useState)([]),l=w()(f,2),n=l[0],r=l[1],E=(0,d.useAccess)(),J={0:{label:"\u6210\u529F",key:"0",value:"0",text:"\u6210\u529F",status:"success",listClass:"success"},1:{label:"\u5931\u8D25",key:"1",value:"1",text:"\u5931\u8D25",status:"error",listClass:"danger"}},V=(0,d.useIntl)();(0,C.useEffect)(function(){},[]);var X=[{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.info_id",defaultMessage:"\u8BBF\u95EE\u7F16\u53F7"}),dataIndex:"infoId",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.user_name",defaultMessage:"\u7528\u6237\u8D26\u53F7"}),dataIndex:"userName",valueType:"text"},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.ipaddr",defaultMessage:"\u767B\u5F55IP\u5730\u5740"}),dataIndex:"ipaddr",valueType:"text"},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.login_location",defaultMessage:"\u767B\u5F55\u5730\u70B9"}),dataIndex:"loginLocation",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.browser",defaultMessage:"\u6D4F\u89C8\u5668\u7C7B\u578B"}),dataIndex:"browser",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.os",defaultMessage:"\u64CD\u4F5C\u7CFB\u7EDF"}),dataIndex:"os",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.status",defaultMessage:"\u767B\u5F55\u72B6\u6001"}),dataIndex:"status",valueType:"select",render:function(v,D){return(0,e.jsx)(N.Z,{enums:J,value:D.status})}},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.msg",defaultMessage:"\u63D0\u793A\u6D88\u606F"}),dataIndex:"msg",valueType:"text",hideInSearch:!0},{title:(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.login_time",defaultMessage:"\u8BBF\u95EE\u65F6\u95F4"}),dataIndex:"loginTime",valueType:"dateTime"}];return(0,e.jsxs)(W._z,{children:[(0,e.jsx)("div",{style:{width:"100%",float:"right"},children:(0,e.jsx)($.Z,{headerTitle:V.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:u,formRef:h,rowKey:"infoId",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(j.ZP,{danger:!0,hidden:(n==null?void 0:n.length)===0||!E.hasPerms("monitor:logininfor:remove"),onClick:m()(a()().mark(function v(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:R.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,e.jsx)(I.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return m()(a()().mark(function P(){var p,i,_;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(n);case 2:p=t.sent,p&&(r([]),(i=u.current)===null||i===void 0||(_=i.reloadAndRest)===null||_===void 0||_.call(i));case 4:case"end":return t.stop()}},P)}))()},onCancel:function(){}});case 1:case"end":return o.stop()}},v)})),children:[(0,e.jsx)(F.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove"),(0,e.jsxs)(j.ZP,{type:"primary",danger:!0,hidden:(n==null?void 0:n.length)===0||!E.hasPerms("monitor:logininfor:remove"),onClick:m()(a()().mark(function v(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:R.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u6E05\u7A7A\u6240\u6709\u6570\u636E\u9879?",icon:(0,e.jsx)(I.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return m()(a()().mark(function P(){var p,i,_;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:p=t.sent,p&&(r([]),(i=u.current)===null||i===void 0||(_=i.reloadAndRest)===null||_===void 0||_.call(i));case 4:case"end":return t.stop()}},P)}))()},onCancel:function(){}});case 1:case"end":return o.stop()}},v)})),children:[(0,e.jsx)(F.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.cleanAll",defaultMessage:"\u6E05\u7A7A"})]},"clean"),(0,e.jsxs)(j.ZP,{type:"primary",hidden:(n==null?void 0:n.length)===0||!E.hasPerms("monitor:logininfor:unlock"),onClick:m()(a()().mark(function v(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:R.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u89E3\u9501\u8BE5\u7528\u6237\u7684\u6570\u636E\u9879?",icon:(0,e.jsx)(I.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return m()(a()().mark(function P(){var p,i,_;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(n[0].userName);case 2:p=t.sent,p&&(r([]),(i=u.current)===null||i===void 0||(_=i.reloadAndRest)===null||_===void 0||_.call(i));case 4:case"end":return t.stop()}},P)}))()},onCancel:function(){}});case 1:case"end":return o.stop()}},v)})),children:[(0,e.jsx)(k.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"monitor.logininfor.unlock",defaultMessage:"\u89E3\u9501"})]},"unlock"),(0,e.jsxs)(j.ZP,{type:"primary",hidden:!E.hasPerms("monitor:logininfor:export"),onClick:m()(a()().mark(function v(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:Q();case 1:case"end":return o.stop()}},v)})),children:[(0,e.jsx)(S.Z,{}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.export",defaultMessage:"\u5BFC\u51FA"})]},"export")]},request:function(v){return(0,O.U0)(y()({},v)).then(function(D){var o={data:D.rows,total:D.total,success:!0};return o})},columns:X,rowSelection:{onChange:function(v,D){r(D)}}},"logininforList")}),(n==null?void 0:n.length)>0&&(0,e.jsx)(x.S,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,e.jsx)("a",{style:{fontWeight:600},children:n.length}),(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(j.ZP,{danger:!0,hidden:!E.hasPerms("monitor:logininfor:remove"),onClick:m()(a()().mark(function T(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:R.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var o=m()(a()().mark(function P(){var p,i,_;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(n);case 2:p=t.sent,p&&(r([]),(i=u.current)===null||i===void 0||(_=i.reloadAndRest)===null||_===void 0||_.call(i));case 4:case"end":return t.stop()}},P)}));function M(){return o.apply(this,arguments)}return M}()});case 1:case"end":return D.stop()}},T)})),children:(0,e.jsx)(d.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")})]})};B.default=H}}]);
