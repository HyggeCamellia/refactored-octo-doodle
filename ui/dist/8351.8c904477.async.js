"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8351,3531,1122],{78351:function(ve,Z,t){t.r(Z);var d=t(15009),F=t.n(d),U=t(97857),A=t.n(U),W=t(99289),X=t.n(W),H=t(5574),b=t.n(H),R=t(67294),K=t(76772),k=t(29021),j=t(77569),Q=t(53531),N=t(85265),Y=t(83622),S=t(25278),x=t(34041),L=t(48296),_=t(65385),v=t(28206),$=t(27484),s=t.n($),e=t(85893),ae=k.default.RangePicker,re=(0,R.forwardRef)(function(J,q){var oe=J.open,ee=J.onCancel,te=J.selectedInventory,a=te===void 0?[]:te,r=j.Z.useForm(),i=b()(r,1),n=i[0],l=(0,R.useRef)(),C=(0,R.useState)([]),h=b()(C,2),f=h[0],m=h[1],y=(0,R.useState)(!1),P=b()(y,2),M=P[0],E=P[1],g=(0,R.useState)(!1),I=b()(g,2),B=I[0],le=I[1],G=(0,K.useModel)("wms"),se=G.warehouseMap,V=G.areaMap,ie=G.itemBrandMap;(0,R.useImperativeHandle)(q,function(){return{setWarehouseIdAndAreaId:ue,getList:function(){var u;(u=l.current)===null||u===void 0||u.reload()}}});var ue=function(u,o){n.setFieldsValue({warehouseId:u,areaId:o}),le(!!o)},de=function(u){return!a.some(function(o){return o.id===u.id})},ce=[{title:"\u5E93\u533A",dataIndex:"areaName",render:function(u,o){var D;return(D=V.get(o.areaId))===null||D===void 0?void 0:D.areaName}},{title:"\u5546\u54C1\u4FE1\u606F",render:function(u,o){var D,p,O,z;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(D=o.item)===null||D===void 0?void 0:D.itemName}),((p=o.item)===null||p===void 0?void 0:p.itemCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",o.item.itemCode]}),((O=o.item)===null||O===void 0?void 0:O.itemBrand)&&(0,e.jsxs)("div",{children:["\u54C1\u724C\uFF1A",(z=ie.get(o.item.itemBrand))===null||z===void 0?void 0:z.brandName]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",render:function(u,o){var D,p,O;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(D=o.itemSku)===null||D===void 0?void 0:D.skuName}),((p=o.itemSku)===null||p===void 0?void 0:p.skuCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",o.itemSku.skuCode]}),((O=o.itemSku)===null||O===void 0?void 0:O.barcode)&&(0,e.jsxs)("div",{children:["\u6761\u7801\uFF1A",o.itemSku.barcode]})]})}},{title:"\u6279\u53F7",dataIndex:"batchNo",align:"left"},{title:"\u751F\u4EA7\u65E5\u671F/\u8FC7\u671F\u65E5\u671F",align:"left",width:180,render:function(u,o){return(0,e.jsxs)("div",{children:[o.productionDate&&(0,e.jsxs)("div",{children:["\u751F\u4EA7\u65E5\u671F\uFF1A",s()(o.productionDate).format("YYYY-MM-DD")]}),o.expirationDate&&(0,e.jsxs)("div",{children:["\u8FC7\u671F\u65E5\u671F\uFF1A",s()(o.expirationDate).format("YYYY-MM-DD")]})]})}},{title:"\u5165\u5E93\u65E5\u671F",align:"left",width:140,render:function(u,o){return(0,e.jsx)("div",{children:s()(o.createTime).format("YYYY-MM-DD")})}},{title:"\u5269\u4F59\u5E93\u5B58",align:"right",render:function(u,o){return(0,e.jsx)(Q.Z,{value:Number(o.remainQuantity),precision:0})}}],T=function(){ee(),m([])},ne=function(){ee(),m([])};return(0,e.jsxs)(N.Z,{title:"\u9009\u62E9\u5E93\u5B58",width:1200,open:oe,onClose:ne,destroyOnClose:!0,footer:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,e.jsx)(Y.ZP,{onClick:ne,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(Y.ZP,{type:"primary",onClick:T,children:"\u786E\u8BA4"})]}),children:[(0,e.jsxs)(j.Z,{form:n,layout:"inline",labelAlign:"left",children:[(0,e.jsx)(j.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",children:(0,e.jsx)(S.Z,{placeholder:"\u5546\u54C1\u540D\u79F0",allowClear:!0})}),(0,e.jsx)(j.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,e.jsx)(S.Z,{placeholder:"\u5546\u54C1\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(j.Z.Item,{label:"\u5E93\u533A",name:"areaId",children:(0,e.jsx)(x.Z,{placeholder:"\u8BF7\u9009\u62E9\u5E93\u533A",disabled:B,allowClear:!0,style:{width:180},children:Array.from(V.values()).map(function(c){return(0,e.jsx)(x.Z.Option,{value:c.id,children:c.areaName},c.id)})})}),(0,e.jsx)(j.Z.Item,{label:"\u89C4\u683C\u540D\u79F0",name:"skuName",children:(0,e.jsx)(S.Z,{placeholder:"\u89C4\u683C\u540D\u79F0",allowClear:!0,style:{width:180}})}),(0,e.jsx)(j.Z.Item,{label:"\u89C4\u683C\u7F16\u53F7",name:"barcode",children:(0,e.jsx)(S.Z,{placeholder:"\u89C4\u683C\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(j.Z.Item,{label:"\u6279\u53F7",name:"batchNo",children:(0,e.jsx)(S.Z,{placeholder:"\u6279\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(j.Z.Item,{label:"\u5165\u5E93\u65E5\u671F",name:"createTimeRange",children:(0,e.jsx)(ae,{format:"YYYY-MM-DD",placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"]})}),(0,e.jsx)(j.Z.Item,{label:"\u591A\u5C11\u5929\u5185\u8FC7\u671F",name:"daysToExpires",children:(0,e.jsxs)(x.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,style:{width:120},children:[(0,e.jsx)(x.Z.Option,{value:30,children:"30\u5929\u5185"}),(0,e.jsx)(x.Z.Option,{value:60,children:"60\u5929\u5185"}),(0,e.jsx)(x.Z.Option,{value:90,children:"90\u5929\u5185"}),(0,e.jsx)(x.Z.Option,{value:120,children:"120\u5929\u5185"}),(0,e.jsx)(x.Z.Option,{value:180,children:"180\u5929\u5185"}),(0,e.jsx)(x.Z.Option,{value:365,children:"365\u5929\u5185"})]})}),(0,e.jsx)(j.Z.Item,{children:(0,e.jsx)(Y.ZP,{type:"primary",icon:(0,e.jsx)(L.Z,{}),onClick:function(){var u;return(u=l.current)===null||u===void 0?void 0:u.reload()},children:"\u67E5\u8BE2"})})]}),(0,e.jsx)(_.Z,{style:{marginTop:16},actionRef:l,rowKey:"id",search:!1,options:!1,request:function(){var c=X()(F()().mark(function u(o){var D,p,O,z,me;return F()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return E(!0),w.prev=1,O=n.getFieldsValue(),z=A()(A()({},O),{},{createStartTime:(D=O.createTimeRange)===null||D===void 0||(D=D[0])===null||D===void 0?void 0:D.format("YYYY-MM-DD HH:mm:ss"),createEndTime:(p=O.createTimeRange)===null||p===void 0||(p=p[1])===null||p===void 0?void 0:p.format("YYYY-MM-DD HH:mm:ss"),pageNum:o.current,pageSize:o.pageSize}),w.next=6,(0,v.fN)(z);case 6:return me=w.sent,w.abrupt("return",{data:me.rows.map(function(_e){var De,fe;return A()(A()({},_e),{},{warehouseName:(De=se.get(_e.warehouseId))===null||De===void 0?void 0:De.warehouseName,areaName:(fe=V.get(_e.areaId))===null||fe===void 0?void 0:fe.areaName})}),total:me.total,success:!0});case 8:return w.prev=8,E(!1),w.finish(8);case 11:case"end":return w.stop()}},u,null,[[1,,8,11]])}));return function(u){return c.apply(this,arguments)}}(),columns:ce,rowSelection:{selectedRowKeys:f.map(function(c){return c.id}),onChange:function(u,o){return m(o)},getCheckboxProps:function(u){return{disabled:!de(u)}}},loading:M,pagination:{showSizeChanger:!0}})]})});Z.default=re},28206:function(ve,Z,t){t.d(Z,{fN:function(){return H},tB:function(){return R}});var d=t(15009),F=t.n(d),U=t(99289),A=t.n(U),W=t(76772),X=t(30964);function H(_){return b.apply(this,arguments)}function b(){return b=A()(F()().mark(function _(v){return F()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,W.request)("/api/wms/inventoryDetail/list",{method:"GET",params:v}));case 1:case"end":return s.stop()}},_)})),b.apply(this,arguments)}function R(_){return K.apply(this,arguments)}function K(){return K=A()(F()().mark(function _(v){return F()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,W.request)("/api/wms/inventoryDetail/listNoPage",{method:"GET",params:v}));case 1:case"end":return s.stop()}},_)})),K.apply(this,arguments)}function k(_,v){return downLoadXlsx("/api/wms/inventoryDetail/export",{params:_},"inventoryDetail_".concat(new Date().getTime(),".xlsx"))}function j(_){return request("/api/wms/inventoryDetail/".concat(_),{method:"GET"})}function Q(_){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function _(v){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/wms/inventoryDetail",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),N.apply(this,arguments)}function Y(_){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime().mark(function _(v){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/wms/inventoryDetail",{method:"PUT",data:v}));case 1:case"end":return s.stop()}},_)})),S.apply(this,arguments)}function x(_){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function _(v){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/api/wms/inventoryDetail/".concat(v),{method:"DELETE"}));case 1:case"end":return s.stop()}},_)})),L.apply(this,arguments)}},53531:function(ve,Z,t){t.d(Z,{Z:function(){return te}});var d=t(67294),F=t(56790),U=t(75164),A=t(96159),W=t(93967),X=t.n(W),H=t(64217),b=t(53124),R=t(48054),k=a=>{const{value:r,formatter:i,precision:n,decimalSeparator:l,groupSeparator:C="",prefixCls:h}=a;let f;if(typeof i=="function")f=i(r);else{const m=String(r),y=m.match(/^(-?)(\d*)(\.(\d+))?$/);if(!y||m==="-")f=m;else{const P=y[1];let M=y[2]||"0",E=y[4]||"";M=M.replace(/\B(?=(\d{3})+(?!\d))/g,C),typeof n=="number"&&(E=E.padEnd(n,"0").slice(0,n>0?n:0)),E&&(E=`${l}${E}`),f=[d.createElement("span",{key:"int",className:`${h}-content-value-int`},P,M),E&&d.createElement("span",{key:"decimal",className:`${h}-content-value-decimal`},E)]}}return d.createElement("span",{className:`${h}-content-value`},f)},j=t(14747),Q=t(83559),N=t(83262);const Y=a=>{const{componentCls:r,marginXXS:i,padding:n,colorTextDescription:l,titleFontSize:C,colorTextHeading:h,contentFontSize:f,fontFamily:m}=a;return{[r]:Object.assign(Object.assign({},(0,j.Wf)(a)),{[`${r}-title`]:{marginBottom:i,color:l,fontSize:C},[`${r}-skeleton`]:{paddingTop:n},[`${r}-content`]:{color:h,fontSize:f,fontFamily:m,[`${r}-content-value`]:{display:"inline-block",direction:"ltr"},[`${r}-content-prefix, ${r}-content-suffix`]:{display:"inline-block"},[`${r}-content-prefix`]:{marginInlineEnd:i},[`${r}-content-suffix`]:{marginInlineStart:i}}})}},S=a=>{const{fontSizeHeading3:r,fontSize:i}=a;return{titleFontSize:i,contentFontSize:r}};var x=(0,Q.I$)("Statistic",a=>{const r=(0,N.IX)(a,{});return Y(r)},S),L=function(a,r){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(a);l<n.length;l++)r.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(a,n[l])&&(i[n[l]]=a[n[l]]);return i},v=d.forwardRef((a,r)=>{const{prefixCls:i,className:n,rootClassName:l,style:C,valueStyle:h,value:f=0,title:m,valueRender:y,prefix:P,suffix:M,loading:E=!1,formatter:g,precision:I,decimalSeparator:B=".",groupSeparator:le=",",onMouseEnter:G,onMouseLeave:se}=a,V=L(a,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:ie,direction:ue,className:de,style:ce}=(0,b.dj)("statistic"),T=ie("statistic",i),[ne,c,u]=x(T),o=d.createElement(k,{decimalSeparator:B,groupSeparator:le,prefixCls:T,formatter:g,precision:I,value:f}),D=X()(T,{[`${T}-rtl`]:ue==="rtl"},de,n,l,c,u),p=d.useRef(null);d.useImperativeHandle(r,()=>({nativeElement:p.current}));const O=(0,H.Z)(V,{aria:!0,data:!0});return ne(d.createElement("div",Object.assign({},O,{ref:p,className:D,style:Object.assign(Object.assign({},ce),C),onMouseEnter:G,onMouseLeave:se}),m&&d.createElement("div",{className:`${T}-title`},m),d.createElement(R.Z,{paragraph:!1,loading:E,className:`${T}-skeleton`},d.createElement("div",{style:h,className:`${T}-content`},P&&d.createElement("span",{className:`${T}-content-prefix`},P),y?y(o):o,M&&d.createElement("span",{className:`${T}-content-suffix`},M)))))});const $=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function s(a,r){let i=a;const n=/\[[^\]]*]/g,l=(r.match(n)||[]).map(m=>m.slice(1,-1)),C=r.replace(n,"[]"),h=$.reduce((m,[y,P])=>{if(m.includes(y)){const M=Math.floor(i/P);return i-=M*P,m.replace(new RegExp(`${y}+`,"g"),E=>{const g=E.length;return M.toString().padStart(g,"0")})}return m},C);let f=0;return h.replace(n,()=>{const m=l[f];return f+=1,m})}function e(a,r,i){const{format:n=""}=r,l=new Date(a).getTime(),C=Date.now(),h=Math.max(i?l-C:C-l,0);return s(h,n)}var ae=function(a,r){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&r.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(a);l<n.length;l++)r.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(a,n[l])&&(i[n[l]]=a[n[l]]);return i};function re(a){return new Date(a).getTime()}var q=a=>{const{value:r,format:i="HH:mm:ss",onChange:n,onFinish:l,type:C}=a,h=ae(a,["value","format","onChange","onFinish","type"]),f=C==="countdown",[m,y]=d.useState(null),P=(0,F.zX)(()=>{const g=Date.now(),I=re(r);y({});const B=f?I-g:g-I;return n==null||n(B),f&&I<g?(l==null||l(),!1):!0});d.useEffect(()=>{let g;const I=()=>U.Z.cancel(g),B=()=>{g=(0,U.Z)(()=>{P()&&B()})};return B(),I},[r,f]),d.useEffect(()=>{y({})},[]);const M=(g,I)=>m?e(g,Object.assign(Object.assign({},I),{format:i}),f):"-",E=g=>(0,A.Tm)(g,{title:void 0});return d.createElement(v,Object.assign({},h,{value:r,valueRender:E,formatter:M}))};const oe=a=>d.createElement(q,Object.assign({},a,{type:"countdown"}));var ee=d.memo(oe);v.Timer=q,v.Countdown=ee;var te=v}}]);
