"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4316],{54316:function(J,h,e){e.r(h);var R=e(5574),f=e.n(R),o=e(67294),D=e(76772),c=e(83622),u=e(3303),j=e(24969),W=e(33160),a=e(85893),I=(0,o.forwardRef)(function(n,T){var x=n.value,B=n.onChange,v=n.size,S=v===void 0?"middle":v,E=n.showAllLevels,p=E===void 0?!1:E,m=n.disabled,y=m===void 0?!1:m,C=n.clearable,K=C===void 0?!0:C,O=n.multiple,U=O===void 0?!1:O,i=(0,D.useModel)("wms"),M=i.areaList,L=i.warehouseList,P=i.getWarehouseList,A=i.getAreaList,Z=(0,o.useState)([]),b=f()(Z,2),V=b[0],$=b[1],z=(0,o.useState)(!1),g=f()(z,2),Q=g[0],_=g[1];(0,o.useImperativeHandle)(T,function(){return{refresh:function(){P(),A()}}}),(0,o.useEffect)(function(){H()},[L,M]);var H=function(){var l=new Map,d=new Map;M.forEach(function(s){var w=d.get(s.warehouseId)||[];w.push({value:s.id,label:s.areaName}),d.set(s.warehouseId,w)});var r=L.map(function(s){return{value:s.id,label:s.warehouseName,children:d.get(s.id)}});$(p?r:r.filter(function(s){return s.children}))},F=function(l){_(l)},N=function(){D.history.push("/system/warehouse"),_(!1)},k=function(){P(),A(),_(!1)},G=function(l){return(0,a.jsxs)("div",{children:[l,(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px",borderTop:"1px solid #f0f2f5"},children:[(0,a.jsx)(c.ZP,{type:"link",icon:(0,a.jsx)(j.Z,{}),onClick:N,children:"\u65B0\u589E"}),(0,a.jsx)(c.ZP,{type:"link",icon:(0,a.jsx)(W.Z,{}),onClick:k,children:"\u5237\u65B0"})]})]})};return(0,a.jsx)(u.Z,{placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u4FE1\u606F",options:V,value:x,onChange:B,multiple:U,allowClear:K,size:S,disabled:y,showCheckedStrategy:p?u.Z.SHOW_CHILD:u.Z.SHOW_PARENT,dropdownRender:G,onDropdownVisibleChange:F,showSearch:{filter:function(l,d){return d.some(function(r){return r.label.toLowerCase().indexOf(l.toLowerCase())>-1})}}})});h.default=I}}]);
