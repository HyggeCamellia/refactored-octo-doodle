"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6878,9034],{64317:function(Q,I,e){var T=e(1413),h=e(91),x=e(22270),t=e(67294),K=e(66758),b=e(45502),S=e(85893),v=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],_=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],E=function(p,u){var Z=p.fieldProps,d=p.children,r=p.params,F=p.proFieldProps,a=p.mode,j=p.valueEnum,A=p.request,g=p.showSearch,P=p.options,W=(0,h.Z)(p,v),C=(0,t.useContext)(K.Z);return(0,S.jsx)(b.Z,(0,T.Z)((0,T.Z)({valueEnum:(0,x.h)(j),request:A,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,T.Z)({options:P,mode:a,showSearch:g,getPopupContainer:C.getPopupContainer},Z),ref:u,proFieldProps:F},W),{},{children:d}))},c=t.forwardRef(function(f,p){var u=f.fieldProps,Z=f.children,d=f.params,r=f.proFieldProps,F=f.mode,a=f.valueEnum,j=f.request,A=f.options,g=(0,h.Z)(f,_),P=(0,T.Z)({options:A,mode:F||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},u),W=(0,t.useContext)(K.Z);return(0,S.jsx)(b.Z,(0,T.Z)((0,T.Z)({valueEnum:(0,x.h)(a),request:j,params:d,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,T.Z)({getPopupContainer:W.getPopupContainer},P),ref:p,proFieldProps:r},g),{},{children:Z}))}),L=t.forwardRef(E),M=c,o=L;o.SearchSelect=M,o.displayName="ProFormComponent",I.Z=o},5966:function(Q,I,e){var T=e(97685),h=e(1413),x=e(91),t=e(21770),K=e(77569),b=e(55241),S=e(98423),v=e(67294),_=e(45502),E=e(85893),c=["fieldProps","proFieldProps"],L=["fieldProps","proFieldProps"],M="text",o=function(d){var r=d.fieldProps,F=d.proFieldProps,a=(0,x.Z)(d,c);return(0,E.jsx)(_.Z,(0,h.Z)({valueType:M,fieldProps:r,filedConfig:{valueType:M},proFieldProps:F},a))},f=function(d){var r=(0,t.Z)(d.open||!1,{value:d.open,onChange:d.onOpenChange}),F=(0,T.Z)(r,2),a=F[0],j=F[1];return(0,E.jsx)(K.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(g){var P,W=g.getFieldValue(d.name||[]);return(0,E.jsx)(b.Z,(0,h.Z)((0,h.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return j(l)},content:(0,E.jsxs)("div",{style:{padding:"4px 0"},children:[(P=d.statusRender)===null||P===void 0?void 0:P.call(d,W),d.strengthText?(0,E.jsx)("div",{style:{marginTop:10},children:(0,E.jsx)("span",{children:d.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},d.popoverProps),{},{open:a,children:d.children}))}})},p=function(d){var r=d.fieldProps,F=d.proFieldProps,a=(0,x.Z)(d,L),j=(0,v.useState)(!1),A=(0,T.Z)(j,2),g=A[0],P=A[1];return r!=null&&r.statusRender&&a.name?(0,E.jsx)(f,{name:a.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:g,onOpenChange:P,children:(0,E.jsx)("div",{children:(0,E.jsx)(_.Z,(0,h.Z)({valueType:"password",fieldProps:(0,h.Z)((0,h.Z)({},(0,S.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(C){var l;r==null||(l=r.onBlur)===null||l===void 0||l.call(r,C),P(!1)},onClick:function(C){var l;r==null||(l=r.onClick)===null||l===void 0||l.call(r,C),P(!0)}}),proFieldProps:F,filedConfig:{valueType:M}},a))})}):(0,E.jsx)(_.Z,(0,h.Z)({valueType:"password",fieldProps:r,proFieldProps:F,filedConfig:{valueType:M}},a))},u=o;u.Password=p,u.displayName="ProFormComponent",I.Z=u},99034:function(Q,I,e){e.r(I);var T=e(15009),h=e.n(T),x=e(99289),t=e.n(x),K=e(5574),b=e.n(K),S=e(67294),v=e(97269),_=e(5966),E=e(64317),c=e(77569),L=e(85265),M=e(83622),o=e(85893),f=function(u){var Z=c.Z.useForm(),d=b()(Z,1),r=d[0];(0,S.useEffect)(function(){r.resetFields(),r.setFieldsValue({id:u.values.id,merchantCode:u.values.merchantCode,merchantName:u.values.merchantName,merchantType:u.values.merchantType,merchantLevel:u.values.merchantLevel,bankName:u.values.bankName,bankAccount:u.values.bankAccount,address:u.values.address,mobile:u.values.mobile,tel:u.values.tel,contactPerson:u.values.contactPerson,email:u.values.email,remark:u.values.remark})},[r,u]);var F=function(){var a=t()(h()().mark(function j(A){return h()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:u.onSubmit(A);case 1:case"end":return P.stop()}},j)}));return function(A){return a.apply(this,arguments)}}();return(0,o.jsx)(L.Z,{width:600,title:u.values.id?"\u4FEE\u6539\u5F80\u6765\u5355\u4F4D":"\u6DFB\u52A0\u5F80\u6765\u5355\u4F4D",open:u.visible,onClose:u.onClose,destroyOnClose:!0,footer:(0,o.jsxs)("div",{style:{textAlign:"right"},children:[(0,o.jsx)(M.ZP,{onClick:u.onClose,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,o.jsx)(M.ZP,{type:"primary",onClick:function(){return r.submit()},children:"\u786E\u5B9A"})]}),children:(0,o.jsxs)(v.A,{form:r,submitter:!1,layout:"horizontal",onFinish:F,children:[(0,o.jsx)(_.Z,{name:"id",label:"ID",hidden:!0,disabled:!0}),(0,o.jsx)(_.Z,{name:"merchantCode",label:"\u7F16\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7",rules:[{required:!0,message:"\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,o.jsx)(_.Z,{name:"merchantName",label:"\u540D\u79F0",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,o.jsx)(E.Z,{name:"merchantType",label:"\u4F01\u4E1A\u7C7B\u578B",width:"xl",placeholder:"\u8BF7\u9009\u62E9\u4F01\u4E1A\u7C7B\u578B",options:[{label:"\u7C7B\u578B1",value:1},{label:"\u7C7B\u578B2",value:2}],rules:[{required:!0,message:"\u4F01\u4E1A\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,o.jsx)(_.Z,{name:"merchantLevel",label:"\u7EA7\u522B",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7EA7\u522B"}),(0,o.jsx)(_.Z,{name:"bankName",label:"\u5F00\u6237\u884C",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5F00\u6237\u884C"}),(0,o.jsx)(_.Z,{name:"bankAccount",label:"\u94F6\u884C\u8D26\u6237",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u94F6\u884C\u8D26\u6237"}),(0,o.jsx)(_.Z,{name:"address",label:"\u5730\u5740",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5730\u5740"}),(0,o.jsx)(_.Z,{name:"mobile",label:"\u624B\u673A\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"}),(0,o.jsx)(_.Z,{name:"tel",label:"\u5EA7\u673A\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5EA7\u673A\u53F7"}),(0,o.jsx)(_.Z,{name:"contactPerson",label:"\u8054\u7CFB\u4EBA",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA"}),(0,o.jsx)(_.Z,{name:"email",label:"Email",width:"xl",placeholder:"\u8BF7\u8F93\u5165Email"}),(0,o.jsx)(_.Z,{name:"remark",label:"\u5907\u6CE8",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})]})})};I.default=f},36878:function(Q,I,e){e.r(I);var T=e(5574),h=e.n(T),x=e(15009),t=e.n(x),K=e(97857),b=e.n(K),S=e(99289),v=e.n(S),_=e(67294),E=e(76772),c=e(2453),L=e(17788),M=e(83622),o=e(6110),f=e(65385),p=e(2236),u=e(24969),Z=e(23430),d=e(11475),r=e(13465),F=e(99034),a=e(85893),j=function(){var C=v()(t()().mark(function l(O){var B,s;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return B=c.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),n.prev=1,n.next=4,(0,r.tm)(b()({},O));case 4:return s=n.sent,B(),s.code===200?c.ZP.success("\u6DFB\u52A0\u6210\u529F"):c.ZP.error(s.msg),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),B(),c.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},l,null,[[1,10]])}));return function(O){return C.apply(this,arguments)}}(),A=function(){var C=v()(t()().mark(function l(O){var B,s;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return B=c.ZP.loading("\u6B63\u5728\u66F4\u65B0"),n.prev=1,n.next=4,(0,r.Dn)(O);case 4:return s=n.sent,B(),s.code===200?c.ZP.success("\u66F4\u65B0\u6210\u529F"):c.ZP.error(s.msg),n.abrupt("return",!0);case 10:return n.prev=10,n.t0=n.catch(1),B(),c.ZP.error("\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),n.abrupt("return",!1);case 15:case"end":return n.stop()}},l,null,[[1,10]])}));return function(O){return C.apply(this,arguments)}}(),g=function(){var C=v()(t()().mark(function l(O){var B,s;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(B=c.ZP.loading("\u6B63\u5728\u5220\u9664"),O){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,(0,r.fT)(O.map(function(k){return k.id}).join(","));case 6:return s=n.sent,B(),s.code===200?c.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):c.ZP.error(s.msg),n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(3),B(),n.t0===409?L.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:"\u5F80\u6765\u5355\u4F4D\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"}),(0,a.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})}):c.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 17:case"end":return n.stop()}},l,null,[[3,12]])}));return function(O){return C.apply(this,arguments)}}(),P=function(){var C=v()(t()().mark(function l(){var O;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return O=c.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),s.prev=1,s.next=4,(0,r.Jf)();case 4:return O(),c.ZP.success("\u5BFC\u51FA\u6210\u529F"),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),O(),c.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),s.abrupt("return",!1);case 14:case"end":return s.stop()}},l,null,[[1,9]])}));return function(){return C.apply(this,arguments)}}(),W=function(){var l=(0,_.useState)(!1),O=h()(l,2),B=O[0],s=O[1],y=(0,_.useRef)(),n=(0,_.useState)(),k=h()(n,2),ee=k[0],J=k[1],re=(0,_.useState)([]),X=h()(re,2),N=X[0],Y=X[1],z=(0,E.useAccess)(),ne=[{title:"\u7F16\u53F7",dataIndex:"merchantCode",valueType:"text"},{title:"\u540D\u79F0",dataIndex:"merchantName",valueType:"text"},{title:"\u4F01\u4E1A\u7C7B\u578B",dataIndex:"merchantType",valueType:"select",valueEnum:{1:{text:"\u7C7B\u578B1"},2:{text:"\u7C7B\u578B2"}}},{title:"\u7EA7\u522B",dataIndex:"merchantLevel",valueType:"text"},{title:"\u8054\u7CFB\u4EBA",dataIndex:"contactPerson",valueType:"text"},{title:"\u5907\u6CE8",dataIndex:"remark",valueType:"text"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",width:"180px",valueType:"option",render:function(R,D){return[(0,a.jsx)(M.ZP,{type:"link",size:"small",hidden:!z.hasPerms("wms:merchant:edit"),onClick:function(){J(D),s(!0)},children:"\u4FEE\u6539"},"edit"),(0,a.jsx)(M.ZP,{type:"link",size:"small",danger:!0,hidden:!z.hasPerms("wms:merchant:remove"),onClick:v()(t()().mark(function m(){return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:L.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u5F80\u6765\u5355\u4F4D\u3010".concat(D.merchantName,"\u3011\u5417\uFF1F"),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var $=v()(t()().mark(function q(){var w;return t()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,g([D]);case 2:w=G.sent,w&&y.current&&y.current.reload();case 4:case"end":return G.stop()}},q)}));function V(){return $.apply(this,arguments)}return V}()});case 1:case"end":return i.stop()}},m)})),children:"\u5220\u9664"},"delete")]}}];return(0,a.jsxs)(o._z,{children:[(0,a.jsx)(f.Z,{headerTitle:"\u5F80\u6765\u5355\u4F4D\u5217\u8868",actionRef:y,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(M.ZP,{type:"primary",hidden:!z.hasPerms("wms:merchant:add"),onClick:function(){J(void 0),s(!0)},children:[(0,a.jsx)(u.Z,{})," \u65B0\u589E"]},"add"),(0,a.jsxs)(M.ZP,{type:"primary",hidden:!z.hasPerms("wms:merchant:export"),onClick:v()(t()().mark(function R(){return t()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,P();case 2:case"end":return m.stop()}},R)})),children:[(0,a.jsx)(Z.Z,{})," \u5BFC\u51FA"]},"export")]},request:function(){var U=v()(t()().mark(function R(D){var m;return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,r.f0)(b()(b()({},D),{},{current:String(D.current),pageSize:String(D.pageSize)}));case 2:return m=i.sent,i.abrupt("return",{data:m.rows,total:m.total,success:!0});case 4:case"end":return i.stop()}},R)}));return function(R){return U.apply(this,arguments)}}(),columns:ne,rowSelection:{onChange:function(R,D){Y(D)}}}),(N==null?void 0:N.length)>0&&(0,a.jsx)(p.S,{extra:(0,a.jsxs)("div",{children:["\u5DF2\u9009\u62E9 ",(0,a.jsx)("a",{style:{fontWeight:600},children:N.length})," \u9879"]}),children:(0,a.jsx)(M.ZP,{danger:!0,hidden:!z.hasPerms("wms:merchant:remove"),onClick:v()(t()().mark(function U(){return t()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:L.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,a.jsx)(d.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return v()(t()().mark(function H(){var i,$,V;return t()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,g(N);case 2:i=w.sent,i&&(Y([]),($=y.current)===null||$===void 0||(V=$.reloadAndRest)===null||V===void 0||V.call($));case 4:case"end":return w.stop()}},H)}))()},onCancel:function(){}});case 1:case"end":return D.stop()}},U)})),children:"\u6279\u91CF\u5220\u9664"},"batchRemove")}),(0,a.jsx)(F.default,{onSubmit:function(){var U=v()(t()().mark(function R(D){var m;return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(m=!1,!D.id){i.next=7;break}return i.next=4,A(D);case 4:m=i.sent,i.next=10;break;case 7:return i.next=9,j(D);case 9:m=i.sent;case 10:m&&(s(!1),J(void 0),y.current&&y.current.reload());case 11:case"end":return i.stop()}},R)}));return function(R){return U.apply(this,arguments)}}(),onClose:function(){s(!1),J(void 0)},visible:B,values:ee||{}})]})};I.default=W}}]);
