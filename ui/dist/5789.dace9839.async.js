"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5789],{25789:function(ye,Z,n){n.r(Z);var G=n(67294),P=n(83622),l=n(20863),J=n(48689),Q=n(86548),Y=n(24969),u=n(85893),w=function(d){var M=d.warehouseList,q=d.selectedWarehouseId,_=d.onSelect,ee=d.onAdd,te=d.onUpdate,L=d.onDelete,ne=d.onDrop,ue=d.loading,W=d.hasAddPerm,fe=W===void 0?!0:W,j=d.hasEditPerm,$=j===void 0?!0:j,C=d.hasDeletePerm,F=C===void 0?!0:C,T=function(y){return(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,u.jsxs)("span",{children:[y.warehouseName,y.warehouseCode&&" (\u7F16\u53F7\uFF1A".concat(y.warehouseCode,")")]}),(0,u.jsxs)("span",{children:[(0,u.jsx)(P.ZP,{type:"link",size:"small",danger:!0,hidden:!F,onClick:function(I){I.stopPropagation(),L(y)},icon:(0,u.jsx)(J.Z,{}),children:"\u5220\u9664"}),(0,u.jsx)(P.ZP,{type:"link",size:"small",hidden:!$,onClick:function(I){I.stopPropagation(),te(y)},icon:(0,u.jsx)(Q.Z,{}),children:"\u4FEE\u6539"})]})]})};return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",backgroundColor:"lightgrey"},children:[(0,u.jsx)("span",{style:{fontSize:"14px"},children:"\u4ED3\u5E93\u5217\u8868"}),(0,u.jsx)(P.ZP,{type:"primary",size:"small",icon:(0,u.jsx)(Y.Z,{}),hidden:!fe,onClick:ee,children:"\u65B0\u589E\u4ED3\u5E93"})]}),(0,u.jsx)(l.Z,{treeData:M,fieldNames:{key:"id",title:"warehouseName"},selectedKeys:[q],onSelect:function(y){y.length>0&&_(y[0])},draggable:!0,blockNode:!0,titleRender:T,onDrop:ne})]})};Z.default=w},20863:function(ye,Z,n){n.d(Z,{Z:function(){return me}});var G=n(70593),P=n(74902),l=n(67294),J=n(26911),Q=n(95591),Y=n(32319),u=n(93967),w=n.n(u),de=n(10225),d=n(1089),M=n(53124),q=n(29751),_=n(33603),ee=n(29691),te=n(40561);const L=4;function ne(o){const{dropPosition:i,dropLevelOffset:r,prefixCls:t,indent:c,direction:e="ltr"}=o,s=e==="ltr"?"left":"right",f=e==="ltr"?"right":"left",a={[s]:-r*c+L,[f]:0};switch(i){case-1:a.top=-3;break;case 1:a.bottom=-3;break;default:a.bottom=-3,a[s]=c+L;break}return l.createElement("div",{style:a,className:`${t}-drop-indicator`})}var ue=ne,W=n(61639),j=l.forwardRef((o,i)=>{var r;const{getPrefixCls:t,direction:c,virtual:e,tree:s}=l.useContext(M.E_),{prefixCls:f,className:a,showIcon:B=!1,showLine:b,switcherIcon:k,switcherLoadingIcon:z,blockNode:H=!1,children:re,checkable:N=!1,selectable:S=!0,draggable:O,motion:A,style:le}=o,m=t("tree",f),ce=t(),R=A!=null?A:Object.assign(Object.assign({},(0,_.Z)(ce)),{motionAppear:!1}),ie=Object.assign(Object.assign({},o),{checkable:N,selectable:S,showIcon:B,motion:R,blockNode:H,showLine:!!b,dropIndicatorRender:ue}),[g,v,p]=(0,te.ZP)(m),[,D]=(0,ee.ZP)(),K=D.paddingXS/2+(((r=D.Tree)===null||r===void 0?void 0:r.titleHeight)||D.controlHeightSM),ae=l.useMemo(()=>{if(!O)return!1;let h={};switch(typeof O){case"function":h.nodeDraggable=O;break;case"object":h=Object.assign({},O);break;default:break}return h.icon!==!1&&(h.icon=h.icon||l.createElement(q.Z,null)),h},[O]),E=h=>l.createElement(W.Z,{prefixCls:m,switcherIcon:k,switcherLoadingIcon:z,treeNodeProps:h,showLine:b});return g(l.createElement(G.ZP,Object.assign({itemHeight:K,ref:i,virtual:e},ie,{style:Object.assign(Object.assign({},s==null?void 0:s.style),le),prefixCls:m,className:w()({[`${m}-icon-hide`]:!B,[`${m}-block-node`]:H,[`${m}-unselectable`]:!S,[`${m}-rtl`]:c==="rtl"},s==null?void 0:s.className,a,v,p),direction:c,checkable:N&&l.createElement("span",{className:`${m}-checkbox-inner`}),selectable:S,switcherIcon:E,draggable:ae}),re))});const $=0,C=1,F=2;function T(o,i,r){const{key:t,children:c}=r;function e(s){const f=s[t],a=s[c];i(f,s)!==!1&&T(a||[],i,r)}o.forEach(e)}function se({treeData:o,expandedKeys:i,startKey:r,endKey:t,fieldNames:c}){const e=[];let s=$;if(r&&r===t)return[r];if(!r||!t)return[];function f(a){return a===r||a===t}return T(o,a=>{if(s===F)return!1;if(f(a)){if(e.push(a),s===$)s=C;else if(s===C)return s=F,!1}else s===C&&e.push(a);return i.includes(a)},(0,d.w$)(c)),e}function y(o,i,r){const t=(0,P.Z)(i),c=[];return T(o,(e,s)=>{const f=t.indexOf(e);return f!==-1&&(c.push(s),t.splice(f,1)),!!t.length},(0,d.w$)(r)),c}var U=function(o,i){var r={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&i.indexOf(t)<0&&(r[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,t=Object.getOwnPropertySymbols(o);c<t.length;c++)i.indexOf(t[c])<0&&Object.prototype.propertyIsEnumerable.call(o,t[c])&&(r[t[c]]=o[t[c]]);return r};function I(o){const{isLeaf:i,expanded:r}=o;return i?l.createElement(J.Z,null):r?l.createElement(Q.Z,null):l.createElement(Y.Z,null)}function he({treeData:o,children:i}){return o||(0,d.zn)(i)}const ve=(o,i)=>{var{defaultExpandAll:r,defaultExpandParent:t,defaultExpandedKeys:c}=o,e=U(o,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const s=l.useRef(null),f=l.useRef(null),a=()=>{const{keyEntities:g}=(0,d.I8)(he(e));let v;return r?v=Object.keys(g):t?v=(0,de.r7)(e.expandedKeys||c||[],g):v=e.expandedKeys||c||[],v},[B,b]=l.useState(e.selectedKeys||e.defaultSelectedKeys||[]),[k,z]=l.useState(()=>a());l.useEffect(()=>{"selectedKeys"in e&&b(e.selectedKeys)},[e.selectedKeys]),l.useEffect(()=>{"expandedKeys"in e&&z(e.expandedKeys)},[e.expandedKeys]);const H=(g,v)=>{var p;return"expandedKeys"in e||z(g),(p=e.onExpand)===null||p===void 0?void 0:p.call(e,g,v)},re=(g,v)=>{var p;const{multiple:D,fieldNames:K}=e,{node:ae,nativeEvent:E}=v,{key:h=""}=ae,V=he(e),X=Object.assign(Object.assign({},v),{selected:!0}),xe=(E==null?void 0:E.ctrlKey)||(E==null?void 0:E.metaKey),ge=E==null?void 0:E.shiftKey;let x;D&&xe?(x=g,s.current=h,f.current=x,X.selectedNodes=y(V,x,K)):D&&ge?(x=Array.from(new Set([].concat((0,P.Z)(f.current||[]),(0,P.Z)(se({treeData:V,expandedKeys:k,startKey:h,endKey:s.current,fieldNames:K}))))),X.selectedNodes=y(V,x,K)):(x=[h],s.current=h,f.current=x,X.selectedNodes=y(V,x,K)),(p=e.onSelect)===null||p===void 0||p.call(e,x,X),"selectedKeys"in e||b(x)},{getPrefixCls:N,direction:S}=l.useContext(M.E_),{prefixCls:O,className:A,showIcon:le=!0,expandAction:m="click"}=e,ce=U(e,["prefixCls","className","showIcon","expandAction"]),R=N("tree",O),ie=w()(`${R}-directory`,{[`${R}-directory-rtl`]:S==="rtl"},A);return l.createElement(j,Object.assign({icon:I,ref:i,blockNode:!0},ce,{showIcon:le,expandAction:m,prefixCls:R,className:ie,expandedKeys:k,selectedKeys:B,onSelect:re,onExpand:H}))};var Ee=l.forwardRef(ve);const oe=j;oe.DirectoryTree=Ee,oe.TreeNode=G.OF;var me=oe}}]);
