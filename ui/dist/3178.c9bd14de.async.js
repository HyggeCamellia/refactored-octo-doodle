"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3178,6685],{33867:function(de,W,a){a.d(W,{iK:function(){return L},zc:function(){return G}});var L=function(s){return s[s.SUCCESS=200]="SUCCESS",s[s.ERROR=-1]="ERROR",s[s.TIMEOUT=401]="TIMEOUT",s.TYPE="success",s}({}),R=function(s){return s.GET="GET",s.POST="POST",s.PUT="PUT",s.DELETE="DELETE",s}({}),G=function(s){return s.JSON="application/json;charset=UTF-8",s.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",s.FORM_DATA="multipart/form-data;charset=UTF-8",s}({})},86685:function(de,W,a){a.r(W);var L=a(67294),R=a(47116),G=a.n(R),s=a(78566),q=a.n(s),e=a(85893),M=(0,L.forwardRef)(function(k,x){var P,d=k.data;return(0,e.jsxs)("div",{ref:x,style:{padding:"20px",fontFamily:'"Microsoft YaHei", sans-serif',fontSize:"14px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"15px"},children:[(0,e.jsx)("div",{children:(0,e.jsxs)("h1",{style:{fontSize:"22px",fontWeight:"bold",marginBottom:"8px"},children:["\u79FB\u5E93\u5355\uFF1A",d.movementOrderNo]})}),(0,e.jsx)("div",{children:(0,e.jsx)(q(),{value:d.movementOrderNo,options:{displayValue:!1,width:1,height:50,format:"CODE128"}})})]}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",marginBottom:"20px"},children:[(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u79FB\u5E93\u72B6\u6001\uFF1A"}),d.movementOrderStatus]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u6E90\u4ED3\u5E93\uFF1A"}),d.sourceWarehouseName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u76EE\u6807\u4ED3\u5E93\uFF1A"}),d.targetWarehouseName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u521B\u5EFA\u4EBA\uFF1A"}),d.createBy]}),d.updateBy&&(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u64CD\u4F5C\u4EBA\uFF1A"}),d.updateBy]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u5907\u6CE8\uFF1A"}),d.remark]})]}),(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u603B\u6570\u91CF\uFF1A"}),d.totalQuantity]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u6E90\u5E93\u533A\uFF1A"}),d.sourceAreaName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u76EE\u6807\u5E93\u533A\uFF1A"}),d.targetAreaName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),d.createTime]}),d.updateTime&&(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),d.updateTime]})]})]}),((P=d.table)===null||P===void 0?void 0:P.length)>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",margin:"15px 0",border:"1px solid"},children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"20%"},children:"\u5546\u54C1\u540D\u79F0"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"15%"},children:"\u89C4\u683C"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"10%"},children:"\u6E90\u5E93\u533A"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"10%"},children:"\u76EE\u6807\u5E93\u533A"}),(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"right",width:"10%"},children:"\u6570\u91CF"}),d.table.some(function(m){return m.batchNo})&&(0,e.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left",width:"15%"},children:"\u6279\u53F7"})]})}),(0,e.jsxs)("tbody",{children:[d.table.map(function(m,T){return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.itemName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.skuName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.sourceAreaName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.targetAreaName}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right"},children:m.quantity}),d.table.some(function(j){return j.batchNo})&&(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:m.batchNo||"-"})]},T)}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{colSpan:4,style:{border:"1px solid",padding:"8px",textAlign:"right"},children:"\u5408\u8BA1"}),(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:d.table.reduce(function(m,T){return m+Number(T.quantity)},0)}),d.table.some(function(m){return m.batchNo})&&(0,e.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:"-"})]})]})]}),d.remark&&(0,e.jsx)("div",{style:{marginTop:"15px",padding:"10px",borderTop:"1px dashed"},children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u5907\u6CE8\uFF1A"}),d.remark]})})]}):(0,e.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"\u6682\u65E0\u79FB\u5E93\u660E\u7EC6\u6570\u636E"})]})}),c=function(x){var P=x.data,d=x.onClose,m=x.loading,T=m===void 0?!1:m,j=x.visible,C=(0,L.useRef)(null),U=(0,R.useReactToPrint)({contentRef:C});return(0,L.useEffect)(function(){if(j){var K=setTimeout(function(){U()},100);return function(){return clearTimeout(K)}}},[j,U]),(0,e.jsxs)("div",{children:[(0,e.jsx)("button",{onClick:function(){return U()},children:"\u6253\u5370"}),(0,e.jsx)(M,{ref:C,data:P})]})};W.default=c},63178:function(de,W,a){a.r(W);var L=a(9783),R=a.n(L),G=a(19632),s=a.n(G),q=a(15009),e=a.n(q),M=a(97857),c=a.n(M),k=a(99289),x=a.n(k),P=a(5574),d=a.n(P),m=a(67294),T=a(76772),j=a(77569),C=a(17788),U=a(2453),K=a(66309),re=a(53531),b=a(83622),ne=a(96154),z=a(4393),ee=a(78045),se=a(25278),F=a(34041),D=a(48296),h=a(33160),I=a(24969),l=a(6110),B=a(83688),ae=a(91022),f=a(92982),v=a(27484),$=a.n(v),Be=a(78760),Se=a(86685),n=a(85893),Ne=function(){var le,We=(0,m.useState)([]),Ee=d()(We,2),oe=Ee[0],Le=Ee[1],ue=(0,T.useModel)("wms");ue.getWarehouseList();var Z=ue.warehouseMap;ue.getAreaList();var S=ue.areaMap,Re=j.Z.useForm(),Ue=d()(Re,1),ge=Ue[0],Ke=(0,m.useState)(!1),xe=d()(Ke,2),$e=xe[0],Q=xe[1],Ze=(0,m.useState)([]),je=d()(Ze,2),we=je[0],Oe=je[1],Ye=(0,m.useState)(0),ye=d()(Ye,2),Ve=ye[0],Ge=ye[1],ke=(0,m.useState)([]),Me=d()(ke,2),w=Me[0],te=Me[1],ze=(0,m.useState)({}),Ae=d()(ze,2),Pe=Ae[0],Ce=Ae[1],Qe=(0,m.useState)({editVisible:!1,currentOrder:null}),be=d()(Qe,2),_e=be[0],ie=be[1],He=(0,m.useState)({pageNum:1,pageSize:10,movementOrderNo:void 0,movementOrderStatus:-2,sourceWarehouseId:void 0,sourceAreaId:void 0,targetWarehouseId:void 0,targetAreaId:void 0}),Te=d()(He,2),Y=Te[0],V=Te[1];(0,m.useEffect)(function(){(0,f.pX)("wms_movement_status").then(function(u){var r=Object.values(u);Le(r)}),ce()},[Y.pageNum,Y.pageSize,Y.movementOrderStatus]);var ce=function(){var u=x()(e()().mark(function r(){var t,i;return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return Q(!0),_.prev=1,t=c()({},Y),t.movementOrderStatus===-2&&delete t.movementOrderStatus,_.next=6,(0,B.K)(t);case 6:i=_.sent,Oe(i.rows),Ge(i.total),te([]);case 10:return _.prev=10,Q(!1),_.finish(10);case 13:case"end":return _.stop()}},r,null,[[1,,10,13]])}));return function(){return u.apply(this,arguments)}}(),me=function(){V(function(r){return c()(c()({},r),{},{pageNum:1})}),ce()},Xe=function(){ge.resetFields(),V({pageNum:1,pageSize:10,movementOrderNo:void 0,movementOrderStatus:-2,sourceWarehouseId:void 0,sourceAreaId:void 0,targetWarehouseId:void 0,targetAreaId:void 0})},Je=function(){ie({editVisible:!0,currentOrder:null})},qe=function(){var u=x()(e()().mark(function r(t){return e()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:C.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u79FB\u5E93\u5355\u3010".concat(t.movementOrderNo,"\u3011\u5417\uFF1F"),onOk:function(){var _=x()(e()().mark(function O(){return e()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return Q(!0),p.prev=1,p.next=4,(0,B.w2)(t.id);case 4:U.ZP.success("\u5220\u9664\u6210\u529F"),ce(),p.next=11;break;case 8:p.prev=8,p.t0=p.catch(1),p.t0===409&&C.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u79FB\u5E93\u5355\u3010",t.movementOrderNo,"\u3011\u5DF2\u79FB\u5E93\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,n.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})});case 11:return p.prev=11,Q(!1),p.finish(11);case 14:case"end":return p.stop()}},O,null,[[1,8,11,14]])}));function N(){return _.apply(this,arguments)}return N}()});case 1:case"end":return o.stop()}},r)}));return function(t){return u.apply(this,arguments)}}(),et=function(r){ie({editVisible:!0,currentOrder:r})},tt=function(r){var t=w.indexOf(r.id);t!==-1?te(w.filter(function(i){return i!==r.id})):(te([].concat(s()(w),[r.id])),Fe(r))},Fe=function(){var u=x()(e()().mark(function r(t){var i,o,_;return e()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return Ce(function(g){return c()(c()({},g),{},R()({},t.id,!0))}),O.prev=1,O.next=4,(0,ae.hS)(t.id);case 4:o=O.sent,(i=o.data)!==null&&i!==void 0&&i.length&&(_=o.data.map(function(g){var p,E,H,X;return c()(c()({},g),{},{sourceWarehouseName:(p=Z.get(g.sourceWarehouseId))===null||p===void 0?void 0:p.warehouseName,sourceAreaName:(E=S.get(g.sourceAreaId))===null||E===void 0?void 0:E.areaName,targetWarehouseName:(H=Z.get(g.targetWarehouseId))===null||H===void 0?void 0:H.warehouseName,targetAreaName:(X=S.get(g.targetAreaId))===null||X===void 0?void 0:X.areaName})}),Oe(function(g){return g.map(function(p){return p.id===t.id?c()(c()({},p),{},{details:_}):p})}));case 6:return O.prev=6,Ce(function(g){return c()(c()({},g),{},R()({},t.id,!1))}),O.finish(6);case 9:case"end":return O.stop()}},r,null,[[1,,6,9]])}));return function(t){return u.apply(this,arguments)}}(),rt=function(r){var t;return(t=oe.find(function(i){return i.value==r.movementOrderStatus}))===null||t===void 0?void 0:t.label},nt=(0,m.useState)(null),Ie=d()(nt,2),De=Ie[0],pe=Ie[1],at=function(){var u=x()(e()().mark(function r(t){var i,o,_,N,O,g,p,E,H,X;return e()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return Q(!0),y.prev=1,y.next=4,Promise.all([(0,B.fp)(t.id),(0,ae.hS)(t.id)]);case 4:g=y.sent,p=d()(g,2),E=p[0],H=p[1],X=H.data.map(function(A){var J,he,fe,ve;return{itemName:((J=A.itemSku)===null||J===void 0||(J=J.item)===null||J===void 0?void 0:J.itemName)||"-",skuName:((he=A.itemSku)===null||he===void 0?void 0:he.skuName)||"-",sourceAreaName:((fe=S.get(A.sourceAreaId))===null||fe===void 0?void 0:fe.areaName)||"-",targetAreaName:((ve=S.get(A.targetAreaId))===null||ve===void 0?void 0:ve.areaName)||"-",quantity:Number(A.quantity).toFixed(0),batchNo:A.batchNo||void 0,productionDate:A.productionDate?$()(A.productionDate).format("YYYY-MM-DD"):void 0,expirationDate:A.expirationDate?$()(A.expirationDate).format("YYYY-MM-DD"):void 0}}),pe({movementOrderNo:E.data.movementOrderNo,sourceWarehouseName:((i=Z.get(E.data.sourceWarehouseId))===null||i===void 0?void 0:i.warehouseName)||"-",sourceAreaName:((o=S.get(E.data.sourceAreaId))===null||o===void 0?void 0:o.areaName)||"-",targetWarehouseName:((_=Z.get(E.data.targetWarehouseId))===null||_===void 0?void 0:_.warehouseName)||"-",targetAreaName:((N=S.get(E.data.targetAreaId))===null||N===void 0?void 0:N.areaName)||"-",movementOrderStatus:(O=oe.find(function(A){return A.value==E.data.movementOrderStatus}))===null||O===void 0?void 0:O.label,totalQuantity:Number(E.data.totalQuantity).toFixed(0),createBy:E.data.createBy,createTime:$()(E.data.createTime).format("YYYY-MM-DD HH:mm"),updateBy:E.data.updateBy,updateTime:E.data.updateTime?$()(E.data.updateTime).format("YYYY-MM-DD HH:mm"):void 0,remark:E.data.remark,table:X}),y.next=16;break;case 12:y.prev=12,y.t0=y.catch(1),U.ZP.error("\u83B7\u53D6\u6253\u5370\u6570\u636E\u5931\u8D25"),console.error("Print error:",y.t0);case 16:return y.prev=16,Q(!1),y.finish(16);case 19:case"end":return y.stop()}},r,null,[[1,12,16,19]])}));return function(t){return u.apply(this,arguments)}}(),ut=[{title:"\u5355\u53F7",dataIndex:"movementOrderNo",align:"left",width:120},{title:"\u6E90\u4ED3\u5E93/\u6E90\u5E93\u533A",align:"left",width:260,render:function(r,t){var i,o;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u6E90\u4ED3\u5E93\uFF1A",(i=Z.get(t.sourceWarehouseId))===null||i===void 0?void 0:i.warehouseName]}),t.sourceAreaId&&(0,n.jsxs)("div",{children:["\u6E90\u5E93\u533A\uFF1A",(o=S.get(t.sourceAreaId))===null||o===void 0?void 0:o.areaName]})]})}},{title:"\u76EE\u6807\u4ED3\u5E93/\u76EE\u6807\u5E93\u533A",align:"left",width:260,render:function(r,t){var i,o;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u76EE\u6807\u4ED3\u5E93\uFF1A",(i=Z.get(t.targetWarehouseId))===null||i===void 0?void 0:i.warehouseName]}),t.targetAreaId&&(0,n.jsxs)("div",{children:["\u76EE\u6807\u5E93\u533A\uFF1A",(o=S.get(t.targetAreaId))===null||o===void 0?void 0:o.areaName]})]})}},{title:"\u79FB\u5E93\u72B6\u6001",dataIndex:"movementOrderStatus",align:"center",width:120,render:function(r,t){return(0,n.jsx)(K.Z,{color:t.movementOrderStatus==0?"blue":t.movementOrderStatus==1?"green":"red",children:rt(t)})}},{title:"\u6570\u91CF",align:"left",render:function(r,t){return(0,n.jsxs)("div",{className:"flex-space-between",children:[(0,n.jsx)("span",{children:"\u6570\u91CF\uFF1A"}),(0,n.jsx)(re.Z,{value:Number(t.totalQuantity),precision:0})]})}},{title:"\u521B\u5EFA/\u64CD\u4F5C",align:"left",render:function(r,t){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",t.createBy]}),t.updateBy&&(0,n.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",t.updateBy]})]})}},{title:"\u521B\u5EFA\u65F6\u95F4/\u64CD\u4F5C\u65F6\u95F4",align:"left",width:200,render:function(r,t){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",$()(t.createTime).format("MM-DD HH:mm")]}),(0,n.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",$()(t.updateTime).format("MM-DD HH:mm")]})]})}},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u64CD\u4F5C",align:"center",width:160,render:function(r,t){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(b.ZP,{type:"link",onClick:function(){return et(t)},disabled:[-1,1].includes(t.movementOrderStatus),children:"\u4FEE\u6539"}),(0,n.jsx)(b.ZP,{type:"link",onClick:function(){return tt(t)},children:w.includes(t.id)?"\u6536\u8D77":"\u67E5\u770B"})]}),(0,n.jsxs)("div",{style:{marginTop:5},children:[(0,n.jsx)(b.ZP,{type:"link",danger:!0,onClick:function(){return qe(t)},disabled:t.movementOrderStatus===1,children:"\u5220\u9664"}),(0,n.jsx)(b.ZP,{type:"link",onClick:function(){return at(t)},children:"\u6253\u5370"})]})]})}}],it=function(r){return Pe[r.id]?(0,n.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"\u52A0\u8F7D\u4E2D..."}):(0,n.jsxs)("div",{style:{padding:"0 50px 20px 50px"},children:[(0,n.jsx)("h3",{children:"\u5546\u54C1\u660E\u7EC6"}),(0,n.jsx)(ne.Z,{dataSource:r.details||[],loading:Pe[r.id],rowKey:"id",pagination:!1,columns:[{title:"\u5546\u54C1\u540D\u79F0",dataIndex:["itemSku","item","itemName"],render:function(i,o){var _;return o==null||(_=o.itemSku)===null||_===void 0||(_=_.item)===null||_===void 0?void 0:_.itemName}},{title:"\u89C4\u683C\u540D\u79F0",dataIndex:["itemSku","skuName"],render:function(i,o){var _;return o==null||(_=o.itemSku)===null||_===void 0?void 0:_.skuName}},{title:"\u6E90\u5E93\u533A",dataIndex:"sourceAreaName"},{title:"\u76EE\u6807\u5E93\u533A",dataIndex:"targetAreaName"},{title:"\u6570\u91CF",dataIndex:"quantity",align:"right",render:function(i){return(0,n.jsx)(re.Z,{value:Number(i),precision:0})}},{title:"\u6279\u53F7",dataIndex:"batchNo"},{title:"\u751F\u4EA7\u65E5\u671F",dataIndex:"productionDate",render:function(i){return i?$()(i).format("YYYY-MM-DD"):"-"}},{title:"\u8FC7\u671F\u65E5\u671F",dataIndex:"expirationDate",render:function(i){return i?$()(i).format("YYYY-MM-DD"):"-"}}]})]})};return(0,n.jsxs)(l._z,{children:[(0,n.jsx)(z.Z,{children:(0,n.jsxs)(j.Z,{form:ge,layout:"inline",labelAlign:"left",style:{display:"flex",flexWrap:"nowrap",gap:16},children:[(0,n.jsx)(j.Z.Item,{label:"\u79FB\u5E93\u72B6\u6001",name:"movementOrderStatus",initialValue:-2,style:{marginBottom:0,flex:1},children:(0,n.jsxs)(ee.ZP.Group,{onChange:function(r){V(function(t){return c()(c()({},t),{},{movementOrderStatus:r.target.value})}),me()},style:{whiteSpace:"nowrap"},children:[(0,n.jsx)(ee.ZP.Button,{value:-2,children:"\u5168\u90E8"}),oe.map(function(u){return(0,n.jsx)(ee.ZP.Button,{value:u.value,children:u.label},u.value)})]})}),(0,n.jsx)(j.Z.Item,{label:"\u79FB\u5E93\u5355\u53F7",name:"movementOrderNo",style:{marginBottom:0,flex:1},children:(0,n.jsx)(se.Z,{placeholder:"\u8BF7\u8F93\u5165\u79FB\u5E93\u5355\u53F7",allowClear:!0,onPressEnter:me,style:{minWidth:180},value:Y.movementOrderNo,onChange:function(r){return V(function(t){return c()(c()({},t),{},{movementOrderNo:r.target.value})})}})}),(0,n.jsx)(j.Z.Item,{label:"\u6E90\u4ED3\u5E93\u5E93\u533A",name:"sourcePlace",style:{marginBottom:0,flex:1},children:(0,n.jsx)(F.Z,{placeholder:"\u8BF7\u9009\u62E9\u6E90\u4ED3\u5E93\u5E93\u533A",style:{width:"100%"},onChange:function(r){var t=(r==null?void 0:r.split("_"))||[],i=d()(t,2),o=i[0],_=i[1];V(function(N){return c()(c()({},N),{},{sourceWarehouseId:o,sourceAreaId:_})})},children:Array.from(Z.values()).map(function(u){return(0,n.jsx)(F.Z.OptGroup,{label:u.warehouseName,children:Array.from(S.values()).filter(function(r){return r.warehouseId===u.id}).map(function(r){return(0,n.jsx)(F.Z.Option,{value:"".concat(u.id,"_").concat(r.id),children:r.areaName},"".concat(u.id,"_").concat(r.id))})},u.id)})})}),(0,n.jsx)(j.Z.Item,{label:"\u76EE\u6807\u4ED3\u5E93\u5E93\u533A",name:"targetPlace",style:{marginBottom:0,flex:1},children:(0,n.jsx)(F.Z,{placeholder:"\u8BF7\u9009\u62E9\u76EE\u6807\u4ED3\u5E93\u5E93\u533A",style:{width:"100%"},onChange:function(r){var t=(r==null?void 0:r.split("_"))||[],i=d()(t,2),o=i[0],_=i[1];V(function(N){return c()(c()({},N),{},{targetWarehouseId:o,targetAreaId:_})})},children:Array.from(Z.values()).map(function(u){return(0,n.jsx)(F.Z.OptGroup,{label:u.warehouseName,children:Array.from(S.values()).filter(function(r){return r.warehouseId===u.id}).map(function(r){return(0,n.jsx)(F.Z.Option,{value:"".concat(u.id,"_").concat(r.id),children:r.areaName},"".concat(u.id,"_").concat(r.id))})},u.id)})})}),(0,n.jsxs)(j.Z.Item,{style:{marginBottom:0},children:[(0,n.jsx)(b.ZP,{type:"primary",icon:(0,n.jsx)(D.Z,{}),onClick:me,children:"\u641C\u7D22"}),(0,n.jsx)(b.ZP,{icon:(0,n.jsx)(h.Z,{}),onClick:Xe,style:{marginLeft:8},children:"\u91CD\u7F6E"})]})]})}),(0,n.jsxs)(z.Z,{style:{marginTop:20},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,n.jsx)("span",{style:{fontSize:"large"},children:"\u79FB\u5E93\u5355"}),(0,n.jsx)(b.ZP,{type:"primary",icon:(0,n.jsx)(I.Z,{}),onClick:Je,children:"\u65B0\u589E"})]}),(0,n.jsx)(ne.Z,{loading:$e,dataSource:we,columns:ut,rowKey:"id",expandable:{expandedRowRender:it,expandedRowKeys:w,onExpand:function(r,t){var i=w.indexOf(t.id);i!==-1?te(w.filter(function(o){return o!==t.id})):(te([].concat(s()(w),[t.id])),t.details||Fe(t))}},pagination:{current:Y.pageNum,pageSize:Y.pageSize,total:Ve,onChange:function(r,t){V(function(i){return c()(c()({},i),{},{pageNum:r,pageSize:t})})}},size:"small"})]}),(0,n.jsx)(C.Z,{title:_e.currentOrder?"\u4FEE\u6539\u79FB\u5E93\u5355":"\u65B0\u589E\u79FB\u5E93\u5355",open:_e.editVisible,onCancel:function(){return ie(function(r){return c()(c()({},r),{},{editVisible:!1})})},footer:null,width:"80%",destroyOnClose:!0,children:(0,n.jsx)(Be.default,{id:(le=_e.currentOrder)===null||le===void 0?void 0:le.id,onCancel:function(){return ie(function(r){return c()(c()({},r),{},{editVisible:!1})})}})}),(0,n.jsx)(C.Z,{open:!!De,onCancel:function(){return pe(null)},footer:null,width:800,children:De&&(0,n.jsx)(Se.default,{data:De,onClose:function(){return pe(null)},visible:!1})})]})};W.default=Ne},92982:function(de,W,a){a.d(W,{Hr:function(){return j},QK:function(){return se},Vd:function(){return d},a7:function(){return re},jK:function(){return x},n2:function(){return ee},oH:function(){return U},pX:function(){return m},sF:function(){return ne}});var L=a(97857),R=a.n(L),G=a(15009),s=a.n(G),q=a(99289),e=a.n(q),M=a(76772),c=a(33867),k=a(30964);function x(D){return P.apply(this,arguments)}function P(){return P=e()(s()().mark(function D(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,M.request)("/api/system/dict/type/list",{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:h}));case 1:case"end":return l.stop()}},D)})),P.apply(this,arguments)}function d(D){return(0,M.request)("/api/system/dict/type/".concat(D),{method:"GET"})}function m(D,h){return T.apply(this,arguments)}function T(){return T=e()(s()().mark(function D(h,I){var l,B;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("getDictValueEnum resp:",h),f.next=3,(0,M.request)("/api/system/dict/data/type/".concat(h),{method:"GET"});case 3:if(l=f.sent,console.log("getDictValueEnum resp:",h,l),l.code!==c.iK.SUCCESS){f.next=11;break}return B={},l.data.forEach(function(v){B[v.dictValue]={text:v.dictLabel,label:v.dictLabel,value:I?Number(v.dictValue):v.dictValue,key:v.dictCode,listClass:v.listClass,status:v.listClass}}),f.abrupt("return",B);case 11:return f.abrupt("return",{});case 12:case"end":return f.stop()}},D)})),T.apply(this,arguments)}function j(D,h){return C.apply(this,arguments)}function C(){return C=e()(s()().mark(function D(h,I){var l,B;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,M.request)("/api/system/dict/data/type/".concat(h),{method:"GET"});case 2:if(l=f.sent,l.code!==200){f.next=6;break}return B=l.data.map(function(v){return{text:v.dictLabel,label:v.dictLabel,value:I?Number(v.dictValue):v.dictValue,key:v.dictCode,listClass:v.listClass,status:v.listClass}}),f.abrupt("return",B);case 6:return f.abrupt("return",[]);case 7:case"end":return f.stop()}},D)})),C.apply(this,arguments)}function U(D){return K.apply(this,arguments)}function K(){return K=e()(s()().mark(function D(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,M.request)("/api/system/dict/type",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:h}));case 1:case"end":return l.stop()}},D)})),K.apply(this,arguments)}function re(D){return b.apply(this,arguments)}function b(){return b=e()(s()().mark(function D(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,M.request)("/api/system/dict/type",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:h}));case 1:case"end":return l.stop()}},D)})),b.apply(this,arguments)}function ne(D){return z.apply(this,arguments)}function z(){return z=e()(s()().mark(function D(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,M.request)("/api/system/dict/type/".concat(h),{method:"DELETE"}));case 1:case"end":return l.stop()}},D)})),z.apply(this,arguments)}function ee(D){return(0,k.su)("/api/system/dict/type/export",{params:D},"dict_type_".concat(new Date().getTime(),".xlsx"))}function se(D){return F.apply(this,arguments)}function F(){return F=e()(s()().mark(function D(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,M.request)("/api/system/dict/type/optionselect",{params:R()({},h),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return l.stop()}},D)})),F.apply(this,arguments)}}}]);
