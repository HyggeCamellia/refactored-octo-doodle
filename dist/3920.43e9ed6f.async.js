"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3920,4302,683,2087],{64317:function(x,W,e){var F=e(1413),n=e(91),L=e(22270),O=e(67294),Z=e(66758),M=e(45502),a=e(85893),y=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],r=function(v,j){var t=v.fieldProps,l=v.children,s=v.params,c=v.proFieldProps,_=v.mode,E=v.valueEnum,B=v.request,I=v.showSearch,P=v.options,p=(0,n.Z)(v,y),b=(0,O.useContext)(Z.Z);return(0,a.jsx)(M.Z,(0,F.Z)((0,F.Z)({valueEnum:(0,L.h)(E),request:B,params:s,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:P,mode:_,showSearch:I,getPopupContainer:b.getPopupContainer},t),ref:j,proFieldProps:c},p),{},{children:l}))},K=O.forwardRef(function(i,v){var j=i.fieldProps,t=i.children,l=i.params,s=i.proFieldProps,c=i.mode,_=i.valueEnum,E=i.request,B=i.options,I=(0,n.Z)(i,u),P=(0,F.Z)({options:B,mode:c||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},j),p=(0,O.useContext)(Z.Z);return(0,a.jsx)(M.Z,(0,F.Z)((0,F.Z)({valueEnum:(0,L.h)(_),request:E,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({getPopupContainer:p.getPopupContainer},P),ref:v,proFieldProps:s},I),{},{children:t}))}),R=O.forwardRef(r),C=K,U=R;U.SearchSelect=C,U.displayName="ProFormComponent",W.Z=U},5966:function(x,W,e){var F=e(97685),n=e(1413),L=e(91),O=e(21770),Z=e(77569),M=e(55241),a=e(98423),y=e(67294),u=e(45502),r=e(85893),K=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],C="text",U=function(l){var s=l.fieldProps,c=l.proFieldProps,_=(0,L.Z)(l,K);return(0,r.jsx)(u.Z,(0,n.Z)({valueType:C,fieldProps:s,filedConfig:{valueType:C},proFieldProps:c},_))},i=function(l){var s=(0,O.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),c=(0,F.Z)(s,2),_=c[0],E=c[1];return(0,r.jsx)(Z.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(I){var P,p=I.getFieldValue(l.name||[]);return(0,r.jsx)(M.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(T){return T&&T.parentNode?T.parentNode:T},onOpenChange:function(T){return E(T)},content:(0,r.jsxs)("div",{style:{padding:"4px 0"},children:[(P=l.statusRender)===null||P===void 0?void 0:P.call(l,p),l.strengthText?(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:_,children:l.children}))}})},v=function(l){var s=l.fieldProps,c=l.proFieldProps,_=(0,L.Z)(l,R),E=(0,y.useState)(!1),B=(0,F.Z)(E,2),I=B[0],P=B[1];return s!=null&&s.statusRender&&_.name?(0,r.jsx)(i,{name:_.name,statusRender:s==null?void 0:s.statusRender,popoverProps:s==null?void 0:s.popoverProps,strengthText:s==null?void 0:s.strengthText,open:I,onOpenChange:P,children:(0,r.jsx)("div",{children:(0,r.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,a.Z)(s,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(b){var T;s==null||(T=s.onBlur)===null||T===void 0||T.call(s,b),P(!1)},onClick:function(b){var T;s==null||(T=s.onClick)===null||T===void 0||T.call(s,b),P(!0)}}),proFieldProps:c,filedConfig:{valueType:C}},_))})}):(0,r.jsx)(u.Z,(0,n.Z)({valueType:"password",fieldProps:s,proFieldProps:c,filedConfig:{valueType:C}},_))},j=U;j.Password=v,j.displayName="ProFormComponent",W.Z=j},64302:function(x,W,e){e.r(W);var F=e(67294),n=e(83622),L=e(65385),O=e(86548),Z=e(48689),M=e(24969),a=e(85893),y=function(r){var K=r.areaList,R=r.onAdd,C=r.onUpdate,U=r.onDelete,i=r.loading,v=r.hasAddPerm,j=v===void 0?!0:v,t=r.hasEditPerm,l=t===void 0?!0:t,s=r.hasDeletePerm,c=s===void 0?!0:s,_=[{title:"\u540D\u79F0",dataIndex:"areaName",valueType:"text",onHeaderCell:function(){return{style:{backgroundColor:"#e6f7ff"}}}},{title:"\u7F16\u53F7",dataIndex:"areaCode",valueType:"text"},{title:"\u5907\u6CE8",dataIndex:"remark",valueType:"text"},{title:"\u64CD\u4F5C",dataIndex:"option",width:"180px",valueType:"option",render:function(B,I){return[(0,a.jsx)(n.ZP,{type:"link",size:"small",hidden:!l,onClick:function(){return C(I)},icon:(0,a.jsx)(O.Z,{}),children:"\u4FEE\u6539"},"edit"),(0,a.jsx)(n.ZP,{type:"link",size:"small",danger:!0,hidden:!c,onClick:function(){return U(I)},icon:(0,a.jsx)(Z.Z,{}),children:"\u5220\u9664"},"delete")]}}];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",backgroundColor:"lightgrey"},children:[(0,a.jsx)("span",{style:{fontSize:"14px"},children:"\u5E93\u533A\u5217\u8868"}),(0,a.jsx)(n.ZP,{type:"primary",size:"small",icon:(0,a.jsx)(M.Z,{}),hidden:!j,onClick:R,children:"\u65B0\u589E\u5E93\u533A"})]}),(0,a.jsx)(L.Z,{dataSource:K,columns:_,rowKey:"id",search:!1,options:!1,pagination:!1,loading:i})]})};W.default=y},60683:function(x,W,e){e.r(W);var F=e(15009),n=e.n(F),L=e(99289),O=e.n(L),Z=e(67294),M=e(17788),a=e(83622),y=e(97269),u=e(5966),r=e(85893),K=function(C){var U=C.visible,i=C.onClose,v=C.onSubmit,j=C.values;return(0,r.jsx)(M.Z,{title:j!=null&&j.id?"\u4FEE\u6539\u4ED3\u5E93":"\u6DFB\u52A0\u4ED3\u5E93",open:U,onCancel:i,footer:null,width:500,destroyOnClose:!0,children:(0,r.jsxs)(y.A,{initialValues:j||{},onFinish:function(){var t=O()(n()().mark(function l(s){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,v(s);case 2:case"end":return _.stop()}},l)}));return function(l){return t.apply(this,arguments)}}(),submitter:{render:function(l,s){return[(0,r.jsx)(a.ZP,{onClick:i,children:"\u53D6\u6D88"},"cancel"),(0,r.jsx)(a.ZP,{type:"primary",onClick:function(){var _,E;return(_=l.form)===null||_===void 0||(E=_.submit)===null||E===void 0?void 0:E.call(_)},children:"\u786E\u5B9A"},"submit")]}},children:[(0,r.jsx)(u.Z,{name:"id",label:"ID",hidden:!0,disabled:!0}),(0,r.jsx)(u.Z,{name:"warehouseName",label:"\u540D\u79F0",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,r.jsx)(u.Z,{name:"warehouseCode",label:"\u7F16\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7"}),(0,r.jsx)(u.Z,{name:"remark",label:"\u5907\u6CE8",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})]})})};W.default=K},25789:function(x,W,e){e.r(W);var F=e(67294),n=e(83622),L=e(20863),O=e(48689),Z=e(86548),M=e(24969),a=e(85893),y=function(r){var K=r.warehouseList,R=r.selectedWarehouseId,C=r.onSelect,U=r.onAdd,i=r.onUpdate,v=r.onDelete,j=r.onDrop,t=r.loading,l=r.hasAddPerm,s=l===void 0?!0:l,c=r.hasEditPerm,_=c===void 0?!0:c,E=r.hasDeletePerm,B=E===void 0?!0:E,I=function(p){return(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,a.jsxs)("span",{children:[p.warehouseName,p.warehouseCode&&" (\u7F16\u53F7\uFF1A".concat(p.warehouseCode,")")]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(n.ZP,{type:"link",size:"small",danger:!0,hidden:!B,onClick:function(T){T.stopPropagation(),v(p)},icon:(0,a.jsx)(O.Z,{}),children:"\u5220\u9664"}),(0,a.jsx)(n.ZP,{type:"link",size:"small",hidden:!_,onClick:function(T){T.stopPropagation(),i(p)},icon:(0,a.jsx)(Z.Z,{}),children:"\u4FEE\u6539"})]})]})};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",backgroundColor:"lightgrey"},children:[(0,a.jsx)("span",{style:{fontSize:"14px"},children:"\u4ED3\u5E93\u5217\u8868"}),(0,a.jsx)(n.ZP,{type:"primary",size:"small",icon:(0,a.jsx)(M.Z,{}),hidden:!s,onClick:U,children:"\u65B0\u589E\u4ED3\u5E93"})]}),(0,a.jsx)(L.Z,{treeData:K,fieldNames:{key:"id",title:"warehouseName"},selectedKeys:[R],onSelect:function(p){p.length>0&&C(p[0])},draggable:!0,blockNode:!0,titleRender:I,onDrop:j})]})};W.default=y},2087:function(x,W,e){e.r(W);var F=e(15009),n=e.n(F),L=e(99289),O=e.n(L),Z=e(5574),M=e.n(Z),a=e(67294),y=e(97269),u=e(5966),r=e(64317),K=e(77569),R=e(85265),C=e(83622),U=e(94605),i=e(85893),v=function(t){var l=K.Z.useForm(),s=M()(l,1),c=s[0];(0,a.useEffect)(function(){c.resetFields(),c.setFieldsValue({id:t.values.id,areaCode:t.values.areaCode,areaName:t.values.areaName,warehouseId:t.values.warehouseId,remark:t.values.remark})},[c,t]);var _=function(){var E=O()(n()().mark(function B(I){return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:t.onSubmit(I);case 1:case"end":return p.stop()}},B)}));return function(I){return E.apply(this,arguments)}}();return(0,i.jsx)(R.Z,{width:600,title:t.values.id?"\u4FEE\u6539\u5E93\u533A":"\u6DFB\u52A0\u5E93\u533A",open:t.visible,onClose:t.onClose,destroyOnClose:!0,footer:(0,i.jsxs)("div",{style:{textAlign:"right"},children:[(0,i.jsx)(C.ZP,{onClick:t.onClose,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,i.jsx)(C.ZP,{type:"primary",onClick:function(){return c.submit()},children:"\u786E\u5B9A"})]}),children:(0,i.jsxs)(y.A,{form:c,submitter:!1,layout:"horizontal",onFinish:_,children:[(0,i.jsx)(u.Z,{name:"id",label:"ID",hidden:!0,disabled:!0}),(0,i.jsx)(u.Z,{name:"areaName",label:"\u540D\u79F0",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,i.jsx)(r.Z,{name:"warehouseId",label:"\u6240\u5C5E\u4ED3\u5E93",width:"xl",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4ED3\u5E93",rules:[{required:!0,message:"\u6240\u5C5E\u4ED3\u5E93\u4E0D\u80FD\u4E3A\u7A7A"}],request:O()(n()().mark(function E(){var B;return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,U.d8)();case 2:return B=P.sent,P.abrupt("return",B.rows.map(function(p){return{label:p.warehouseName,value:p.id}}));case 4:case"end":return P.stop()}},E)}))}),(0,i.jsx)(u.Z,{name:"areaCode",label:"\u7F16\u53F7",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u7F16\u53F7"}),(0,i.jsx)(u.Z,{name:"remark",label:"\u5907\u6CE8",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})]})})};W.default=v},73920:function(x,W,e){e.r(W);var F=e(15009),n=e.n(F),L=e(99289),O=e.n(L),Z=e(5574),M=e.n(Z),a=e(67294),y=e(76772),u=e(2453),r=e(17788),K=e(6110),R=e(94605),C=e(54758),U=e(2087),i=e(25789),v=e(60683),j=e(64302),t=e(85893),l=function(){var c=(0,a.useState)([]),_=M()(c,2),E=_[0],B=_[1],I=(0,a.useState)([]),P=M()(I,2),p=P[0],b=P[1],T=(0,a.useState)(""),k=M()(T,2),w=k[0],H=k[1],ae=(0,a.useState)(!1),J=M()(ae,2),ne=J[0],$=J[1],se=(0,a.useState)(!1),X=M()(se,2),te=X[0],N=X[1],ue=(0,a.useState)(),Q=M()(ue,2),le=Q[0],Y=Q[1],oe=(0,a.useState)(),q=M()(oe,2),de=q[0],ee=q[1],ie=(0,a.useState)(!1),re=M()(ie,2),_e=re[0],z=re[1],S=(0,y.useAccess)();(0,a.useEffect)(function(){V()},[]),(0,a.useEffect)(function(){if(E.length>0&&!w){var A=E[0].id;H(A),G(A)}},[E]);var V=function(){var A=O()(n()().mark(function h(){var D;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return z(!0),m.prev=1,m.next=4,(0,R.M_)({pageSize:String(100)});case 4:D=m.sent,B(D.rows),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(1),u.ZP.error("\u83B7\u53D6\u4ED3\u5E93\u5217\u8868\u5931\u8D25");case 11:return m.prev=11,z(!1),m.finish(11);case 14:case"end":return m.stop()}},h,null,[[1,8,11,14]])}));return function(){return A.apply(this,arguments)}}(),G=function(){var A=O()(n()().mark(function h(D){var g;return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return z(!0),f.prev=1,f.next=4,(0,C.Xp)({warehouseId:D,pageSize:String(100)});case 4:g=f.sent,b(g.rows),f.next=11;break;case 8:f.prev=8,f.t0=f.catch(1),u.ZP.error("\u83B7\u53D6\u5E93\u533A\u5217\u8868\u5931\u8D25");case 11:return f.prev=11,z(!1),f.finish(11);case 14:case"end":return f.stop()}},h,null,[[1,8,11,14]])}));return function(D){return A.apply(this,arguments)}}(),De=function(h){H(h),G(h)},me=function(){Y(void 0),$(!0)},he=function(h){Y(h),$(!0)},ce=function(h){r.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u4ED3\u5E93\u3010".concat(h.warehouseName,"\u3011\u5417\uFF1F"),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var D=O()(n()().mark(function m(){var f;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return f=u.ZP.loading("\u6B63\u5728\u5220\u9664"),d.prev=1,d.next=4,(0,R.eu)(h.id);case 4:return f(),u.ZP.success("\u5220\u9664\u6210\u529F"),d.next=8,V();case 8:d.next=14;break;case 10:d.prev=10,d.t0=d.catch(1),f(),d.t0===409?r.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u4ED3\u5E93\u3010",h.warehouseName,"\u3011\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,t.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})}):u.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 14:case"end":return d.stop()}},m,null,[[1,10]])}));function g(){return D.apply(this,arguments)}return g}()})},Ee=function(){ee({warehouseId:w}),N(!0)},Pe=function(h){ee(h),N(!0)},ve=function(h){r.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u5E93\u533A\u3010".concat(h.areaName,"\u3011\u5417\uFF1F"),okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var D=O()(n()().mark(function m(){var f;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return f=u.ZP.loading("\u6B63\u5728\u5220\u9664"),d.prev=1,d.next=4,(0,C.kg)(h.id);case 4:f(),u.ZP.success("\u5220\u9664\u6210\u529F"),G(w),d.next=13;break;case 9:d.prev=9,d.t0=d.catch(1),f(),d.t0===409?r.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["\u5E93\u533A\u3010",h.areaName,"\u3011\u5DF2\u6709\u4E1A\u52A1\u6570\u636E\u5173\u8054\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,t.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})}):u.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 13:case"end":return d.stop()}},m,null,[[1,9]])}));function g(){return D.apply(this,arguments)}return g}()})},pe=function(){var A=O()(n()().mark(function h(D){var g,m;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(g=u.ZP.loading(D.id?"\u6B63\u5728\u66F4\u65B0":"\u6B63\u5728\u6DFB\u52A0"),o.prev=1,!D.id){o.next=8;break}return o.next=5,(0,R.qL)(D);case 5:m=o.sent,o.next=11;break;case 8:return o.next=10,(0,R.KF)(D);case 10:m=o.sent;case 11:if(g(),m.code!==200){o.next=19;break}return u.ZP.success(D.id?"\u66F4\u65B0\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),$(!1),o.next=17,V();case 17:o.next=20;break;case 19:u.ZP.error(m.msg);case 20:o.next=26;break;case 22:o.prev=22,o.t0=o.catch(1),g(),u.ZP.error(D.id?"\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01":"\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01");case 26:case"end":return o.stop()}},h,null,[[1,22]])}));return function(D){return A.apply(this,arguments)}}(),fe=function(){var A=O()(n()().mark(function h(D){var g,m;return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(g=u.ZP.loading(D.id?"\u6B63\u5728\u66F4\u65B0":"\u6B63\u5728\u6DFB\u52A0"),o.prev=1,!D.id){o.next=8;break}return o.next=5,(0,C.wm)(D);case 5:m=o.sent,o.next=11;break;case 8:return o.next=10,(0,C.Se)(D);case 10:m=o.sent;case 11:g(),m.code===200?(u.ZP.success(D.id?"\u66F4\u65B0\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),N(!1),G(w)):u.ZP.error(m.msg),o.next=19;break;case 15:o.prev=15,o.t0=o.catch(1),g(),u.ZP.error(D.id?"\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01":"\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01");case 19:case"end":return o.stop()}},h,null,[[1,15]])}));return function(D){return A.apply(this,arguments)}}(),Oe=function(){var A=O()(n()().mark(function h(D){var g,m,f;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(g=D.dragNode,m=D.dropNode,f=D.dropPosition,!(g.level===m.level&&f!==0)){d.next=12;break}return d.prev=2,d.next=5,(0,R.JU)(g.parent.data);case 5:u.ZP.success("\u6392\u5E8F\u66F4\u65B0\u6210\u529F"),V(),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(2),u.ZP.error("\u6392\u5E8F\u66F4\u65B0\u5931\u8D25");case 12:case"end":return d.stop()}},h,null,[[2,9]])}));return function(D){return A.apply(this,arguments)}}();return(0,t.jsxs)(K._z,{loading:_e,children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,t.jsx)("div",{style:{width:"450px"},children:(0,t.jsx)(i.default,{warehouseList:E,selectedWarehouseId:w,onSelect:De,onAdd:me,onUpdate:he,onDelete:ce,onDrop:Oe,hasAddPerm:S.hasPerms("wms:warehouse:add"),hasEditPerm:S.hasPerms("wms:warehouse:edit"),hasDeletePerm:S.hasPerms("wms:warehouse:remove")})}),(0,t.jsx)("div",{style:{flex:1},children:(0,t.jsx)(j.default,{areaList:p,onAdd:Ee,onUpdate:Pe,onDelete:ve,hasAddPerm:S.hasPerms("wms:area:add"),hasEditPerm:S.hasPerms("wms:area:edit"),hasDeletePerm:S.hasPerms("wms:area:remove")})})]}),(0,t.jsx)(v.default,{visible:ne,onClose:function(){return $(!1)},onSubmit:pe,values:le||{}}),(0,t.jsx)(U.default,{onSubmit:fe,onClose:function(){return N(!1)},visible:te,values:de||{}})]})};W.default=l}}]);
