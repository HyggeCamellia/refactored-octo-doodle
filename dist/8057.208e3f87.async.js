"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8057],{8057:function(z,R,r){r.r(R);var j=r(97857),D=r.n(j),w=r(15009),u=r.n(w),C=r(99289),c=r.n(C),I=r(5574),p=r.n(I),m=r(67294),B=r(76772),f=r(2453),h=r(83622),A=r(17788),g=r(85265),W=r(24969),M=r(23430),L=r(65385),O=r(41649),e=r(85893),o=(0,m.forwardRef)(function(v,t){var H=v.open,J=v.checkOrderNo,V=v.onCancel,X=(0,m.useState)(),U=p()(X,2),K=U[0],Y=U[1],y=(0,m.useRef)(),q=(0,m.useState)([]),S=p()(q,2),k=S[0],Z=S[1],ee=(0,m.useState)(),$=p()(ee,2),le=$[0],x=$[1],re=(0,m.useState)(!1),G=p()(re,2),te=G[0],N=G[1],T=(0,B.useAccess)(),ne=(0,B.useModel)("wms"),ae=ne.areaMap;(0,m.useImperativeHandle)(t,function(){return{setCheckOrderId:Y,handleQuery:function(){var s;(s=y.current)===null||s===void 0||s.reload()}}});var Q=function(){var d=c()(u()().mark(function s(n){var a,l;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=f.ZP.loading("\u6B63\u5728\u5220\u9664"),n){i.next=3;break}return i.abrupt("return",!0);case 3:return i.prev=3,i.next=6,(0,O.mQ)(n.map(function(P){return P.id}).join(","));case 6:return l=i.sent,a(),l.code===200?f.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):f.ZP.error(l.msg),i.abrupt("return",!0);case 12:return i.prev=12,i.t0=i.catch(3),a(),f.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),i.abrupt("return",!1);case 17:case"end":return i.stop()}},s,null,[[3,12]])}));return function(n){return d.apply(this,arguments)}}(),ue=function(){var d=c()(u()().mark(function s(){var n;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=f.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),l.prev=1,l.next=4,(0,O.kW)({checkOrderId:K});case 4:return n(),f.ZP.success("\u5BFC\u51FA\u6210\u529F"),l.abrupt("return",!0);case 9:return l.prev=9,l.t0=l.catch(1),n(),f.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),l.abrupt("return",!1);case 14:case"end":return l.stop()}},s,null,[[1,9]])}));return function(){return d.apply(this,arguments)}}(),se=[{title:"\u5546\u54C1\u540D\u79F0",dataIndex:["itemSku","item","itemName"],valueType:"text"},{title:"\u89C4\u683C\u540D\u79F0",dataIndex:["itemSku","skuName"],valueType:"text"},{title:"\u5E93\u533A",dataIndex:"areaName",valueType:"text",render:function(s,n){var a;return(a=ae.get(n.areaId))===null||a===void 0?void 0:a.areaName}},{title:"\u6279\u53F7",dataIndex:"batchNo",valueType:"text"},{title:"\u8D26\u9762\u5E93\u5B58",dataIndex:"quantity",valueType:"digit",align:"right"},{title:"\u76C8\u4E8F\u6570",valueType:"digit",align:"right",render:function(s,n){var a=n.checkQuantity/1,l=n.quantity/1;return a-l}},{title:"\u5B9E\u9645\u5E93\u5B58",dataIndex:"checkQuantity",valueType:"digit",align:"right"},{title:"\u64CD\u4F5C",dataIndex:"option",width:"180px",valueType:"option",render:function(s,n){return[(0,e.jsx)(h.ZP,{type:"link",size:"small",hidden:!T.hasPerms("wms:checkOrderDetail:edit"),onClick:function(){x(n)},children:"\u4FEE\u6539"},"edit"),(0,e.jsx)(h.ZP,{type:"link",size:"small",danger:!0,hidden:!T.hasPerms("wms:checkOrderDetail:remove"),onClick:c()(u()().mark(function a(){return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:A.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u8BE5\u76D8\u70B9\u660E\u7EC6\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var i=c()(u()().mark(function F(){var E;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Q([n]);case 2:E=b.sent,E&&y.current&&y.current.reload();case 4:case"end":return b.stop()}},F)}));function P(){return i.apply(this,arguments)}return P}()});case 1:case"end":return _.stop()}},a)})),children:"\u5220\u9664"},"delete")]}}];return(0,e.jsxs)(g.Z,{title:"\u76D8\u70B9\u5355\u660E\u7EC6 - ".concat(J),width:1350,open:H,onClose:V,destroyOnClose:!0,children:[(0,e.jsx)(L.Z,{headerTitle:"\u76D8\u70B9\u660E\u7EC6\u5217\u8868",actionRef:y,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,e.jsxs)(h.ZP,{type:"primary",hidden:!T.hasPerms("wms:checkOrderDetail:add"),onClick:function(){x(void 0)},children:[(0,e.jsx)(W.Z,{})," \u65B0\u589E"]},"add"),(0,e.jsxs)(h.ZP,{type:"primary",hidden:!T.hasPerms("wms:checkOrderDetail:export"),onClick:c()(u()().mark(function s(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ue();case 2:case"end":return a.stop()}},s)})),children:[(0,e.jsx)(M.Z,{})," \u5BFC\u51FA"]},"export")]},request:function(){var d=c()(u()().mark(function s(n){var a;return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(K){_.next=2;break}return _.abrupt("return",{data:[],success:!0});case 2:return N(!0),_.prev=3,_.next=6,(0,O.al)(D()(D()({},n),{},{checkOrderId:K}));case 6:return a=_.sent,_.abrupt("return",{data:a.rows,total:a.total,success:!0});case 8:return _.prev=8,N(!1),_.finish(8);case 11:case"end":return _.stop()}},s,null,[[3,,8,11]])}));return function(s){return d.apply(this,arguments)}}(),columns:se,rowSelection:{onChange:function(s,n){Z(n)}},loading:te}),(k==null?void 0:k.length)>0&&(0,e.jsx)("div",{style:{position:"fixed",bottom:0,right:0,width:"100%",padding:"16px",background:"#fff",boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.15)"},children:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9 ",(0,e.jsx)("a",{style:{fontWeight:600},children:k.length})," \u9879"]}),(0,e.jsx)(h.ZP,{danger:!0,hidden:!T.hasPerms("wms:checkOrderDetail:remove"),onClick:c()(u()().mark(function d(){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:A.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,e.jsx)(ExclamationCircleOutlined,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return c()(u()().mark(function l(){var _,i,P;return u()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Q(k);case 2:_=E.sent,_&&(Z([]),(i=y.current)===null||i===void 0||(P=i.reloadAndRest)===null||P===void 0||P.call(i));case 4:case"end":return E.stop()}},l)}))()},onCancel:function(){}});case 1:case"end":return n.stop()}},d)})),children:"\u6279\u91CF\u5220\u9664"},"batchRemove")]})})]})});R.default=o},41649:function(z,R,r){r.d(R,{WB:function(){return L},al:function(){return I},kW:function(){return m},mQ:function(){return W}});var j=r(15009),D=r.n(j),w=r(99289),u=r.n(w),C=r(76772),c=r(30964);function I(e){return p.apply(this,arguments)}function p(){return p=u()(D()().mark(function e(o){return D()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/wms/checkOrderDetail/list",{method:"GET",params:o}));case 1:case"end":return t.stop()}},e)})),p.apply(this,arguments)}function m(e,o){return(0,c.su)("/api/wms/checkOrderDetail/export",{params:e},"checkOrderDetail_".concat(new Date().getTime(),".xlsx"))}function B(e){return request("/api/wms/checkOrderDetail/".concat(e),{method:"GET"})}function f(e){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function e(o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/wms/checkOrderDetail",{method:"POST",data:o}));case 1:case"end":return t.stop()}},e)})),h.apply(this,arguments)}function A(e){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function e(o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/wms/checkOrderDetail",{method:"PUT",data:o}));case 1:case"end":return t.stop()}},e)})),g.apply(this,arguments)}function W(e){return M.apply(this,arguments)}function M(){return M=u()(D()().mark(function e(o){return D()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/wms/checkOrderDetail/".concat(o),{method:"DELETE"}));case 1:case"end":return t.stop()}},e)})),M.apply(this,arguments)}function L(e){return O.apply(this,arguments)}function O(){return O=u()(D()().mark(function e(o){return D()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.request)("/api/wms/checkOrderDetail/list/".concat(o),{method:"GET"}));case 1:case"end":return t.stop()}},e)})),O.apply(this,arguments)}}}]);
