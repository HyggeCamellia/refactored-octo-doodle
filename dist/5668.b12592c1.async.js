"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5668,3531,1122],{75668:function(fe,L,n){n.r(L);var m=n(15009),F=n.n(m),W=n(97857),R=n.n(W),U=n(99289),H=n.n(U),z=n(5574),b=n.n(z),M=n(67294),K=n(76772),O=n(77569),X=n(53531),w=n(85265),Z=n(83622),P=n(25278),G=n(34041),N=n(48296),Y=n(65385),_=n(24490),e=n(85893),A=(0,M.forwardRef)(function(u,B){var ee=u.open,J=u.onCancel,te=u.selectedInventory,Q=te===void 0?[]:te,q=u.size,ne=q===void 0?"30%":q,re=O.Z.useForm(),s=b()(re,1),o=s[0],l=(0,M.useRef)(),r=(0,M.useState)([]),i=b()(r,2),y=i[0],p=i[1],v=(0,M.useState)(!1),f=b()(v,2),E=f[0],S=f[1],C=(0,M.useState)(!1),h=b()(C,2),g=h[0],I=h[1],T=(0,K.useModel)("wms"),ae=T.warehouseMap,V=T.areaMap,se=T.itemBrandMap;(0,M.useImperativeHandle)(B,function(){return{setWarehouseIdAndAreaId:oe,getList:function(){var t;(t=l.current)===null||t===void 0||t.reload()}}});var oe=function(t,a){o.setFieldsValue({warehouseId:t,areaId:a}),I(!!a)},ie=function(t){return(t.length||t.length===0)&&(t.width||t.width===0)&&(t.height||t.height===0)?"".concat(t.length," * ").concat(t.width," * ").concat(t.height):[t.length||t.length===0?"\u957F\uFF1A".concat(t.length):"",t.width||t.width===0?"\u5BBD\uFF1A".concat(t.width):"",t.height||t.height===0?"\u9AD8\uFF1A".concat(t.height):""].filter(Boolean).join(" ")},le=function(t){return!Q.some(function(a){return"".concat(a.warehouseId,"_").concat(a.areaId,"_").concat(a.skuId)==="".concat(t.warehouseId,"_").concat(t.areaId,"_").concat(t.skuId)})},ue=[{title:"\u5E93\u533A",dataIndex:"areaName",render:function(t,a){var c;return(c=V.get(a.areaId))===null||c===void 0?void 0:c.areaName}},{title:"\u5546\u54C1\u4FE1\u606F",render:function(t,a){var c,D,j,k;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(c=a.item)===null||c===void 0?void 0:c.itemName}),((D=a.item)===null||D===void 0?void 0:D.itemCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",a.item.itemCode]}),((j=a.item)===null||j===void 0?void 0:j.itemBrand)&&(0,e.jsxs)("div",{children:["\u54C1\u724C\uFF1A",(k=se.get(a.item.itemBrand))===null||k===void 0?void 0:k.brandName]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",render:function(t,a){var c,D,j;return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(c=a.itemSku)===null||c===void 0?void 0:c.skuName}),((D=a.itemSku)===null||D===void 0?void 0:D.skuCode)&&(0,e.jsxs)("div",{children:["\u7F16\u53F7\uFF1A",a.itemSku.skuCode]}),((j=a.itemSku)===null||j===void 0?void 0:j.barcode)&&(0,e.jsxs)("div",{children:["\u6761\u7801\uFF1A",a.itemSku.barcode]})]})}},{title:"\u4EF7\u683C(\u5143)",width:160,align:"left",render:function(t,a){var c,D;return(0,e.jsxs)("div",{children:[((c=a.itemSku)===null||c===void 0?void 0:c.costPrice)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u6210\u672C\u4EF7\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.costPrice})]}),((D=a.itemSku)===null||D===void 0?void 0:D.sellingPrice)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u9500\u552E\u4EF7\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.sellingPrice})]})]})}},{title:"\u91CD\u91CF(kg)",width:160,align:"left",render:function(t,a){var c,D;return(0,e.jsxs)("div",{children:[((c=a.itemSku)===null||c===void 0?void 0:c.netWeight)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u51C0\u91CD\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.netWeight})]}),((D=a.itemSku)===null||D===void 0?void 0:D.grossWeight)!==void 0&&(0,e.jsxs)("div",{className:"flex-space-between",children:[(0,e.jsx)("span",{children:"\u6BDB\u91CD\uFF1A"}),(0,e.jsx)("div",{children:a.itemSku.grossWeight})]})]})}},{title:"\u957F\u5BBD\u9AD8(cm)",align:"right",width:250,render:function(t,a){return(0,e.jsx)("div",{children:ie(a.itemSku)})}},{title:"\u5269\u4F59\u5E93\u5B58",align:"right",render:function(t,a){return(0,e.jsx)(X.Z,{value:Number(a.quantity),precision:0})}}],de=function(){J(),p([])},x=function(){J(),p([])};return(0,e.jsxs)(w.Z,{title:"\u9009\u62E9\u5E93\u5B58",width:ne,open:ee,onClose:x,destroyOnClose:!0,footer:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,e.jsx)(Z.ZP,{onClick:x,style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(Z.ZP,{type:"primary",onClick:de,children:"\u786E\u8BA4"})]}),children:[(0,e.jsxs)(O.Z,{form:o,layout:"inline",labelAlign:"left",children:[(0,e.jsx)(O.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",children:(0,e.jsx)(P.Z,{placeholder:"\u5546\u54C1\u540D\u79F0",allowClear:!0})}),(0,e.jsx)(O.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,e.jsx)(P.Z,{placeholder:"\u5546\u54C1\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(O.Z.Item,{label:"\u5E93\u533A",name:"areaId",children:(0,e.jsx)(G.Z,{placeholder:"\u8BF7\u9009\u62E9\u5E93\u533A",disabled:g,allowClear:!0,style:{width:180},children:Array.from(V.values()).filter(function(d){return d.warehouseId===o.getFieldValue("warehouseId")}).map(function(d){return(0,e.jsx)(G.Z.Option,{value:d.id,children:d.areaName},d.id)})})}),(0,e.jsx)(O.Z.Item,{label:"\u89C4\u683C\u540D\u79F0",name:"skuName",children:(0,e.jsx)(P.Z,{placeholder:"\u89C4\u683C\u540D\u79F0",allowClear:!0,style:{width:180}})}),(0,e.jsx)(O.Z.Item,{label:"\u89C4\u683C\u7F16\u53F7",name:"barcode",children:(0,e.jsx)(P.Z,{placeholder:"\u89C4\u683C\u7F16\u53F7",allowClear:!0,style:{width:180}})}),(0,e.jsx)(O.Z.Item,{children:(0,e.jsx)(Z.ZP,{type:"primary",icon:(0,e.jsx)(N.Z,{}),onClick:function(){var t;return(t=l.current)===null||t===void 0?void 0:t.reload()},children:"\u67E5\u8BE2"})})]}),(0,e.jsx)(Y.Z,{style:{marginTop:16},actionRef:l,rowKey:"id",search:!1,options:!1,request:function(){var d=H()(F()().mark(function t(a){var c,D,j;return F()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return S(!0),$.prev=1,c=o.getFieldsValue(),D=R()(R()({},c),{},{pageNum:a.current,pageSize:a.pageSize}),$.next=6,(0,_.B3)(D);case 6:return j=$.sent,$.abrupt("return",{data:j.rows.map(function(ce){var me,_e;return R()(R()({},ce),{},{warehouseName:(me=ae.get(ce.warehouseId))===null||me===void 0?void 0:me.warehouseName,areaName:(_e=V.get(ce.areaId))===null||_e===void 0?void 0:_e.areaName})}),total:j.total,success:!0});case 8:return $.prev=8,S(!1),$.finish(8);case 11:case"end":return $.stop()}},t,null,[[1,,8,11]])}));return function(t){return d.apply(this,arguments)}}(),columns:ue,rowSelection:{selectedRowKeys:y.map(function(d){return d.id}),onChange:function(t,a){return p(a)},getCheckboxProps:function(t){return{disabled:!le(t)}}},loading:E,pagination:{showSizeChanger:!0}})]})});L.default=A},24490:function(fe,L,n){n.d(L,{B3:function(){return z},Wc:function(){return M}});var m=n(15009),F=n.n(m),W=n(99289),R=n.n(W),U=n(76772),H=n(30964);function z(_){return b.apply(this,arguments)}function b(){return b=R()(F()().mark(function _(e){return F()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,U.request)("/api/wms/inventory/list",{method:"GET",params:e}));case 1:case"end":return u.stop()}},_)})),b.apply(this,arguments)}function M(_,e){return K.apply(this,arguments)}function K(){return K=R()(F()().mark(function _(e,A){return F()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,U.request)("/api/wms/inventory/boardList/".concat(A),{method:"GET",params:e}));case 1:case"end":return B.stop()}},_)})),K.apply(this,arguments)}function O(_){return request("/api/wms/inventory/".concat(_),{method:"GET"})}function X(_){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function _(e){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/inventory",{method:"POST",data:e}));case 1:case"end":return u.stop()}},_)})),w.apply(this,arguments)}function Z(_){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function _(e){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/inventory",{method:"PUT",data:e}));case 1:case"end":return u.stop()}},_)})),P.apply(this,arguments)}function G(_){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function _(e){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/wms/inventory/".concat(e),{method:"DELETE"}));case 1:case"end":return u.stop()}},_)})),N.apply(this,arguments)}function Y(_,e){return downLoadXlsx("/api/wms/inventory/export",{params:_},"inventory_".concat(new Date().getTime(),".xlsx"))}},53531:function(fe,L,n){n.d(L,{Z:function(){return re}});var m=n(67294),F=n(56790),W=n(75164),R=n(96159),U=n(93967),H=n.n(U),z=n(64217),b=n(53124),M=n(48054),O=s=>{const{value:o,formatter:l,precision:r,decimalSeparator:i,groupSeparator:y="",prefixCls:p}=s;let v;if(typeof l=="function")v=l(o);else{const f=String(o),E=f.match(/^(-?)(\d*)(\.(\d+))?$/);if(!E||f==="-")v=f;else{const S=E[1];let C=E[2]||"0",h=E[4]||"";C=C.replace(/\B(?=(\d{3})+(?!\d))/g,y),typeof r=="number"&&(h=h.padEnd(r,"0").slice(0,r>0?r:0)),h&&(h=`${i}${h}`),v=[m.createElement("span",{key:"int",className:`${p}-content-value-int`},S,C),h&&m.createElement("span",{key:"decimal",className:`${p}-content-value-decimal`},h)]}}return m.createElement("span",{className:`${p}-content-value`},v)},X=n(14747),w=n(83559),Z=n(83262);const P=s=>{const{componentCls:o,marginXXS:l,padding:r,colorTextDescription:i,titleFontSize:y,colorTextHeading:p,contentFontSize:v,fontFamily:f}=s;return{[o]:Object.assign(Object.assign({},(0,X.Wf)(s)),{[`${o}-title`]:{marginBottom:l,color:i,fontSize:y},[`${o}-skeleton`]:{paddingTop:r},[`${o}-content`]:{color:p,fontSize:v,fontFamily:f,[`${o}-content-value`]:{display:"inline-block",direction:"ltr"},[`${o}-content-prefix, ${o}-content-suffix`]:{display:"inline-block"},[`${o}-content-prefix`]:{marginInlineEnd:l},[`${o}-content-suffix`]:{marginInlineStart:l}}})}},G=s=>{const{fontSizeHeading3:o,fontSize:l}=s;return{titleFontSize:l,contentFontSize:o}};var N=(0,w.I$)("Statistic",s=>{const o=(0,Z.IX)(s,{});return P(o)},G),Y=function(s,o){var l={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&o.indexOf(r)<0&&(l[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)o.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(l[r[i]]=s[r[i]]);return l},e=m.forwardRef((s,o)=>{const{prefixCls:l,className:r,rootClassName:i,style:y,valueStyle:p,value:v=0,title:f,valueRender:E,prefix:S,suffix:C,loading:h=!1,formatter:g,precision:I,decimalSeparator:T=".",groupSeparator:ae=",",onMouseEnter:V,onMouseLeave:se}=s,oe=Y(s,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:ie,direction:le,className:ue,style:de}=(0,b.dj)("statistic"),x=ie("statistic",l),[d,t,a]=N(x),c=m.createElement(O,{decimalSeparator:T,groupSeparator:ae,prefixCls:x,formatter:g,precision:I,value:v}),D=H()(x,{[`${x}-rtl`]:le==="rtl"},ue,r,i,t,a),j=m.useRef(null);m.useImperativeHandle(o,()=>({nativeElement:j.current}));const k=(0,z.Z)(oe,{aria:!0,data:!0});return d(m.createElement("div",Object.assign({},k,{ref:j,className:D,style:Object.assign(Object.assign({},de),y),onMouseEnter:V,onMouseLeave:se}),f&&m.createElement("div",{className:`${x}-title`},f),m.createElement(M.Z,{paragraph:!1,loading:h,className:`${x}-skeleton`},m.createElement("div",{style:p,className:`${x}-content`},S&&m.createElement("span",{className:`${x}-content-prefix`},S),E?E(c):c,C&&m.createElement("span",{className:`${x}-content-suffix`},C)))))});const A=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function u(s,o){let l=s;const r=/\[[^\]]*]/g,i=(o.match(r)||[]).map(f=>f.slice(1,-1)),y=o.replace(r,"[]"),p=A.reduce((f,[E,S])=>{if(f.includes(E)){const C=Math.floor(l/S);return l-=C*S,f.replace(new RegExp(`${E}+`,"g"),h=>{const g=h.length;return C.toString().padStart(g,"0")})}return f},y);let v=0;return p.replace(r,()=>{const f=i[v];return v+=1,f})}function B(s,o,l){const{format:r=""}=o,i=new Date(s).getTime(),y=Date.now(),p=Math.max(l?i-y:y-i,0);return u(p,r)}var ee=function(s,o){var l={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&o.indexOf(r)<0&&(l[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)o.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(l[r[i]]=s[r[i]]);return l};function J(s){return new Date(s).getTime()}var Q=s=>{const{value:o,format:l="HH:mm:ss",onChange:r,onFinish:i,type:y}=s,p=ee(s,["value","format","onChange","onFinish","type"]),v=y==="countdown",[f,E]=m.useState(null),S=(0,F.zX)(()=>{const g=Date.now(),I=J(o);E({});const T=v?I-g:g-I;return r==null||r(T),v&&I<g?(i==null||i(),!1):!0});m.useEffect(()=>{let g;const I=()=>W.Z.cancel(g),T=()=>{g=(0,W.Z)(()=>{S()&&T()})};return T(),I},[o,v]),m.useEffect(()=>{E({})},[]);const C=(g,I)=>f?B(g,Object.assign(Object.assign({},I),{format:l}),v):"-",h=g=>(0,R.Tm)(g,{title:void 0});return m.createElement(e,Object.assign({},p,{value:o,valueRender:h,formatter:C}))};const q=s=>m.createElement(Q,Object.assign({},s,{type:"countdown"}));var ne=m.memo(q);e.Timer=Q,e.Countdown=ne;var re=e}}]);
