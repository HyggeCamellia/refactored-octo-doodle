"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5175,8433],{33867:function(he,L,r){r.d(L,{iK:function(){return Q},zc:function(){return R}});var Q=function(t){return t[t.SUCCESS=200]="SUCCESS",t[t.ERROR=-1]="ERROR",t[t.TIMEOUT=401]="TIMEOUT",t.TYPE="success",t}({}),C=function(t){return t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t}({}),R=function(t){return t.JSON="application/json;charset=UTF-8",t.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",t.FORM_DATA="multipart/form-data;charset=UTF-8",t}({})},8057:function(he,L,r){r.r(L);var Q=r(97857),C=r.n(Q),R=r(15009),t=r.n(R),ae=r(99289),m=r.n(ae),A=r(5574),e=r.n(A),D=r(67294),X=r(76772),j=r(2453),x=r(83622),I=r(17788),l=r(85265),i=r(24969),P=r(23430),k=r(65385),$=r(41649),y=r(85893),Z=(0,D.forwardRef)(function(J,q){var ee=J.open,K=J.checkOrderNo,V=J.onCancel,c=(0,D.useState)(),E=e()(c,2),B=E[0],s=E[1],S=(0,D.useRef)(),Y=(0,D.useState)([]),n=e()(Y,2),h=n[0],ge=n[1],oe=(0,D.useState)(),se=e()(oe,2),Te=se[0],ce=se[1],pe=(0,D.useState)(!1),me=e()(pe,2),te=me[0],fe=me[1],G=(0,X.useAccess)(),je=(0,X.useModel)("wms"),ye=je.areaMap;(0,D.useImperativeHandle)(q,function(){return{setCheckOrderId:s,handleQuery:function(){var f;(f=S.current)===null||f===void 0||f.reload()}}});var ue=function(){var M=m()(t()().mark(function f(_){var o,v;return t()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(o=j.ZP.loading("\u6B63\u5728\u5220\u9664"),_){g.next=3;break}return g.abrupt("return",!0);case 3:return g.prev=3,g.next=6,(0,$.mQ)(_.map(function(z){return z.id}).join(","));case 6:return v=g.sent,o(),v.code===200?j.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):j.ZP.error(v.msg),g.abrupt("return",!0);case 12:return g.prev=12,g.t0=g.catch(3),o(),j.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),g.abrupt("return",!1);case 17:case"end":return g.stop()}},f,null,[[3,12]])}));return function(_){return M.apply(this,arguments)}}(),Ae=function(){var M=m()(t()().mark(function f(){var _;return t()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return _=j.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),v.prev=1,v.next=4,(0,$.kW)({checkOrderId:B});case 4:return _(),j.ZP.success("\u5BFC\u51FA\u6210\u529F"),v.abrupt("return",!0);case 9:return v.prev=9,v.t0=v.catch(1),_(),j.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),v.abrupt("return",!1);case 14:case"end":return v.stop()}},f,null,[[1,9]])}));return function(){return M.apply(this,arguments)}}(),_e=[{title:"\u5546\u54C1\u540D\u79F0",dataIndex:["itemSku","item","itemName"],valueType:"text"},{title:"\u89C4\u683C\u540D\u79F0",dataIndex:["itemSku","skuName"],valueType:"text"},{title:"\u5E93\u533A",dataIndex:"areaName",valueType:"text",render:function(f,_){var o;return(o=ye.get(_.areaId))===null||o===void 0?void 0:o.areaName}},{title:"\u6279\u53F7",dataIndex:"batchNo",valueType:"text"},{title:"\u8D26\u9762\u5E93\u5B58",dataIndex:"quantity",valueType:"digit",align:"right"},{title:"\u76C8\u4E8F\u6570",valueType:"digit",align:"right",render:function(f,_){var o=_.checkQuantity/1,v=_.quantity/1;return o-v}},{title:"\u5B9E\u9645\u5E93\u5B58",dataIndex:"checkQuantity",valueType:"digit",align:"right"},{title:"\u64CD\u4F5C",dataIndex:"option",width:"180px",valueType:"option",render:function(f,_){return[(0,y.jsx)(x.ZP,{type:"link",size:"small",hidden:!G.hasPerms("wms:checkOrderDetail:edit"),onClick:function(){ce(_)},children:"\u4FEE\u6539"},"edit"),(0,y.jsx)(x.ZP,{type:"link",size:"small",danger:!0,hidden:!G.hasPerms("wms:checkOrderDetail:remove"),onClick:m()(t()().mark(function o(){return t()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:I.Z.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u8BE5\u76D8\u70B9\u660E\u7EC6\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var g=m()(t()().mark(function Ee(){var N;return t()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,ue([_]);case 2:N=ne.sent,N&&S.current&&S.current.reload();case 4:case"end":return ne.stop()}},Ee)}));function z(){return g.apply(this,arguments)}return z}()});case 1:case"end":return O.stop()}},o)})),children:"\u5220\u9664"},"delete")]}}];return(0,y.jsxs)(l.Z,{title:"\u76D8\u70B9\u5355\u660E\u7EC6 - ".concat(K),width:1350,open:ee,onClose:V,destroyOnClose:!0,children:[(0,y.jsx)(k.Z,{headerTitle:"\u76D8\u70B9\u660E\u7EC6\u5217\u8868",actionRef:S,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,y.jsxs)(x.ZP,{type:"primary",hidden:!G.hasPerms("wms:checkOrderDetail:add"),onClick:function(){ce(void 0)},children:[(0,y.jsx)(i.Z,{})," \u65B0\u589E"]},"add"),(0,y.jsxs)(x.ZP,{type:"primary",hidden:!G.hasPerms("wms:checkOrderDetail:export"),onClick:m()(t()().mark(function f(){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Ae();case 2:case"end":return o.stop()}},f)})),children:[(0,y.jsx)(P.Z,{})," \u5BFC\u51FA"]},"export")]},request:function(){var M=m()(t()().mark(function f(_){var o;return t()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(B){O.next=2;break}return O.abrupt("return",{data:[],success:!0});case 2:return fe(!0),O.prev=3,O.next=6,(0,$.al)(C()(C()({},_),{},{checkOrderId:B}));case 6:return o=O.sent,O.abrupt("return",{data:o.rows,total:o.total,success:!0});case 8:return O.prev=8,fe(!1),O.finish(8);case 11:case"end":return O.stop()}},f,null,[[3,,8,11]])}));return function(f){return M.apply(this,arguments)}}(),columns:_e,rowSelection:{onChange:function(f,_){ge(_)}},loading:te}),(h==null?void 0:h.length)>0&&(0,y.jsx)("div",{style:{position:"fixed",bottom:0,right:0,width:"100%",padding:"16px",background:"#fff",boxShadow:"0 -2px 8px rgba(0, 0, 0, 0.15)"},children:(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,y.jsxs)("div",{children:["\u5DF2\u9009\u62E9 ",(0,y.jsx)("a",{style:{fontWeight:600},children:h.length})," \u9879"]}),(0,y.jsx)(x.ZP,{danger:!0,hidden:!G.hasPerms("wms:checkOrderDetail:remove"),onClick:m()(t()().mark(function M(){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:I.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,y.jsx)(ExclamationCircleOutlined,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return m()(t()().mark(function v(){var O,g,z;return t()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,ue(h);case 2:O=N.sent,O&&(ge([]),(g=S.current)===null||g===void 0||(z=g.reloadAndRest)===null||z===void 0||z.call(g));case 4:case"end":return N.stop()}},v)}))()},onCancel:function(){}});case 1:case"end":return _.stop()}},M)})),children:"\u6279\u91CF\u5220\u9664"},"batchRemove")]})})]})});L.default=Z},78433:function(he,L,r){r.r(L);var Q=r(5574),C=r.n(Q),R=r(67294),t=r(47116),ae=r.n(t),m=r(78566),A=r.n(m),e=r(85893),D=(0,R.forwardRef)(function(j,x){var I,l=j.data;return(0,e.jsxs)("div",{ref:x,style:{padding:"20px",fontFamily:'"Microsoft YaHei", sans-serif',fontSize:"14px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"15px"},children:[(0,e.jsx)("div",{children:(0,e.jsxs)("h1",{style:{fontSize:"22px",fontWeight:"bold",marginBottom:"8px"},children:["\u76D8\u5E93\u5355:",l.checkOrderNo]})}),(0,e.jsx)("div",{children:(0,e.jsx)(A(),{value:l.checkOrderNo,options:{displayValue:!1,width:1,height:50,format:"CODE128"}})})]}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",marginBottom:"20px"},children:[(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u76D8\u5E93\u72B6\u6001\uFF1A"}),l.checkOrderStatus]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u4ED3\u5E93\uFF1A"}),l.warehouseName]})]}),(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u76C8\u4E8F\u6570\uFF1A"}),l.checkOrderTotal]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u5E93\u533A\uFF1A"}),l.areaName]})]}),(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u521B\u5EFA\u4EBA\uFF1A"}),l.createBy]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u64CD\u4F5C\u4EBA\uFF1A"}),l.updateBy]})]}),l.updateBy&&(0,e.jsxs)("div",{style:{flex:1,minWidth:"250px"},children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),l.createTime]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),l.updateTime]})]}),(0,e.jsx)("div",{style:{flex:1,minWidth:"250px"},children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u5907\u6CE8\uFF1A"}),l.remark]})})]}),((I=l.table)===null||I===void 0?void 0:I.length)>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",margin:"15px 0",border:"1px solid "},children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{style:{border:"1px solid ",padding:"10px",textAlign:"left",width:"20%"},children:"\u5546\u54C1\u540D\u79F0"}),(0,e.jsx)("th",{style:{border:"1px solid ",padding:"10px",textAlign:"left",width:"15%"},children:"\u89C4\u683C"}),(0,e.jsx)("th",{style:{border:"1px solid ",padding:"10px",textAlign:"left",width:"10%"},children:"\u5E93\u533A"}),(0,e.jsx)("th",{style:{border:"1px solid ",padding:"10px",textAlign:"right",width:"10%"},children:"\u8D26\u9762\u5E93\u5B58"}),(0,e.jsx)("th",{style:{border:"1px solid ",padding:"10px",textAlign:"right",width:"10%"},children:"\u76C8\u4E8F\u6570"}),(0,e.jsx)("th",{style:{border:"1px solid ",padding:"10px",textAlign:"right",width:"10%"},children:"\u5B9E\u9645\u5E93\u5B58"}),l.table.some(function(i){return i.batchNo})&&(0,e.jsx)("th",{style:{border:"1px solid ",padding:"10px",textAlign:"left",width:"15%"},children:"\u6279\u53F7"})]})}),(0,e.jsxs)("tbody",{children:[l.table.map(function(i,P){return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px"},children:i.itemName}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px"},children:i.skuName}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px"},children:i.areaName}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px",textAlign:"right"},children:i.quantity}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px",textAlign:"right"},children:i.profitAndLoss}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px",textAlign:"right"},children:i.checkQuantity}),l.table.some(function(k){return k.batchNo})&&(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px"},children:i.batchNo||"-"})]},P)}),(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{colSpan:3,style:{border:"1px solid ",padding:"8px",textAlign:"right"},children:"\u5408\u8BA1"}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px",textAlign:"right"},children:l.table.reduce(function(i,P){return i+Number(P.quantity)},0)}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px",textAlign:"right",fontWeight:500},children:l.table.reduce(function(i,P){return i+Number(P.profitAndLoss)},0)}),(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px",textAlign:"right"},children:l.table.reduce(function(i,P){return i+Number(P.checkQuantity)},0)}),l.table.some(function(i){return i.batchNo})&&(0,e.jsx)("td",{style:{border:"1px solid ",padding:"8px"},children:"-"})]})]})]}),l.remark&&(0,e.jsx)("div",{style:{marginTop:"15px",padding:"10px",borderTop:"1px dashed "},children:(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"\u5907\u6CE8\uFF1A"}),l.remark]})})]}):(0,e.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"\u6682\u65E0\u76D8\u5E93\u660E\u7EC6\u6570\u636E"})]})}),X=function(x){var I=x.data,l=x.onClose,i=x.loading,P=i===void 0?!1:i,k=x.visible,$=R.useRef(),y=R.useState(!1),Z=C()(y,2),J=Z[0],q=Z[1],ee=(0,R.useRef)(null),K=(0,t.useReactToPrint)({contentRef:ee});return(0,R.useEffect)(function(){if(k){var V=setTimeout(function(){K()},100);return function(){return clearTimeout(V)}}},[k,K]),(0,e.jsxs)("div",{children:[(0,e.jsx)("button",{onClick:function(){return K()},children:"\u6253\u5370"}),(0,e.jsx)(D,{ref:ee,data:I})]})};L.default=X},95175:function(he,L,r){r.r(L);var Q=r(15009),C=r.n(Q),R=r(97857),t=r.n(R),ae=r(99289),m=r.n(ae),A=r(5574),e=r.n(A),D=r(67294),X=r(76772),j=r(77569),x=r(17788),I=r(2453),l=r(53531),i=r(83622),P=r(4393),k=r(78045),$=r(25278),y=r(96154),Z=r(48296),J=r(33160),q=r(24969),ee=r(6110),K=r(23924),V=r(92982),c=r(41649),E=r(8057),B=r(7009),s=r(78433),S=r(27484),Y=r.n(S),n=r(85893),h=function(){var oe,se,Te=(0,D.useState)([]),ce=e()(Te,2),pe=ce[0],me=ce[1],te=(0,X.useModel)("wms");te.getWarehouseList();var fe=te.warehouseMap;te.getAreaList();var G=te.areaMap,je=j.Z.useForm(),ye=e()(je,1),ue=ye[0],Ae=(0,D.useRef)(),_e=(0,D.useRef)(),M=(0,D.useState)(!1),f=e()(M,2),_=f[0],o=f[1],v=(0,D.useState)([]),O=e()(v,2),g=O[0],z=O[1],Ee=(0,D.useState)(0),N=e()(Ee,2),Be=N[0],ne=N[1],We=(0,D.useState)({pageNum:1,pageSize:10,checkOrderNo:void 0,checkOrderStatus:-2}),Se=e()(We,2),ie=Se[0],ve=Se[1],Ke=(0,D.useState)({detailVisible:!1,editVisible:!1,currentOrder:null}),Re=e()(Ke,2),De=Re[0],le=Re[1];(0,D.useEffect)(function(){(0,V.pX)("wms_check_status").then(function(d){var u=Object.values(d);me(u)})},[]);var xe=function(){var d=m()(C()().mark(function u(){var a,p,w,re,H;return C()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return o(!0),U.prev=1,a=t()({},ie),a.checkOrderStatus===-2&&(a.checkOrderStatus=void 0),p=ue.getFieldsValue(),w=p.warehouseName,re=p.areaName,w&&(a.warehouseName=w),re&&(a.areaName=re),U.next=9,(0,K.rX)(a);case 9:H=U.sent,z(H.rows),ne(H.total);case 12:return U.prev=12,o(!1),U.finish(12);case 15:case"end":return U.stop()}},u,null,[[1,,12,15]])}));return function(){return d.apply(this,arguments)}}(),Oe=function(){ve(function(u){return t()(t()({},u),{},{pageNum:1})}),xe()},Ne=function(){ue.resetFields(),ve({pageNum:1,pageSize:10,checkOrderNo:void 0,checkOrderStatus:-2}),Oe()},we=function(){le({detailVisible:!1,editVisible:!0,currentOrder:null})},$e=function(){var d=m()(C()().mark(function u(a){return C()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:x.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u76D8\u5E93\u5355\u3010".concat(a.checkOrderNo,"\u3011\u5417\uFF1F"),onOk:function(){var re=m()(C()().mark(function b(){return C()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return o(!0),T.prev=1,T.next=4,(0,K._q)(a.id);case 4:I.ZP.success("\u5220\u9664\u6210\u529F"),xe(),T.next=11;break;case 8:T.prev=8,T.t0=T.catch(1),T.t0===409&&x.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u76D8\u5E93\u5355\u3010",a.checkOrderNo,"\u3011\u5DF2\u76D8\u5E93\u5B8C\u6210\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,n.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})});case 11:return T.prev=11,o(!1),T.finish(11);case 14:case"end":return T.stop()}},b,null,[[1,8,11,14]])}));function H(){return re.apply(this,arguments)}return H}()});case 1:case"end":return w.stop()}},u)}));return function(a){return d.apply(this,arguments)}}(),Ze=function(u){le({detailVisible:!1,editVisible:!0,currentOrder:u})},Ve=function(u){var a,p;le({detailVisible:!0,editVisible:!1,currentOrder:u}),(a=_e.current)===null||a===void 0||a.setCheckOrderId(u.id),(p=_e.current)===null||p===void 0||p.handleQuery()},Ye=(0,D.useState)(!1),Ie=e()(Ye,2),Je=Ie[0],qe=Ie[1],Qe=(0,D.useState)(null),Fe=e()(Qe,2),Pe=Fe[0],Ce=Fe[1],Ge=(0,D.useState)(!1),Le=e()(Ge,2),er=Le[0],ke=Le[1],ze=function(){var d=m()(C()().mark(function u(a){var p,w,re,H,b,U,T;return C()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return ke(!0),F.prev=1,F.next=4,Promise.all([(0,K.YT)(a.id),(0,c.WB)(a.id)]);case 4:re=F.sent,H=e()(re,2),b=H[0],U=H[1],T=U.data.map(function(W){var de,Me,be;return{itemName:((de=W.itemSku)===null||de===void 0||(de=de.item)===null||de===void 0?void 0:de.itemName)||"-",skuName:((Me=W.itemSku)===null||Me===void 0?void 0:Me.skuName)||"-",areaName:((be=G.get(W.areaId))===null||be===void 0?void 0:be.areaName)||"-",quantity:Number(W.quantity).toFixed(0),profitAndLoss:Number(W.checkQuantity-W.quantity).toFixed(0),checkQuantity:Number(W.checkQuantity).toFixed(0),batchNo:W.batchNo||void 0,productionDate:W.productionDate?Y()(W.productionDate).format("YYYY-MM-DD"):void 0,expirationDate:W.expirationDate?Y()(W.expirationDate).format("YYYY-MM-DD"):void 0}}),Ce({checkOrderNo:b.data.checkOrderNo,warehouseName:((p=fe.get(b.data.warehouseId))===null||p===void 0?void 0:p.warehouseName)||"-",areaName:((w=G.get(b.data.areaId))===null||w===void 0?void 0:w.areaName)||"-",checkOrderStatus:Ue(b.data),checkOrderTotal:Number(b.data.checkOrderTotal).toFixed(0),createBy:b.data.createBy,createTime:Y()(b.data.createTime).format("YYYY-MM-DD HH:mm"),updateBy:b.data.updateBy,updateTime:b.data.updateTime?Y()(b.data.updateTime).format("YYYY-MM-DD HH:mm"):void 0,remark:b.data.remark,table:T}),F.next=16;break;case 12:F.prev=12,F.t0=F.catch(1),I.ZP.error("\u83B7\u53D6\u6253\u5370\u6570\u636E\u5931\u8D25"),console.error("Print error:",F.t0);case 16:return F.prev=16,ke(!1),F.finish(16);case 19:case"end":return F.stop()}},u,null,[[1,12,16,19]])}));return function(a){return d.apply(this,arguments)}}(),He=function(u){var a;return(a=te.warehouseMap.get(u.warehouseId))===null||a===void 0?void 0:a.warehouseName},Ue=function(u){var a;return(a=pe.find(function(p){return p.value==u.checkOrderStatus}))===null||a===void 0?void 0:a.label},Xe=[{title:"\u5355\u53F7",dataIndex:"checkOrderNo",align:"left",width:120},{title:"\u4ED3\u5E93/\u5E93\u533A",align:"left",width:150,render:function(u,a){var p;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u4ED3\u5E93\uFF1A",He(a)]}),a.areaId&&(0,n.jsxs)("div",{children:["\u5E93\u533A\uFF1A",(p=G.get(a.areaId))===null||p===void 0?void 0:p.areaName]})]})}},{title:"\u76D8\u5E93\u72B6\u6001",dataIndex:"checkOrderStatus",align:"center",width:100,render:function(u,a){return(0,n.jsx)("span",{children:Ue(a)})}},{title:"\u76C8\u4E8F\u6570",align:"right",width:80,render:function(u,a){return(0,n.jsx)(l.Z,{value:Number(a.checkOrderTotal),precision:0})}},{title:"\u521B\u5EFA/\u64CD\u4F5C",align:"left",width:120,render:function(u,a){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",a.createBy]}),a.updateBy&&(0,n.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",a.updateBy]})]})}},{title:"\u521B\u5EFA\u65F6\u95F4/\u64CD\u4F5C\u65F6\u95F4",align:"left",width:150,render:function(u,a){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",Y()(a.createTime).format("MM-DD HH:mm")]}),(0,n.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",Y()(a.updateTime).format("MM-DD HH:mm")]})]})}},{title:"\u5907\u6CE8",dataIndex:"remark",width:120},{title:"\u64CD\u4F5C",align:"right",width:120,render:function(u,a){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i.ZP,{type:"link",onClick:function(){return Ze(a)},disabled:[-1,1].includes(a.checkOrderStatus),children:"\u4FEE\u6539"}),(0,n.jsx)(i.ZP,{type:"link",onClick:function(){return Ve(a)},children:"\u67E5\u770B"})]}),(0,n.jsxs)("div",{style:{marginTop:5},children:[(0,n.jsx)(i.ZP,{type:"link",danger:!0,onClick:function(){return $e(a)},disabled:a.checkOrderStatus===1,children:"\u5220\u9664"}),(0,n.jsx)(i.ZP,{type:"link",onClick:function(){return ze(a)},children:"\u6253\u5370"})]})]})}}];return(0,D.useEffect)(function(){xe()},[ie.current,ie.pageSize,ie.checkOrderStatus]),(0,n.jsxs)(ee._z,{children:[(0,n.jsx)(P.Z,{children:(0,n.jsxs)(j.Z,{form:ue,layout:"inline",labelAlign:"left",style:{display:"flex",flexWrap:"nowrap",gap:16},children:[(0,n.jsx)(j.Z.Item,{label:"\u76D8\u5E93\u72B6\u6001",name:"checkOrderStatus",initialValue:-2,style:{marginBottom:0,flex:1},children:(0,n.jsxs)(k.ZP.Group,{onChange:function(u){ve(function(a){return t()(t()({},a),{},{checkOrderStatus:u.target.value})}),Oe()},style:{whiteSpace:"nowrap"},children:[(0,n.jsx)(k.ZP.Button,{value:-2,children:"\u5168\u90E8"}),pe.map(function(d){return(0,n.jsx)(k.ZP.Button,{value:d.value,children:d.label},d.value)})]})}),(0,n.jsx)(j.Z.Item,{label:"\u76D8\u5E93\u5355\u53F7",name:"checkOrderNo",style:{marginBottom:0,flex:1},children:(0,n.jsx)($.Z,{placeholder:"\u8BF7\u8F93\u5165\u76D8\u5E93\u5355\u53F7",allowClear:!0,onPressEnter:Oe,style:{minWidth:180}})}),(0,n.jsxs)(j.Z.Item,{style:{marginBottom:0},children:[(0,n.jsx)(i.ZP,{type:"primary",icon:(0,n.jsx)(Z.Z,{}),onClick:Oe,children:"\u641C\u7D22"}),(0,n.jsx)(i.ZP,{icon:(0,n.jsx)(J.Z,{}),onClick:Ne,style:{marginLeft:8},children:"\u91CD\u7F6E"})]})]})}),(0,n.jsxs)(P.Z,{style:{marginTop:20},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,n.jsx)("span",{style:{fontSize:"large"},children:"\u76D8\u5E93\u5355"}),(0,n.jsx)(i.ZP,{type:"primary",icon:(0,n.jsx)(q.Z,{}),onClick:we,children:"\u65B0\u589E"})]}),(0,n.jsx)(y.Z,{loading:_,dataSource:g,columns:Xe,rowKey:"id",pagination:{current:ie.pageNum,pageSize:ie.pageSize,total:Be,onChange:function(u,a){ve(function(p){return t()(t()({},p),{},{pageNum:u,pageSize:a})})}},size:"small"})]}),(0,n.jsx)(x.Z,{title:De.currentOrder?"\u4FEE\u6539\u76D8\u5E93\u5355":"\u65B0\u589E\u76D8\u5E93\u5355",open:De.editVisible,onCancel:function(){return le(function(u){return t()(t()({},u),{},{editVisible:!1})})},footer:null,width:"80%",destroyOnClose:!0,children:(0,n.jsx)(B.default,{id:(oe=De.currentOrder)===null||oe===void 0?void 0:oe.id,onCancel:function(){return le(function(u){return t()(t()({},u),{},{editVisible:!1})})}})}),(0,n.jsx)(E.default,{ref:_e,open:De.detailVisible,checkOrderNo:((se=De.currentOrder)===null||se===void 0?void 0:se.checkOrderNo)||null,onCancel:function(){return le(function(u){return t()(t()({},u),{},{detailVisible:!1})})}}),(0,n.jsx)(x.Z,{open:!!Pe,onCancel:function(){return Ce(null)},footer:null,width:800,children:Pe&&(0,n.jsx)(s.default,{data:Pe,onClose:function(){return Ce(null)},visible:!1})})]})};L.default=h},92982:function(he,L,r){r.d(L,{Hr:function(){return i},QK:function(){return K},Vd:function(){return x},a7:function(){return y},jK:function(){return X},n2:function(){return ee},oH:function(){return k},pX:function(){return I},sF:function(){return J}});var Q=r(97857),C=r.n(Q),R=r(15009),t=r.n(R),ae=r(99289),m=r.n(ae),A=r(76772),e=r(33867),D=r(30964);function X(c){return j.apply(this,arguments)}function j(){return j=m()(t()().mark(function c(E){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,A.request)("/api/system/dict/type/list",{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:E}));case 1:case"end":return s.stop()}},c)})),j.apply(this,arguments)}function x(c){return(0,A.request)("/api/system/dict/type/".concat(c),{method:"GET"})}function I(c,E){return l.apply(this,arguments)}function l(){return l=m()(t()().mark(function c(E,B){var s,S;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("getDictValueEnum resp:",E),n.next=3,(0,A.request)("/api/system/dict/data/type/".concat(E),{method:"GET"});case 3:if(s=n.sent,console.log("getDictValueEnum resp:",E,s),s.code!==e.iK.SUCCESS){n.next=11;break}return S={},s.data.forEach(function(h){S[h.dictValue]={text:h.dictLabel,label:h.dictLabel,value:B?Number(h.dictValue):h.dictValue,key:h.dictCode,listClass:h.listClass,status:h.listClass}}),n.abrupt("return",S);case 11:return n.abrupt("return",{});case 12:case"end":return n.stop()}},c)})),l.apply(this,arguments)}function i(c,E){return P.apply(this,arguments)}function P(){return P=m()(t()().mark(function c(E,B){var s,S;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,A.request)("/api/system/dict/data/type/".concat(E),{method:"GET"});case 2:if(s=n.sent,s.code!==200){n.next=6;break}return S=s.data.map(function(h){return{text:h.dictLabel,label:h.dictLabel,value:B?Number(h.dictValue):h.dictValue,key:h.dictCode,listClass:h.listClass,status:h.listClass}}),n.abrupt("return",S);case 6:return n.abrupt("return",[]);case 7:case"end":return n.stop()}},c)})),P.apply(this,arguments)}function k(c){return $.apply(this,arguments)}function $(){return $=m()(t()().mark(function c(E){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,A.request)("/api/system/dict/type",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:E}));case 1:case"end":return s.stop()}},c)})),$.apply(this,arguments)}function y(c){return Z.apply(this,arguments)}function Z(){return Z=m()(t()().mark(function c(E){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,A.request)("/api/system/dict/type",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:E}));case 1:case"end":return s.stop()}},c)})),Z.apply(this,arguments)}function J(c){return q.apply(this,arguments)}function q(){return q=m()(t()().mark(function c(E){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,A.request)("/api/system/dict/type/".concat(E),{method:"DELETE"}));case 1:case"end":return s.stop()}},c)})),q.apply(this,arguments)}function ee(c){return(0,D.su)("/api/system/dict/type/export",{params:c},"dict_type_".concat(new Date().getTime(),".xlsx"))}function K(c){return V.apply(this,arguments)}function V(){return V=m()(t()().mark(function c(E){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,A.request)("/api/system/dict/type/optionselect",{params:C()({},E),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return s.stop()}},c)})),V.apply(this,arguments)}}}]);
