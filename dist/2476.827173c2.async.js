"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2476,167],{33867:function(ne,B,r){r.d(B,{iK:function(){return I},zc:function(){return G}});var I=function(i){return i[i.SUCCESS=200]="SUCCESS",i[i.ERROR=-1]="ERROR",i[i.TIMEOUT=401]="TIMEOUT",i.TYPE="success",i}({}),N=function(i){return i.GET="GET",i.POST="POST",i.PUT="PUT",i.DELETE="DELETE",i}({}),G=function(i){return i.JSON="application/json;charset=UTF-8",i.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",i.FORM_DATA="multipart/form-data;charset=UTF-8",i}({})},40167:function(ne,B,r){r.r(B);var I=r(67294),N=r(47116),G=r.n(N),i=r(78566),X=r.n(i),t=r(85893),M=(0,I.forwardRef)(function(V,O){var F,s=V.data;return(0,t.jsxs)("div",{ref:O,style:{padding:"20px",fontFamily:'"Microsoft YaHei", sans-serif',fontSize:"14px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"15px"},children:[(0,t.jsx)("div",{children:(0,t.jsxs)("h1",{style:{fontSize:"22px",fontWeight:"bold",marginBottom:"8px"},children:["\u51FA\u5E93\u5355\uFF1A",s.shipmentOrderNo]})}),(0,t.jsx)("div",{children:(0,t.jsx)(X(),{value:s.shipmentOrderNo,options:{displayValue:!1,width:1,height:50,format:"CODE128"}})})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px",marginBottom:"20px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u51FA\u5E93\u7C7B\u578B\uFF1A"}),s.shipmentOrderType]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u5BA2\u6237\uFF1A"}),s.merchantName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u4ED3\u5E93\uFF1A"}),s.warehouseName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u6570\u91CF\uFF1A"}),s.totalQuantity]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u521B\u5EFA\u4EBA\uFF1A"}),s.createBy]}),s.updateBy&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u64CD\u4F5C\u4EBA\uFF1A"}),s.updateBy]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u51FA\u5E93\u72B6\u6001\uFF1A"}),s.shipmentOrderStatus]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u8BA2\u5355\u53F7\uFF1A"}),s.orderNo]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u5E93\u533A\uFF1A"}),s.areaName]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u91D1\u989D\uFF1A"}),s.receivableAmount]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u521B\u5EFA\u65F6\u95F4\uFF1A"}),s.createTime]}),s.updateTime&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"\u64CD\u4F5C\u65F6\u95F4\uFF1A"}),s.updateTime]})]})]}),((F=s.table)===null||F===void 0?void 0:F.length)>0?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",margin:"15px 0",border:"1px solid"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u5546\u54C1\u540D\u79F0"}),(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u89C4\u683C"}),(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u5E93\u533A"}),(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u6279\u53F7"}),(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u751F\u4EA7\u65E5\u671F"}),(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"left"},children:"\u8FC7\u671F\u65E5\u671F"}),(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"right"},children:"\u6570\u91CF"}),(0,t.jsx)("th",{style:{border:"1px solid",padding:"10px",textAlign:"right"},children:"\u4EF7\u683C(\u5143)"})]})}),(0,t.jsxs)("tbody",{children:[s.table.map(function(l,g){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.itemName}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.skuName}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.areaName}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.batchNo||"-"}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.productionDate||"-"}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px"},children:l.expirationDate||"-"}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right"},children:l.quantity}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right"},children:l.amount})]},g)}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{colSpan:6,style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:"\u5408\u8BA1"}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:s.table.reduce(function(l,g){return l+(Number(g.quantity)||0)},0)||0}),(0,t.jsx)("td",{style:{border:"1px solid",padding:"8px",textAlign:"right",fontWeight:500},children:s.table.reduce(function(l,g){return l+(Number(g.amount)||0)},0).toFixed(2)||"0.00"})]})]})]})}):(0,t.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#999"},children:"\u6682\u65E0\u51FA\u5E93\u660E\u7EC6\u6570\u636E"})]})}),c=function(O){var F=O.data,s=O.onClose,l=O.loading,g=l===void 0?!1:l,A=O.visible,T=(0,I.useRef)(null),R=(0,N.useReactToPrint)({contentRef:T});return(0,I.useEffect)(function(){if(A){var L=setTimeout(function(){R()},100);return function(){return clearTimeout(L)}}},[A,R]),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{onClick:function(){return R()},children:"\u6253\u5370"}),(0,t.jsx)(M,{ref:T,data:F})]})};B.default=c},92476:function(ne,B,r){r.r(B);var I=r(9783),N=r.n(I),G=r(19632),i=r.n(G),X=r(15009),t=r.n(X),M=r(97857),c=r.n(M),V=r(99289),O=r.n(V),F=r(5574),s=r.n(F),l=r(67294),g=r(60960),A=r(77569),T=r(17788),R=r(2453),L=r(66309),$=r(78957),U=r(53531),ee=r(55241),b=r(83622),J=r(4393),K=r(78045),z=r(25278),D=r(96154),f=r(86548),S=r(48689),d=r(30019),W=r(48296),re=r(33160),v=r(24969),E=r(6110),ae=r(96069),fe=r(96875),We=r(76772),ve=r(92982),Ze=r(27484),Z=r.n(Ze),$e=r(72099),Ye=r(40167),n=r(85893),Ee=g.Z.Text,we=function(){var ue,ie=(0,We.useModel)("wms"),se=ie.warehouseMap,te=ie.areaMap,xe=ie.merchantMap,Ge=A.Z.useForm(),Ve=s()(Ge,1),je=Ve[0],ze=(0,l.useState)(!1),Oe=s()(ze,2),ge=Oe[0],Q=Oe[1],Qe=(0,l.useState)([]),ye=s()(Qe,2),He=ye[0],Pe=ye[1],ke=(0,l.useState)(0),Ce=s()(ke,2),Xe=Ce[0],Je=Ce[1],qe=(0,l.useState)([]),Me=s()(qe,2),Y=Me[0],q=Me[1],et=(0,l.useState)({}),Ae=s()(et,2),tt=Ae[0],Fe=Ae[1],nt=(0,l.useState)([]),Te=s()(nt,2),de=Te[0],rt=Te[1],at=(0,l.useState)([]),be=s()(at,2),le=be[0],ut=be[1],it=(0,l.useState)(null),Se=s()(it,2),oe=Se[0],_e=Se[1],st=(0,l.useState)(!1),Be=s()(st,2),Ot=Be[0],dt=Be[1],lt=(0,l.useState)(null),Ie=s()(lt,2),gt=Ie[0],ot=Ie[1],_t=(0,l.useState)({pageNum:1,pageSize:10,shipmentOrderNo:void 0,shipmentOrderType:-1,merchantId:void 0,orderNo:void 0,receivableAmount:void 0,shipmentOrderStatus:-2}),Le=s()(_t,2),x=Le[0],w=Le[1],ct=(0,l.useState)({visible:!1,currentOrder:null}),Ne=s()(ct,2),ce=Ne[0],pe=Ne[1];(0,l.useEffect)(function(){Promise.all([(0,ve.pX)("wms_shipment_status"),(0,ve.pX)("wms_shipment_type")]).then(function(u){var e=s()(u,2),a=e[0],o=e[1];rt(Object.values(a)),ut(Object.values(o))}),De()},[x.pageNum,x.pageSize]),(0,l.useEffect)(function(){De()},[x.shipmentOrderStatus]);var De=function(){var u=O()(t()().mark(function e(){var a,o;return t()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return Q(!0),p.prev=1,a=c()({},x),a.shipmentOrderStatus===-2&&(a.shipmentOrderStatus=void 0),a.shipmentOrderType===-1&&(a.shipmentOrderType=void 0),p.next=7,(0,ae.r)(a);case 7:o=p.sent,Pe(o.rows),Je(o.total),q([]);case 11:return p.prev=11,Q(!1),p.finish(11);case 14:case"end":return p.stop()}},e,null,[[1,,11,14]])}));return function(){return u.apply(this,arguments)}}(),pt=function(){w(function(e){return c()(c()({},e),{},{pageNum:1})})},Dt=function(){je.resetFields(),w({pageNum:1,pageSize:10,shipmentOrderNo:void 0,shipmentOrderType:-1,merchantId:void 0,orderNo:void 0,receivableAmount:void 0,shipmentOrderStatus:-2})},mt=function(){pe({visible:!0,currentOrder:null})},ht=function(){var u=O()(t()().mark(function e(a){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:T.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u51FA\u5E93\u5355\u3010".concat(a.shipmentOrderNo,"\u3011\u5417\uFF1F"),onOk:function(){var p=O()(t()().mark(function y(){return t()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return Q(!0),m.prev=1,m.next=4,(0,ae.C6)(a.id);case 4:R.ZP.success("\u5220\u9664\u6210\u529F"),De(),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(1),m.t0===409&&T.Z.error({title:"\u7CFB\u7EDF\u63D0\u793A",content:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u51FA\u5E93\u5355\u3010",a.shipmentOrderNo,"\u3011\u5DF2\u51FA\u5E93\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01"]}),(0,n.jsx)("div",{children:"\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406\uFF01"})]})});case 11:return m.prev=11,Q(!1),m.finish(11);case 14:case"end":return m.stop()}},y,null,[[1,8,11,14]])}));function H(){return p.apply(this,arguments)}return H}()});case 1:case"end":return _.stop()}},e)}));return function(a){return u.apply(this,arguments)}}(),ft=function(e){ot(e),dt(!0)},vt=function(e){var a=Y.indexOf(e.id);a!==-1?q(Y.filter(function(o){return o!==e.id})):(q([].concat(i()(Y),[e.id])),Re(e))},Re=function(){var u=O()(t()().mark(function e(a){var o,_,p;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return Fe(function(P){return c()(c()({},P),{},N()({},a.id,!0))}),y.prev=1,y.next=4,(0,fe.RN)(a.id);case 4:_=y.sent,(o=_.data)!==null&&o!==void 0&&o.length&&(p=_.data.map(function(P){var m,h;return c()(c()({},P),{},{warehouseName:(m=se.get(P.warehouseId))===null||m===void 0?void 0:m.warehouseName,areaName:(h=te.get(P.areaId))===null||h===void 0?void 0:h.areaName})}),Pe(function(P){return P.map(function(m){return m.id===a.id?c()(c()({},m),{},{details:p}):m})}));case 6:return y.prev=6,Fe(function(P){return c()(c()({},P),{},N()({},a.id,!1))}),y.finish(6);case 9:case"end":return y.stop()}},e,null,[[1,,6,9]])}));return function(a){return u.apply(this,arguments)}}(),Et=function(){var u=O()(t()().mark(function e(a){var o,_,p,H,y,P,m,h,Ue,Ke;return t()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return Q(!0),C.prev=1,C.next=4,Promise.all([(0,ae.kl)(a.id),(0,fe.RN)(a.id)]);case 4:P=C.sent,m=s()(P,2),h=m[0],Ue=m[1],Ke=Ue.data.map(function(j){var k,me,he;return{itemName:((k=j.itemSku)===null||k===void 0||(k=k.item)===null||k===void 0?void 0:k.itemName)||"-",skuName:((me=j.itemSku)===null||me===void 0?void 0:me.skuName)||"-",areaName:((he=te.get(j.areaId))===null||he===void 0?void 0:he.areaName)||"-",quantity:Number(j.quantity).toFixed(0),amount:j.amount?Number(j.amount).toFixed(2):"-",batchNo:j.batchNo||"-",productionDate:j.productionDate?Z()(j.productionDate).format("YYYY-MM-DD"):"-",expirationDate:j.expirationDate?Z()(j.expirationDate).format("YYYY-MM-DD"):"-"}}),_e({shipmentOrderNo:h.data.shipmentOrderNo,shipmentOrderType:(o=le.find(function(j){return j.value==h.data.shipmentOrderType}))===null||o===void 0?void 0:o.label,shipmentOrderStatus:(_=de.find(function(j){return j.value==h.data.shipmentOrderStatus}))===null||_===void 0?void 0:_.label,merchantName:((p=xe.get(h.data.merchantId))===null||p===void 0?void 0:p.merchantName)||"-",orderNo:h.data.orderNo||"-",warehouseName:((H=se.get(h.data.warehouseId))===null||H===void 0?void 0:H.warehouseName)||"-",areaName:((y=te.get(h.data.areaId))===null||y===void 0?void 0:y.areaName)||"-",totalQuantity:Number(h.data.totalQuantity).toFixed(0),receivableAmount:h.data.receivableAmount?"".concat(h.data.receivableAmount,"\u5143"):"",createBy:h.data.createBy,createTime:Z()(h.data.createTime).format("MM-DD HH:mm"),updateBy:h.data.updateBy,updateTime:h.data.updateTime?Z()(h.data.updateTime).format("MM-DD HH:mm"):"-",remark:h.data.remark,table:Ke}),C.next=16;break;case 12:C.prev=12,C.t0=C.catch(1),R.ZP.error("\u83B7\u53D6\u6253\u5370\u6570\u636E\u5931\u8D25"),console.error("Print error:",C.t0);case 16:return C.prev=16,Q(!1),C.finish(16);case 19:case"end":return C.stop()}},e,null,[[1,12,16,19]])}));return function(a){return u.apply(this,arguments)}}(),xt=[{title:"\u5355\u53F7/\u8BA2\u5355\u53F7",dataIndex:"shipmentOrderNo",render:function(e,a){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u5355\u53F7\uFF1A",e]}),a.orderNo&&(0,n.jsxs)("div",{children:["\u8BA2\u5355\u53F7\uFF1A",a.orderNo]})]})}},{title:"\u51FA\u5E93\u7C7B\u578B",dataIndex:"shipmentOrderType",render:function(e){var a;return(0,n.jsx)(L.Z,{color:"blue",children:(a=le.find(function(o){return o.value==e}))===null||a===void 0?void 0:a.label})}},{title:"\u5BA2\u6237",dataIndex:"merchantId",render:function(e){var a;return(0,n.jsx)("div",{children:(a=xe.get(e))===null||a===void 0?void 0:a.merchantName})}},{title:"\u4ED3\u5E93/\u5E93\u533A",render:function(e){var a,o;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u4ED3\u5E93\uFF1A",(a=se.get(e.warehouseId))===null||a===void 0?void 0:a.warehouseName]}),e.areaId&&(0,n.jsxs)("div",{children:["\u5E93\u533A\uFF1A",(o=te.get(e.areaId))===null||o===void 0?void 0:o.areaName]})]})}},{title:"\u51FA\u5E93\u72B6\u6001",dataIndex:"shipmentOrderStatus",render:function(e){var a;return(0,n.jsx)(L.Z,{color:e==="1"?"success":e=="-1"?"error":"processing",children:(a=de.find(function(o){return o.value==e}))===null||a===void 0?void 0:a.label})}},{title:"\u6570\u91CF/\u91D1\u989D(\u5143)",render:function(e){return(0,n.jsxs)("div",{children:[(0,n.jsxs)($.Z,{children:[(0,n.jsx)(Ee,{children:"\u6570\u91CF\uFF1A"}),(0,n.jsx)(U.Z,{value:Number(e.totalQuantity),precision:0})]}),(e.receivableAmount||e.receivableAmount===0)&&(0,n.jsxs)($.Z,{children:[(0,n.jsx)(Ee,{children:"\u91D1\u989D\uFF1A"}),(0,n.jsx)(U.Z,{value:Number(e.receivableAmount),precision:2})]})]})}},{title:"\u521B\u5EFA/\u64CD\u4F5C",render:function(e){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",e.createBy]}),e.updateBy&&(0,n.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",e.updateBy]})]})}},{title:"\u521B\u5EFA\u65F6\u95F4/\u64CD\u4F5C\u65F6\u95F4",render:function(e){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:["\u521B\u5EFA\uFF1A",Z()(e.createTime).format("MM-DD HH:mm")]}),(0,n.jsxs)("div",{children:["\u64CD\u4F5C\uFF1A",e.updateTime?Z()(e.updateTime).format("MM-DD HH:mm"):"-"]})]})}},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u64CD\u4F5C",render:function(e){return(0,n.jsxs)($.Z,{direction:"vertical",children:[(0,n.jsxs)($.Z,{children:[(0,n.jsx)(ee.Z,{content:"\u51FA\u5E93\u5355\u3010".concat(e.shipmentOrderNo,"\u3011\u5DF2").concat(e.shipmentOrderStatus=="1"?"\u51FA\u5E93":"\u4F5C\u5E9F","\uFF0C\u65E0\u6CD5\u4FEE\u6539\uFF01"),trigger:"hover",disabled:e.shipmentOrderStatus=="0",children:(0,n.jsx)(b.ZP,{type:"link",icon:(0,n.jsx)(f.Z,{}),onClick:function(){return ft(e)},disabled:[-1,1].includes(e.shipmentOrderStatus),children:"\u4FEE\u6539"})}),(0,n.jsx)(b.ZP,{type:"link",onClick:function(){return vt(e)},children:Y.includes(e.id)?"\u6536\u8D77":"\u67E5\u770B"})]}),(0,n.jsxs)($.Z,{children:[(0,n.jsx)(ee.Z,{content:"\u51FA\u5E93\u5355\u3010".concat(e.shipmentOrderNo,"\u3011\u5DF2\u51FA\u5E93\uFF0C\u65E0\u6CD5\u5220\u9664\uFF01"),trigger:"hover",disabled:[-1,0].includes(e.shipmentOrderStatus),children:(0,n.jsx)(b.ZP,{type:"link",danger:!0,icon:(0,n.jsx)(S.Z,{}),onClick:function(){return ht(e)},disabled:e.shipmentOrderStatus===1,children:"\u5220\u9664"})}),(0,n.jsx)(b.ZP,{type:"link",icon:(0,n.jsx)(d.Z,{}),onClick:function(){return Et(e)},children:"\u6253\u5370"})]})]})}}];return(0,n.jsxs)(E._z,{children:[(0,n.jsxs)(J.Z,{loading:ge,children:[(0,n.jsx)(J.Z,{children:(0,n.jsxs)(A.Z,{form:je,layout:"inline",children:[(0,n.jsx)(A.Z.Item,{label:"\u51FA\u5E93\u72B6\u6001",name:"shipmentOrderStatus",children:(0,n.jsxs)(K.ZP.Group,{value:x.shipmentOrderStatus,onChange:function(e){return w(c()(c()({},x),{},{shipmentOrderStatus:e.target.value}))},children:[(0,n.jsx)(K.ZP.Button,{value:-2,children:"\u5168\u90E8"}),de.map(function(u){return(0,n.jsx)(K.ZP.Button,{value:u.value,children:u.label},u.value)})]})}),(0,n.jsx)(A.Z.Item,{label:"\u51FA\u5E93\u7C7B\u578B",name:"shipmentOrderType",children:(0,n.jsxs)(K.ZP.Group,{value:x.shipmentOrderType,onChange:function(e){return w(c()(c()({},x),{},{shipmentOrderType:e.target.value}))},children:[(0,n.jsx)(K.ZP.Button,{value:-1,children:"\u5168\u90E8"}),le.map(function(u){return(0,n.jsx)(K.ZP.Button,{value:u.value,children:u.label},u.value)})]})}),(0,n.jsx)(A.Z.Item,{label:"\u51FA\u5E93\u5355\u53F7",name:"shipmentOrderNo",children:(0,n.jsx)(z.Z,{placeholder:"\u8BF7\u8F93\u5165\u51FA\u5E93\u5355\u53F7",value:x.shipmentOrderNo,onChange:function(e){return w(c()(c()({},x),{},{shipmentOrderNo:e.target.value}))}})}),(0,n.jsx)(A.Z.Item,{label:"\u8BA2\u5355\u53F7",name:"orderNo",children:(0,n.jsx)(z.Z,{placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7",value:x.orderNo,onChange:function(e){return w(c()(c()({},x),{},{orderNo:e.target.value}))}})}),(0,n.jsxs)(A.Z.Item,{children:[(0,n.jsx)(b.ZP,{type:"primary",icon:(0,n.jsx)(W.Z,{}),onClick:pt,children:"\u641C\u7D22"}),(0,n.jsx)(b.ZP,{icon:(0,n.jsx)(re.Z,{}),onClick:Dt,style:{marginLeft:8},children:"\u91CD\u7F6E"})]})]})}),(0,n.jsxs)(J.Z,{style:{marginTop:20},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,n.jsx)(g.Z.Title,{level:4,style:{margin:0},children:"\u51FA\u5E93\u5355"}),(0,n.jsx)(b.ZP,{type:"primary",icon:(0,n.jsx)(v.Z,{}),onClick:mt,children:"\u65B0\u589E"})]}),(0,n.jsx)(D.Z,{columns:xt,dataSource:He,rowKey:"id",bordered:!0,loading:ge,expandable:{expandedRowKeys:Y,onExpand:function(e,a){e?(q([].concat(i()(Y),[a.id])),Re(a)):q(Y.filter(function(o){return o!==a.id}))},expandedRowRender:function(e){return(0,n.jsxs)("div",{style:{padding:"0 50px 20px 50px"},children:[(0,n.jsx)(g.Z.Title,{level:5,children:"\u5546\u54C1\u660E\u7EC6"}),(0,n.jsx)(D.Z,{dataSource:e.details,loading:tt[e.id],columns:[{title:"\u5546\u54C1\u540D\u79F0",render:function(o,_){var p;return(0,n.jsx)("div",{children:_==null||(p=_.itemSku)===null||p===void 0||(p=p.item)===null||p===void 0?void 0:p.itemName})}},{title:"\u89C4\u683C\u540D\u79F0",render:function(o,_){var p;return(0,n.jsx)("div",{children:_==null||(p=_.itemSku)===null||p===void 0?void 0:p.skuName})}},{title:"\u5E93\u533A",dataIndex:"areaName"},{title:"\u6570\u91CF",align:"right",render:function(o,_){return(0,n.jsx)(U.Z,{value:Number(_.quantity),precision:0})}},{title:"\u4EF7\u683C(\u5143)",align:"right",render:function(o,_){return(0,n.jsx)(U.Z,{value:_.amount?Number(_.amount):"-",precision:2})}},{title:"\u6279\u53F7",dataIndex:"batchNo"},{title:"\u751F\u4EA7\u65E5\u671F",render:function(o,_){return(0,n.jsx)("div",{children:_.productionDate?Z()(_.productionDate).format("YYYY-MM-DD"):"-"})}},{title:"\u8FC7\u671F\u65E5\u671F",render:function(o,_){return(0,n.jsx)("div",{children:_.expirationDate?Z()(_.expirationDate).format("YYYY-MM-DD"):"-"})}}]})]})}},pagination:{total:Xe,current:x.pageNum,pageSize:x.pageSize,onChange:function(e,a){w(c()(c()({},x),{},{pageNum:e,pageSize:a}))},showSizeChanger:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761")}}})]})]}),(0,n.jsx)(T.Z,{title:ce.currentOrder?"\u4FEE\u6539\u79FB\u5E93\u5355":"\u65B0\u589E\u79FB\u5E93\u5355",open:ce.visible,onCancel:function(){return pe(function(e){return c()(c()({},e),{},{editVisible:!1})})},footer:null,width:"95%",destroyOnClose:!0,children:(0,n.jsx)($e.default,{id:(ue=ce.currentOrder)===null||ue===void 0?void 0:ue.id,onCancel:function(){return pe(function(e){return c()(c()({},e),{},{editVisible:!1})})}})}),(0,n.jsx)(T.Z,{open:!!oe,onCancel:function(){return _e(null)},footer:null,width:800,children:oe&&(0,n.jsx)(Ye.default,{data:oe,onClose:function(){return _e(null)},visible:!1})})]})};B.default=we},92982:function(ne,B,r){r.d(B,{Hr:function(){return A},QK:function(){return K},Vd:function(){return s},a7:function(){return $},jK:function(){return O},n2:function(){return J},oH:function(){return R},pX:function(){return l},sF:function(){return ee}});var I=r(97857),N=r.n(I),G=r(15009),i=r.n(G),X=r(99289),t=r.n(X),M=r(76772),c=r(33867),V=r(30964);function O(D){return F.apply(this,arguments)}function F(){return F=t()(i()().mark(function D(f){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type/list",{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:f}));case 1:case"end":return d.stop()}},D)})),F.apply(this,arguments)}function s(D){return(0,M.request)("/api/system/dict/type/".concat(D),{method:"GET"})}function l(D,f){return g.apply(this,arguments)}function g(){return g=t()(i()().mark(function D(f,S){var d,W;return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("getDictValueEnum resp:",f),v.next=3,(0,M.request)("/api/system/dict/data/type/".concat(f),{method:"GET"});case 3:if(d=v.sent,console.log("getDictValueEnum resp:",f,d),d.code!==c.iK.SUCCESS){v.next=11;break}return W={},d.data.forEach(function(E){W[E.dictValue]={text:E.dictLabel,label:E.dictLabel,value:S?Number(E.dictValue):E.dictValue,key:E.dictCode,listClass:E.listClass,status:E.listClass}}),v.abrupt("return",W);case 11:return v.abrupt("return",{});case 12:case"end":return v.stop()}},D)})),g.apply(this,arguments)}function A(D,f){return T.apply(this,arguments)}function T(){return T=t()(i()().mark(function D(f,S){var d,W;return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,M.request)("/api/system/dict/data/type/".concat(f),{method:"GET"});case 2:if(d=v.sent,d.code!==200){v.next=6;break}return W=d.data.map(function(E){return{text:E.dictLabel,label:E.dictLabel,value:S?Number(E.dictValue):E.dictValue,key:E.dictCode,listClass:E.listClass,status:E.listClass}}),v.abrupt("return",W);case 6:return v.abrupt("return",[]);case 7:case"end":return v.stop()}},D)})),T.apply(this,arguments)}function R(D){return L.apply(this,arguments)}function L(){return L=t()(i()().mark(function D(f){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:f}));case 1:case"end":return d.stop()}},D)})),L.apply(this,arguments)}function $(D){return U.apply(this,arguments)}function U(){return U=t()(i()().mark(function D(f){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:f}));case 1:case"end":return d.stop()}},D)})),U.apply(this,arguments)}function ee(D){return b.apply(this,arguments)}function b(){return b=t()(i()().mark(function D(f){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type/".concat(f),{method:"DELETE"}));case 1:case"end":return d.stop()}},D)})),b.apply(this,arguments)}function J(D){return(0,V.su)("/api/system/dict/type/export",{params:D},"dict_type_".concat(new Date().getTime(),".xlsx"))}function K(D){return z.apply(this,arguments)}function z(){return z=t()(i()().mark(function D(f){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,M.request)("/api/system/dict/type/optionselect",{params:N()({},f),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return d.stop()}},D)})),z.apply(this,arguments)}}}]);
