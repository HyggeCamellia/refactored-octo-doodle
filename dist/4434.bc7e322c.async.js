"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4434,3531,1122],{4434:function(ye,z,n){n.r(z);var _=n(19632),Z=n.n(_),k=n(97857),T=n.n(k),G=n(15009),L=n.n(G),X=n(99289),N=n.n(X),Y=n(5574),y=n.n(Y),O=n(67294),Q=n(34041),p=n(77569),V=n(2453),U=n(53531),J=n(4393),R=n(78045),$=n(25278),m=n(83622),D=n(84567),B=n(96154),c=n(6110),K=n(48296),de=n(87740),ce=n(24490),Ie=n(54758),ne=n(94605),_e=n(76772),e=n(85893),re=Q.Z.Option,s=function(){var d=p.Z.useForm(),a=y()(d,1),i=a[0],P=(0,O.useState)(!1),E=y()(P,2),v=E[0],f=E[1],I=(0,O.useState)([]),w=y()(I,2),M=w[0],C=w[1],g=(0,O.useState)([]),b=y()(g,2),W=b[0],me=b[1],fe=(0,O.useState)([]),ae=y()(fe,2),se=ae[0],De=ae[1],ve=(0,O.useState)(0),oe=y()(ve,2),he=oe[0],A=oe[1],pe=(0,O.useState)("warehouse"),ue=y()(pe,2),j=ue[0],le=ue[1],Ee=(0,O.useState)(!1),q=y()(Ee,2),ie=q[0],Pe=q[1],Me=(0,O.useState)({}),Ce=y()(Me,2),Te=Ce[0],we=Ce[1],be=(0,_e.useModel)("@@initialState"),ge=be.initialState,H=ge==null?void 0:ge.wmsStore,S=(0,O.useRef)({pageNum:1,pageSize:10,skuId:void 0,warehouseId:void 0,areaId:void 0,itemName:void 0,itemCode:void 0,skuName:void 0,skuCode:void 0,minQuantity:void 0});(0,O.useEffect)(function(){Ae(),Re(),ee()},[]);var Ae=function(){var o=N()(L()().mark(function r(){var t;return L()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,ne.d8)();case 3:t=u.sent,console.log("warehouseList:",t),me(t.data),u.next=11;break;case 8:u.prev=8,u.t0=u.catch(0),V.ZP.error("\u83B7\u53D6\u4ED3\u5E93\u5217\u8868\u5931\u8D25");case 11:case"end":return u.stop()}},r,null,[[0,8]])}));return function(){return o.apply(this,arguments)}}(),Re=function(){var o=N()(L()().mark(function r(){var t;return L()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,Ie.sA)();case 3:t=u.sent,console.log("area:",t),De(t.data),u.next=11;break;case 8:u.prev=8,u.t0=u.catch(0),V.ZP.error("\u83B7\u53D6\u5E93\u533A\u5217\u8868\u5931\u8D25");case 11:case"end":return u.stop()}},r,null,[[0,8]])}));return function(){return o.apply(this,arguments)}}(),ee=function(){var o=N()(L()().mark(function r(){var t,h,u;return L()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return t=T()({},S.current),ie?t.minQuantity=1:t.minQuantity=void 0,f(!0),x.prev=3,console.log("getList queryType:",j),x.next=7,(0,ce.Wc)(t,j);case 7:h=x.sent,u=h.rows.map(function(F){return j==="warehouse"?T()(T()({},F),{},{warehouseIdAndItemId:"".concat(F.warehouseId,"-").concat(F.itemSku.itemId)}):j==="area"?T()(T()({},F),{},{areaIdAndItemId:"".concat(F.areaId,"-").concat(F.itemSku.itemId)}):T()(T()({},F),{},{itemId:F.itemSku.itemId,skuIdAndWarehouseId:"".concat(F.skuId,"-").concat(F.warehouseId)})}),console.log("processedData:",u),C(u),A(h.total),Fe(u),x.next=18;break;case 15:x.prev=15,x.t0=x.catch(3),V.ZP.error("\u83B7\u53D6\u5E93\u5B58\u6570\u636E\u5931\u8D25");case 18:return x.prev=18,f(!1),x.finish(18);case 21:case"end":return x.stop()}},r,null,[[3,15,18,21]])}));return function(){return o.apply(this,arguments)}}(),Fe=function(r){var t={};if(j==="warehouse"){var h="",u=1;r.forEach(function(te,x){te.warehouseId===h?u++:(x>0&&(t["".concat(x-u,"-0")]=u),h=te.warehouseId,u=1)}),r.length>0&&(t["".concat(r.length-u,"-0")]=u)}we(t)},je=function(){S.current.pageNum=1,ee()},Le=function(){i.resetFields(),S.current={pageNum:1,pageSize:10,skuId:void 0,warehouseId:void 0,areaId:void 0,itemName:void 0,itemCode:void 0,skuName:void 0,skuCode:void 0,minQuantity:void 0},je()},Ne=function(r){le(r.target.value),S.current.areaId=void 0,i.setFieldsValue({areaId:void 0}),S.current.pageNum=1};(0,O.useEffect)(function(){ee()},[j]);var Be=function(r){Pe(r.target.checked),S.current.pageNum=1,ee()},We=function(r){S.current.warehouseId=r,S.current.areaId=void 0,i.setFieldsValue({areaId:void 0})},Ze=function(r){S.current.pageNum=r.current,S.current.pageSize=r.pageSize,ee()},Se=function(r){var t=W.find(function(h){return h.id===r})||(H==null?void 0:H.warehouseMap.get(r));return console.log("warehouse:",t),console.log("warehouseName:",(t==null?void 0:t.warehouseName)||""),(t==null?void 0:t.warehouseName)||""},xe=function(r){console.log("getAreaName id:",r);var t=se.find(function(h){return h.id===r})||(H==null?void 0:H.areaMap.get(r));return console.log("area:",t),console.log((t==null?void 0:t.areaName)||""),(t==null?void 0:t.areaName)||""},Oe=j==="warehouse"||j==="area"?[{title:"\u4ED3\u5E93",dataIndex:"warehouseId",render:function(r){return(0,e.jsx)("div",{children:Se(r)})},onCell:function(r,t){return{rowSpan:Te["".concat(t,"-0")]||0}}}].concat(Z()(j==="area"?[{title:"\u5E93\u533A",dataIndex:"areaId",render:function(r,t){var h=xe(r);return(0,e.jsx)("div",{children:h})}}]:[]),[{title:"\u5546\u54C1\u4FE1\u606F",dataIndex:j==="warehouse"?"warehouseIdAndItemId":"areaIdAndItemId",render:function(r,t){return console.log("\u5546\u54C1\u4FE1\u606F queryType:",j),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:t.item.itemName}),t.item.itemCode&&(0,e.jsxs)("div",{children:["\u5546\u54C1\u7F16\u53F7\uFF1A",t.item.itemCode]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",dataIndex:"skuId",render:function(r,t){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:t.itemSku.skuName}),t.itemSku.skuCode&&(0,e.jsxs)("div",{children:["\u89C4\u683C\u7F16\u53F7\uFF1A",t.itemSku.skuCode]})]})}},{title:"\u5E93\u5B58",dataIndex:"quantity",align:"right",render:function(r){return(0,e.jsx)(U.Z,{value:r,precision:0,valueStyle:{fontSize:"14px"}})}}]):[{title:"\u5546\u54C1\u4FE1\u606F",dataIndex:"itemId",render:function(r,t){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:t.item.itemName}),t.item.itemCode&&(0,e.jsxs)("div",{children:["\u5546\u54C1\u7F16\u53F7\uFF1A",t.item.itemCode]})]})}},{title:"\u89C4\u683C\u4FE1\u606F",dataIndex:"skuId",render:function(r,t){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:t.itemSku.skuName}),t.itemSku.skuCode&&(0,e.jsxs)("div",{children:["\u89C4\u683C\u7F16\u53F7\uFF1A",t.itemSku.skuCode]})]})}},{title:"\u4ED3\u5E93",dataIndex:"skuIdAndWarehouseId",render:function(r,t){return(0,e.jsx)("div",{children:Se(t.warehouseId)})}},{title:"\u6240\u5C5E\u5E93\u533A",dataIndex:"areaName",render:function(r,t){return(0,e.jsx)("div",{children:xe(t.areaId)})}},{title:"\u5E93\u5B58",dataIndex:"quantity",align:"right",render:function(r){return(0,e.jsx)(U.Z,{value:r,precision:0,valueStyle:{fontSize:"14px"}})}}];return console.log("columns:",Oe),(0,e.jsxs)(c._z,{children:[(0,e.jsx)(J.Z,{children:(0,e.jsx)(p.Z,{form:i,layout:"inline",onValuesChange:function(r){Object.entries(r).forEach(function(t){var h=y()(t,2),u=h[0],te=h[1];S.current[u]=te})},children:(0,e.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsx)(p.Z.Item,{label:"\u7EF4\u5EA6",name:"queryType",initialValue:j,children:(0,e.jsxs)(R.ZP.Group,{onChange:Ne,children:[(0,e.jsx)(R.ZP.Button,{value:"warehouse",children:"\u4ED3\u5E93"}),(0,e.jsx)(R.ZP.Button,{value:"area",children:"\u5E93\u533A"}),(0,e.jsx)(R.ZP.Button,{value:"item",children:"\u5546\u54C1"})]})})}),(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsx)(p.Z.Item,{label:"\u4ED3\u5E93",name:"warehouseId",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93",onChange:We,allowClear:!0,showSearch:!0,optionFilterProp:"label",children:W.map(function(o){return(0,e.jsx)(re,{value:o.id,label:o.warehouseName,children:o.warehouseName},o.id)})})})}),(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsx)(p.Z.Item,{label:"\u5E93\u533A",name:"areaId",children:(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u5E93\u533A",disabled:!S.current.warehouseId||j==="item",allowClear:!0,showSearch:!0,optionFilterProp:"label",children:se.filter(function(o){return o.warehouseId===S.current.warehouseId}).map(function(o){return(0,e.jsx)(re,{value:o.id,label:o.areaName,children:o.areaName},o.id)})})})}),(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsx)(p.Z.Item,{label:"\u5546\u54C1\u540D\u79F0",name:"itemName",children:(0,e.jsx)($.Z,{placeholder:"\u5546\u54C1\u540D\u79F0",allowClear:!0})})}),(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsx)(p.Z.Item,{label:"\u5546\u54C1\u7F16\u53F7",name:"itemCode",children:(0,e.jsx)($.Z,{placeholder:"\u5546\u54C1\u7F16\u53F7",allowClear:!0})})}),(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsx)(p.Z.Item,{label:"\u89C4\u683C\u540D\u79F0",name:"skuName",children:(0,e.jsx)($.Z,{placeholder:"\u89C4\u683C\u540D\u79F0",allowClear:!0})})}),(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsx)(p.Z.Item,{label:"\u89C4\u683C\u7F16\u53F7",name:"skuCode",children:(0,e.jsx)($.Z,{placeholder:"\u89C4\u683C\u7F16\u53F7",allowClear:!0})})}),(0,e.jsx)("div",{style:{width:"calc(100% / 3)",padding:"8px"},children:(0,e.jsxs)(p.Z.Item,{children:[(0,e.jsx)(m.ZP,{type:"primary",icon:(0,e.jsx)(K.Z,{}),onClick:je,children:"\u641C\u7D22"}),(0,e.jsx)(m.ZP,{icon:(0,e.jsx)(de.Z,{}),onClick:Le,style:{marginLeft:8},children:"\u91CD\u7F6E"})]})})]})})}),(0,e.jsxs)(J.Z,{style:{marginTop:"20px"},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[(0,e.jsx)("div",{style:{fontSize:"large"},children:"\u5E93\u5B58\u7EDF\u8BA1"}),(0,e.jsx)(D.Z,{checked:ie,onChange:Be,children:"\u8FC7\u6EE4\u6389\u5E93\u5B58\u4E3A0\u7684\u5546\u54C1"})]}),(0,e.jsx)(B.Z,{dataSource:M,columns:Oe,rowKey:function(r){return"".concat(r.skuId,"-").concat(r.warehouseId,"-").concat(r.areaId||"")},loading:v,bordered:!0,pagination:{current:S.current.pageNum,pageSize:S.current.pageSize,total:he,showSizeChanger:!0,onChange:Ze},scroll:{x:"max-content"}})]})]})};z.default=s},24490:function(ye,z,n){n.d(z,{B3:function(){return X},Wc:function(){return Y}});var _=n(15009),Z=n.n(_),k=n(99289),T=n.n(k),G=n(76772),L=n(30964);function X(m){return N.apply(this,arguments)}function N(){return N=T()(Z()().mark(function m(D){return Z()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,G.request)("/api/wms/inventory/list",{method:"GET",params:D}));case 1:case"end":return c.stop()}},m)})),N.apply(this,arguments)}function Y(m,D){return y.apply(this,arguments)}function y(){return y=T()(Z()().mark(function m(D,B){return Z()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",(0,G.request)("/api/wms/inventory/boardList/".concat(B),{method:"GET",params:D}));case 1:case"end":return K.stop()}},m)})),y.apply(this,arguments)}function O(m){return request("/api/wms/inventory/".concat(m),{method:"GET"})}function Q(m){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function m(D){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",request("/api/wms/inventory",{method:"POST",data:D}));case 1:case"end":return c.stop()}},m)})),p.apply(this,arguments)}function V(m){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function m(D){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",request("/api/wms/inventory",{method:"PUT",data:D}));case 1:case"end":return c.stop()}},m)})),U.apply(this,arguments)}function J(m){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function m(D){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",request("/api/wms/inventory/".concat(D),{method:"DELETE"}));case 1:case"end":return c.stop()}},m)})),R.apply(this,arguments)}function $(m,D){return downLoadXlsx("/api/wms/inventory/export",{params:m},"inventory_".concat(new Date().getTime(),".xlsx"))}},53531:function(ye,z,n){n.d(z,{Z:function(){return re}});var _=n(67294),Z=n(56790),k=n(75164),T=n(96159),G=n(93967),L=n.n(G),X=n(64217),N=n(53124),Y=n(48054),O=s=>{const{value:l,formatter:d,precision:a,decimalSeparator:i,groupSeparator:P="",prefixCls:E}=s;let v;if(typeof d=="function")v=d(l);else{const f=String(l),I=f.match(/^(-?)(\d*)(\.(\d+))?$/);if(!I||f==="-")v=f;else{const w=I[1];let M=I[2]||"0",C=I[4]||"";M=M.replace(/\B(?=(\d{3})+(?!\d))/g,P),typeof a=="number"&&(C=C.padEnd(a,"0").slice(0,a>0?a:0)),C&&(C=`${i}${C}`),v=[_.createElement("span",{key:"int",className:`${E}-content-value-int`},w,M),C&&_.createElement("span",{key:"decimal",className:`${E}-content-value-decimal`},C)]}}return _.createElement("span",{className:`${E}-content-value`},v)},Q=n(14747),p=n(83559),V=n(83262);const U=s=>{const{componentCls:l,marginXXS:d,padding:a,colorTextDescription:i,titleFontSize:P,colorTextHeading:E,contentFontSize:v,fontFamily:f}=s;return{[l]:Object.assign(Object.assign({},(0,Q.Wf)(s)),{[`${l}-title`]:{marginBottom:d,color:i,fontSize:P},[`${l}-skeleton`]:{paddingTop:a},[`${l}-content`]:{color:E,fontSize:v,fontFamily:f,[`${l}-content-value`]:{display:"inline-block",direction:"ltr"},[`${l}-content-prefix, ${l}-content-suffix`]:{display:"inline-block"},[`${l}-content-prefix`]:{marginInlineEnd:d},[`${l}-content-suffix`]:{marginInlineStart:d}}})}},J=s=>{const{fontSizeHeading3:l,fontSize:d}=s;return{titleFontSize:d,contentFontSize:l}};var R=(0,p.I$)("Statistic",s=>{const l=(0,V.IX)(s,{});return U(l)},J),$=function(s,l){var d={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&l.indexOf(a)<0&&(d[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)l.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(d[a[i]]=s[a[i]]);return d},D=_.forwardRef((s,l)=>{const{prefixCls:d,className:a,rootClassName:i,style:P,valueStyle:E,value:v=0,title:f,valueRender:I,prefix:w,suffix:M,loading:C=!1,formatter:g,precision:b,decimalSeparator:W=".",groupSeparator:me=",",onMouseEnter:fe,onMouseLeave:ae}=s,se=$(s,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:De,direction:ve,className:oe,style:he}=(0,N.dj)("statistic"),A=De("statistic",d),[pe,ue,j]=R(A),le=_.createElement(O,{decimalSeparator:W,groupSeparator:me,prefixCls:A,formatter:g,precision:b,value:v}),Ee=L()(A,{[`${A}-rtl`]:ve==="rtl"},oe,a,i,ue,j),q=_.useRef(null);_.useImperativeHandle(l,()=>({nativeElement:q.current}));const ie=(0,X.Z)(se,{aria:!0,data:!0});return pe(_.createElement("div",Object.assign({},ie,{ref:q,className:Ee,style:Object.assign(Object.assign({},he),P),onMouseEnter:fe,onMouseLeave:ae}),f&&_.createElement("div",{className:`${A}-title`},f),_.createElement(Y.Z,{paragraph:!1,loading:C,className:`${A}-skeleton`},_.createElement("div",{style:E,className:`${A}-content`},w&&_.createElement("span",{className:`${A}-content-prefix`},w),I?I(le):le,M&&_.createElement("span",{className:`${A}-content-suffix`},M)))))});const B=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function c(s,l){let d=s;const a=/\[[^\]]*]/g,i=(l.match(a)||[]).map(f=>f.slice(1,-1)),P=l.replace(a,"[]"),E=B.reduce((f,[I,w])=>{if(f.includes(I)){const M=Math.floor(d/w);return d-=M*w,f.replace(new RegExp(`${I}+`,"g"),C=>{const g=C.length;return M.toString().padStart(g,"0")})}return f},P);let v=0;return E.replace(a,()=>{const f=i[v];return v+=1,f})}function K(s,l,d){const{format:a=""}=l,i=new Date(s).getTime(),P=Date.now(),E=Math.max(d?i-P:P-i,0);return c(E,a)}var de=function(s,l){var d={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&l.indexOf(a)<0&&(d[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(s);i<a.length;i++)l.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(s,a[i])&&(d[a[i]]=s[a[i]]);return d};function ce(s){return new Date(s).getTime()}var ne=s=>{const{value:l,format:d="HH:mm:ss",onChange:a,onFinish:i,type:P}=s,E=de(s,["value","format","onChange","onFinish","type"]),v=P==="countdown",[f,I]=_.useState(null),w=(0,Z.zX)(()=>{const g=Date.now(),b=ce(l);I({});const W=v?b-g:g-b;return a==null||a(W),v&&b<g?(i==null||i(),!1):!0});_.useEffect(()=>{let g;const b=()=>k.Z.cancel(g),W=()=>{g=(0,k.Z)(()=>{w()&&W()})};return W(),b},[l,v]),_.useEffect(()=>{I({})},[]);const M=(g,b)=>f?K(g,Object.assign(Object.assign({},b),{format:d}),v):"-",C=g=>(0,T.Tm)(g,{title:void 0});return _.createElement(D,Object.assign({},E,{value:l,valueRender:C,formatter:M}))};const _e=s=>_.createElement(ne,Object.assign({},s,{type:"countdown"}));var e=_.memo(_e);D.Timer=ne,D.Countdown=e;var re=D}}]);
