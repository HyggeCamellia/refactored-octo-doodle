"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8394],{31199:function(q,L,e){var T=e(1413),o=e(91),x=e(67294),t=e(45502),A=e(85893),M=["fieldProps","min","proFieldProps","max"],h=function(i,D){var l=i.fieldProps,j=i.min,m=i.proFieldProps,C=i.max,c=(0,o.Z)(i,M);return(0,A.jsx)(t.Z,(0,T.Z)({valueType:"digit",fieldProps:(0,T.Z)({min:j,max:C},l),ref:D,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:m},c))},s=x.forwardRef(h);L.Z=s},86615:function(q,L,e){var T=e(1413),o=e(91),x=e(22270),t=e(78045),A=e(67294),M=e(90789),h=e(45502),s=e(85893),v=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],i=A.forwardRef(function(m,C){var c=m.fieldProps,u=m.options,p=m.radioType,a=m.layout,_=m.proFieldProps,O=m.valueEnum,n=(0,o.Z)(m,v);return(0,s.jsx)(h.Z,(0,T.Z)((0,T.Z)({valueType:p==="button"?"radioButton":"radio",ref:C,valueEnum:(0,x.h)(O,void 0)},n),{},{fieldProps:(0,T.Z)({options:u,layout:a},c),proFieldProps:_,filedConfig:{customLightMode:!0}}))}),D=A.forwardRef(function(m,C){var c=m.fieldProps,u=m.children;return(0,s.jsx)(t.ZP,(0,T.Z)((0,T.Z)({},c),{},{ref:C,children:u}))}),l=(0,M.G)(D,{valuePropName:"checked",ignoreWidth:!0}),j=l;j.Group=i,j.Button=t.ZP.Button,j.displayName="ProFormComponent",L.Z=j},64317:function(q,L,e){var T=e(1413),o=e(91),x=e(22270),t=e(67294),A=e(66758),M=e(45502),h=e(85893),s=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],v=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],i=function(c,u){var p=c.fieldProps,a=c.children,_=c.params,O=c.proFieldProps,n=c.mode,J=c.valueEnum,W=c.request,F=c.showSearch,f=c.options,g=(0,o.Z)(c,s),Z=(0,t.useContext)(A.Z);return(0,h.jsx)(M.Z,(0,T.Z)((0,T.Z)({valueEnum:(0,x.h)(J),request:W,params:_,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,T.Z)({options:f,mode:n,showSearch:F,getPopupContainer:Z.getPopupContainer},p),ref:u,proFieldProps:O},g),{},{children:a}))},D=t.forwardRef(function(C,c){var u=C.fieldProps,p=C.children,a=C.params,_=C.proFieldProps,O=C.mode,n=C.valueEnum,J=C.request,W=C.options,F=(0,o.Z)(C,v),f=(0,T.Z)({options:W,mode:O||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},u),g=(0,t.useContext)(A.Z);return(0,h.jsx)(M.Z,(0,T.Z)((0,T.Z)({valueEnum:(0,x.h)(n),request:J,params:a,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,T.Z)({getPopupContainer:g.getPopupContainer},f),ref:c,proFieldProps:_},F),{},{children:p}))}),l=t.forwardRef(i),j=D,m=l;m.SearchSelect=j,m.displayName="ProFormComponent",L.Z=m},90672:function(q,L,e){var T=e(1413),o=e(91),x=e(67294),t=e(45502),A=e(85893),M=["fieldProps","proFieldProps"],h=function(v,i){var D=v.fieldProps,l=v.proFieldProps,j=(0,o.Z)(v,M);return(0,A.jsx)(t.Z,(0,T.Z)({ref:i,valueType:"textarea",fieldProps:D,proFieldProps:l},j))};L.Z=x.forwardRef(h)},5966:function(q,L,e){var T=e(97685),o=e(1413),x=e(91),t=e(21770),A=e(77569),M=e(55241),h=e(98423),s=e(67294),v=e(45502),i=e(85893),D=["fieldProps","proFieldProps"],l=["fieldProps","proFieldProps"],j="text",m=function(a){var _=a.fieldProps,O=a.proFieldProps,n=(0,x.Z)(a,D);return(0,i.jsx)(v.Z,(0,o.Z)({valueType:j,fieldProps:_,filedConfig:{valueType:j},proFieldProps:O},n))},C=function(a){var _=(0,t.Z)(a.open||!1,{value:a.open,onChange:a.onOpenChange}),O=(0,T.Z)(_,2),n=O[0],J=O[1];return(0,i.jsx)(A.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(F){var f,g=F.getFieldValue(a.name||[]);return(0,i.jsx)(M.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(r){return r&&r.parentNode?r.parentNode:r},onOpenChange:function(r){return J(r)},content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(f=a.statusRender)===null||f===void 0?void 0:f.call(a,g),a.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:a.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},a.popoverProps),{},{open:n,children:a.children}))}})},c=function(a){var _=a.fieldProps,O=a.proFieldProps,n=(0,x.Z)(a,l),J=(0,s.useState)(!1),W=(0,T.Z)(J,2),F=W[0],f=W[1];return _!=null&&_.statusRender&&n.name?(0,i.jsx)(C,{name:n.name,statusRender:_==null?void 0:_.statusRender,popoverProps:_==null?void 0:_.popoverProps,strengthText:_==null?void 0:_.strengthText,open:F,onOpenChange:f,children:(0,i.jsx)("div",{children:(0,i.jsx)(v.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,h.Z)(_,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(Z){var r;_==null||(r=_.onBlur)===null||r===void 0||r.call(_,Z),f(!1)},onClick:function(Z){var r;_==null||(r=_.onClick)===null||r===void 0||r.call(_,Z),f(!0)}}),proFieldProps:O,filedConfig:{valueType:j}},n))})}):(0,i.jsx)(v.Z,(0,o.Z)({valueType:"password",fieldProps:_,proFieldProps:O,filedConfig:{valueType:j}},n))},u=m;u.Password=c,u.displayName="ProFormComponent",L.Z=u},33867:function(q,L,e){e.d(L,{iK:function(){return T},zc:function(){return x}});var T=function(t){return t[t.SUCCESS=200]="SUCCESS",t[t.ERROR=-1]="ERROR",t[t.TIMEOUT=401]="TIMEOUT",t.TYPE="success",t}({}),o=function(t){return t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t}({}),x=function(t){return t.JSON="application/json;charset=UTF-8",t.FORM_URLENCODED="application/x-www-form-urlencoded;charset=UTF-8",t.FORM_DATA="multipart/form-data;charset=UTF-8",t}({})},20014:function(q,L,e){e.r(L);var T=e(15009),o=e.n(T),x=e(97857),t=e.n(x),A=e(99289),M=e.n(A),h=e(5574),s=e.n(h),v=e(67294),i=e(77569),D=e(17788),l=e(71230),j=e(15746),m=e(84567),C=e(20863),c=e(76772),u=e(97269),p=e(31199),a=e(5966),_=e(64317),O=e(85893),n=function(W){var F=i.Z.useForm(),f=s()(F,1),g=f[0],Z=W.deptTree,r=W.deptCheckedKeys,U=(0,v.useState)("1"),d=s()(U,2),E=d[0],b=d[1],ce=(0,v.useState)([]),le=s()(ce,2),de=le[0],ee=le[1],ue=(0,v.useState)([]),Q=s()(ue,2),G=Q[0],K=Q[1],N=(0,v.useState)(!0),I=s()(N,2),re=I[0],P=I[1];(0,v.useEffect)(function(){ee(r),g.resetFields(),g.setFieldsValue({roleId:W.values.roleId,roleName:W.values.roleName,roleKey:W.values.roleKey,dataScope:W.values.dataScope}),b(W.values.dataScope)},[W.values]);var $=(0,c.useIntl)(),Pe=function(){g.submit()},ie=function(){W.onCancel()},ve=function(){var z=M()(o()().mark(function k(X){return o()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:W.onSubmit(t()(t()({},X),{},{deptIds:de}));case 1:case"end":return ae.stop()}},k)}));return function(X){return z.apply(this,arguments)}}(),fe=function z(k){var X=[];return k.forEach(function(_e){X.push(_e.key),_e.children&&(X=X.concat(z(_e.children)))}),X},Ee=fe(Z),De=function(k){k.includes("deptExpand")?K(Ee):K([]),k.includes("deptNodeAll")?ee(Ee):ee([]),k.includes("deptCheckStrictly")?P(!1):P(!0)};return(0,O.jsx)(D.Z,{width:640,title:$.formatMessage({id:"system.user.auth.role",defaultMessage:"\u5206\u914D\u89D2\u8272"}),open:W.open,destroyOnClose:!0,forceRender:!0,onOk:Pe,onCancel:ie,children:(0,O.jsxs)(u.A,{form:g,grid:!0,layout:"horizontal",onFinish:ve,initialValues:{login_password:"",confirm_password:""},children:[(0,O.jsx)(p.Z,{name:"roleId",label:$.formatMessage({id:"system.role.role_id",defaultMessage:"\u89D2\u8272\u7F16\u53F7"}),colProps:{md:12,xl:12},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7",disabled:!0,hidden:!0,rules:[{required:!1,message:(0,O.jsx)(c.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01"})}]}),(0,O.jsx)(a.Z,{name:"roleName",label:$.formatMessage({id:"system.role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),disabled:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:(0,O.jsx)(c.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01"})}]}),(0,O.jsx)(a.Z,{name:"roleKey",label:$.formatMessage({id:"system.role.role_key",defaultMessage:"\u6743\u9650\u5B57\u7B26\u4E32"}),disabled:!0,placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32",rules:[{required:!0,message:(0,O.jsx)(c.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01"})}]}),(0,O.jsx)(_.Z,{name:"dataScope",label:"\u6743\u9650\u8303\u56F4",initialValue:"1",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6027\u522B",valueEnum:{1:"\u5168\u90E8\u6570\u636E\u6743\u9650",2:"\u81EA\u5B9A\u6570\u636E\u6743\u9650",3:"\u672C\u90E8\u95E8\u6570\u636E\u6743\u9650",4:"\u672C\u90E8\u95E8\u53CA\u4EE5\u4E0B\u6570\u636E\u6743\u9650",5:"\u4EC5\u672C\u4EBA\u6570\u636E\u6743\u9650"},rules:[{required:!0}],fieldProps:{onChange:function(k){b(k)}}}),(0,O.jsx)(u.A.Item,{name:"deptIds",label:$.formatMessage({id:"system.role.auth",defaultMessage:"\u83DC\u5355\u6743\u9650"}),required:E==="1",hidden:E!=="1",children:(0,O.jsxs)(l.Z,{gutter:[16,16],children:[(0,O.jsx)(j.Z,{md:24,children:(0,O.jsx)(m.Z.Group,{options:[{label:"\u5C55\u5F00/\u6298\u53E0",value:"deptExpand"},{label:"\u5168\u9009/\u5168\u4E0D\u9009",value:"deptNodeAll"}],onChange:De})}),(0,O.jsx)(j.Z,{md:24,children:(0,O.jsx)(C.Z,{checkable:!0,checkStrictly:re,expandedKeys:G,treeData:Z,checkedKeys:de,defaultCheckedKeys:r,onCheck:function(k,X){return console.log(k,X),ee(re?k.checked:{checked:k,halfChecked:X.halfCheckedKeys})},onExpand:function(k){K(G.concat(k))}})})]})})]})})};L.default=n},177:function(q,L,e){e.r(L);var T=e(15009),o=e.n(T),x=e(97857),t=e.n(x),A=e(99289),M=e.n(A),h=e(5574),s=e.n(h),v=e(67294),i=e(97269),D=e(31199),l=e(5966),j=e(86615),m=e(90672),C=e(77569),c=e(17788),u=e(76772),p=e(20863),a=e(85893),_=function(n){var J=C.Z.useForm(),W=s()(J,1),F=W[0],f=n.menuTree,g=n.menuCheckedKeys,Z=(0,v.useState)([]),r=s()(Z,2),U=r[0],d=r[1],E=n.statusOptions;(0,v.useEffect)(function(){F.resetFields(),F.setFieldsValue({roleId:n.values.roleId,roleName:n.values.roleName,roleKey:n.values.roleKey,roleSort:n.values.roleSort,dataScope:n.values.dataScope,menuCheckStrictly:n.values.menuCheckStrictly,deptCheckStrictly:n.values.deptCheckStrictly,status:n.values.status,delFlag:n.values.delFlag,createBy:n.values.createBy,createTime:n.values.createTime,updateBy:n.values.updateBy,updateTime:n.values.updateTime,remark:n.values.remark})},[F,n]);var b=(0,u.useIntl)(),ce=function(){F.submit()},le=function(){n.onCancel()},de=function(){var ee=M()(o()().mark(function ue(Q){return o()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:n.onSubmit(t()(t()({},Q),{},{menuIds:U}));case 1:case"end":return K.stop()}},ue)}));return function(Q){return ee.apply(this,arguments)}}();return(0,a.jsx)(c.Z,{width:640,title:b.formatMessage({id:"system.role.title",defaultMessage:"\u7F16\u8F91\u89D2\u8272\u4FE1\u606F"}),forceRender:!0,open:n.open,destroyOnClose:!0,onOk:ce,onCancel:le,children:(0,a.jsxs)(i.A,{form:F,grid:!0,layout:"horizontal",submitter:!1,onFinish:de,children:[(0,a.jsx)(D.Z,{name:"roleId",label:b.formatMessage({id:"system.role.role_id",defaultMessage:"\u89D2\u8272\u7F16\u53F7"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7",disabled:!0,hidden:!0,rules:[{required:!1,message:(0,a.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u53F7\uFF01"})}]}),(0,a.jsx)(l.Z,{name:"roleName",label:b.formatMessage({id:"system.role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",rules:[{required:!0,message:(0,a.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0\uFF01"})}]}),(0,a.jsx)(l.Z,{name:"roleKey",label:b.formatMessage({id:"system.role.role_key",defaultMessage:"\u6743\u9650\u5B57\u7B26\u4E32"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32",rules:[{required:!0,message:(0,a.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32\uFF01"})}]}),(0,a.jsx)(D.Z,{name:"roleSort",label:b.formatMessage({id:"system.role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F",rules:[{required:!0,message:(0,a.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F\uFF01"})}],fieldProps:{defaultValue:1}}),(0,a.jsx)(j.Z.Group,{valueEnum:E,name:"status",label:b.formatMessage({id:"system.role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001",rules:[{required:!0,message:(0,a.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u72B6\u6001\uFF01"})}],fieldProps:{defaultValue:"0"}}),(0,a.jsx)(i.A.Item,{name:"menuIds",label:b.formatMessage({id:"system.role.auth",defaultMessage:"\u83DC\u5355\u6743\u9650"}),children:(0,a.jsx)(p.Z,{checkable:!0,multiple:!0,checkStrictly:!0,defaultExpandAll:!1,treeData:f,defaultCheckedKeys:g,onCheck:function(ue){return d(ue.checked)}})}),(0,a.jsx)(m.Z,{name:"remark",label:b.formatMessage({id:"system.role.remark",defaultMessage:"\u5907\u6CE8"}),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",rules:[{required:!1,message:(0,a.jsx)(u.FormattedMessage,{id:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01",defaultMessage:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF01"})}]})]})})};L.default=_},38394:function(q,L,e){e.r(L);var T=e(5574),o=e.n(T),x=e(15009),t=e.n(x),A=e(97857),M=e.n(A),h=e(99289),s=e.n(h),v=e(67294),i=e(76772),D=e(17788),l=e(2453),j=e(72269),m=e(83622),C=e(85418),c=e(78957),u=e(6110),p=e(65385),a=e(2236),_=e(86548),O=e(48689),n=e(80882),J=e(24969),W=e(11475),F=e(37563),f=e(177),g=e(92982),Z=e(31981),r=e(52728),U=e(20014),d=e(85893),E=D.Z.confirm,b=function(){var Q=s()(t()().mark(function G(K){var N,I;return t()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return N=l.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),P.prev=1,P.next=4,(0,F._d)(M()({},K));case 4:return I=P.sent,N(),I.code===200?l.ZP.success("\u6DFB\u52A0\u6210\u529F"):l.ZP.error(I.msg),P.abrupt("return",!0);case 10:return P.prev=10,P.t0=P.catch(1),N(),l.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),P.abrupt("return",!1);case 15:case"end":return P.stop()}},G,null,[[1,10]])}));return function(K){return Q.apply(this,arguments)}}(),ce=function(){var Q=s()(t()().mark(function G(K){var N,I;return t()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return N=l.ZP.loading("\u6B63\u5728\u66F4\u65B0"),P.prev=1,P.next=4,(0,F.ul)(K);case 4:return I=P.sent,N(),I.code===200?l.ZP.success("\u66F4\u65B0\u6210\u529F"):l.ZP.error(I.msg),P.abrupt("return",!0);case 10:return P.prev=10,P.t0=P.catch(1),N(),l.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),P.abrupt("return",!1);case 15:case"end":return P.stop()}},G,null,[[1,10]])}));return function(K){return Q.apply(this,arguments)}}(),le=function(){var Q=s()(t()().mark(function G(K){var N,I;return t()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(N=l.ZP.loading("\u6B63\u5728\u5220\u9664"),K){P.next=3;break}return P.abrupt("return",!0);case 3:return P.prev=3,P.next=6,(0,F.l5)(K.map(function($){return $.roleId}).join(","));case 6:return I=P.sent,N(),I.code===200?l.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):l.ZP.error(I.msg),P.abrupt("return",!0);case 12:return P.prev=12,P.t0=P.catch(3),N(),l.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),P.abrupt("return",!1);case 17:case"end":return P.stop()}},G,null,[[3,12]])}));return function(K){return Q.apply(this,arguments)}}(),de=function(){var Q=s()(t()().mark(function G(K){var N,I,re;return t()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(N=l.ZP.loading("\u6B63\u5728\u5220\u9664"),K){$.next=3;break}return $.abrupt("return",!0);case 3:return $.prev=3,I=[K.roleId],$.next=7,(0,F.l5)(I.join(","));case 7:return re=$.sent,N(),re.code===200?l.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"):l.ZP.error(re.msg),$.abrupt("return",!0);case 13:return $.prev=13,$.t0=$.catch(3),N(),l.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),$.abrupt("return",!1);case 18:case"end":return $.stop()}},G,null,[[3,13]])}));return function(K){return Q.apply(this,arguments)}}(),ee=function(){var Q=s()(t()().mark(function G(){var K;return t()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return K=l.ZP.loading("\u6B63\u5728\u5BFC\u51FA"),I.prev=1,I.next=4,(0,F.Lp)();case 4:return K(),l.ZP.success("\u5BFC\u51FA\u6210\u529F"),I.abrupt("return",!0);case 9:return I.prev=9,I.t0=I.catch(1),K(),l.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),I.abrupt("return",!1);case 14:case"end":return I.stop()}},G,null,[[1,9]])}));return function(){return Q.apply(this,arguments)}}(),ue=function(){var G=l.ZP.useMessage(),K=o()(G,2),N=K[0],I=K[1],re=(0,v.useRef)(),P=(0,v.useState)(!1),$=o()(P,2),Pe=$[0],ie=$[1],ve=(0,v.useState)(!1),fe=o()(ve,2),Ee=fe[0],De=fe[1],z=(0,v.useRef)(),k=(0,v.useState)(),X=o()(k,2),_e=X[0],ae=X[1],Be=(0,v.useState)([]),Te=o()(Be,2),ne=Te[0],me=Te[1],be=(0,v.useState)(),ge=o()(be,2),Ce=ge[0],Me=ge[1],Ie=(0,v.useState)([]),Fe=o()(Ie,2),ye=Fe[0],Oe=Fe[1],Ae=(0,v.useState)([]),je=o()(Ae,2),Re=je[0],Le=je[1],oe=(0,i.useAccess)(),Ue=(0,i.useIntl)();(0,v.useEffect)(function(){(0,g.pX)("sys_normal_disable").then(function(Y){Le(Y)})},[]);var Ke=function(S){var R=S.status==="1"?"\u542F\u7528":"\u505C\u7528",B=S.status==="0"?"1":"0";E({title:"\u786E\u8BA4\u8981".concat(R).concat(S.roleName,"\u89D2\u8272\u5417\uFF1F"),onOk:function(){(0,F.sp)(S.roleId,B).then(function(y){if(y.code===200){var w;N.open({type:"success",content:"\u66F4\u65B0\u6210\u529F\uFF01"}),(w=z.current)===null||w===void 0||w.reload()}else N.open({type:"error",content:"\u66F4\u65B0\u5931\u8D25\uFF01"})})}})},Se=[{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_id",defaultMessage:"\u89D2\u8272\u7F16\u53F7"}),dataIndex:"roleId",valueType:"text"},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),dataIndex:"roleName",valueType:"text"},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_key",defaultMessage:"\u89D2\u8272\u6743\u9650\u5B57\u7B26\u4E32"}),dataIndex:"roleKey",valueType:"text",hideInSearch:!0},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.role_sort",defaultMessage:"\u663E\u793A\u987A\u5E8F"}),dataIndex:"roleSort",valueType:"text",hideInSearch:!0},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.status",defaultMessage:"\u89D2\u8272\u72B6\u6001"}),dataIndex:"status",valueType:"select",valueEnum:Re,render:function(S,R){return(0,d.jsx)(j.Z,{checked:R.status==="0",checkedChildren:"\u6B63\u5E38",unCheckedChildren:"\u505C\u7528",defaultChecked:!0,onClick:function(){return Ke(R)}})}},{title:(0,d.jsx)(i.FormattedMessage,{id:"system.role.create_time",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"createTime",valueType:"dateRange",render:function(S,R){return(0,d.jsxs)("span",{children:[R.createTime.toString()," "]})},search:{transform:function(S){return{"params[beginTime]":S[0],"params[endTime]":S[1]}}}},{title:(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",width:"220px",valueType:"option",render:function(S,R){return[(0,d.jsx)(m.ZP,{type:"link",size:"small",icon:(0,d.jsx)(_.Z,{}),hidden:!oe.hasPerms("system:role:edit"),onClick:function(){(0,F.mj)(R.roleId).then(function(V){if(V.code===200){var y=(0,Z.lt)(V.data.menus);Me(y),Oe(V.data.checkedKeys.map(function(w){return"".concat(w)})),ie(!0),ae(R)}else l.ZP.warning(V.msg)})},children:"\u7F16\u8F91"},"edit"),(0,d.jsx)(m.ZP,{type:"link",size:"small",danger:!0,icon:(0,d.jsx)(O.Z,{}),hidden:!oe.hasPerms("system:role:remove"),onClick:s()(t()().mark(function B(){return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:D.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var w=s()(t()().mark(function se(){var he;return t()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,de(R);case 2:he=pe.sent,he&&z.current&&z.current.reload();case 4:case"end":return pe.stop()}},se)}));function H(){return w.apply(this,arguments)}return H}()});case 1:case"end":return y.stop()}},B)})),children:"\u5220\u9664"},"batchRemove"),(0,d.jsx)(C.Z,{menu:{items:[{label:"\u6570\u636E\u6743\u9650",key:"datascope",disabled:!oe.hasPerms("system:role:edit")},{label:"\u5206\u914D\u7528\u6237",key:"authUser",disabled:!oe.hasPerms("system:role:edit")}],onClick:function(V){var y=V.key;y==="datascope"?((0,F.cY)(R.roleId).then(function(w){w.code===200&&(ae(w.data),De(!0))}),(0,F.Vl)(R.roleId).then(function(w){w.code===200&&(Me((0,Z.lt)(w.data.depts)),Oe(w.data.checkedKeys.map(function(H){return"".concat(H)})))})):y==="authUser"&&i.history.push("/system/role-auth/user/".concat(R.roleId))}},children:(0,d.jsx)("a",{onClick:function(V){return V.preventDefault()},children:(0,d.jsxs)(c.Z,{children:[(0,d.jsx)(n.Z,{}),"\u66F4\u591A"]})})},"more")]}}];return(0,d.jsxs)(u._z,{children:[I,(0,d.jsx)("div",{style:{width:"100%",float:"right"},children:(0,d.jsx)(p.Z,{headerTitle:Ue.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u4FE1\u606F"}),actionRef:z,formRef:re,rowKey:"roleId",search:{labelWidth:120},toolBarRender:function(){return[(0,d.jsxs)(m.ZP,{type:"primary",hidden:!oe.hasPerms("system:role:add"),onClick:s()(t()().mark(function S(){return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:(0,r.Th)().then(function(V){if(V.code===200){var y=(0,Z.lt)(V.data);Me(y),Oe([]),ie(!0),ae(void 0)}else l.ZP.warning(V.msg)});case 1:case"end":return B.stop()}},S)})),children:[(0,d.jsx)(J.Z,{})," ",(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"add"),(0,d.jsxs)(m.ZP,{type:"primary",danger:!0,hidden:(ne==null?void 0:ne.length)===0||!oe.hasPerms("system:role:remove"),onClick:s()(t()().mark(function S(){return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:D.Z.confirm({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u6570\u636E\u9879?",icon:(0,d.jsx)(W.Z,{}),content:"\u8BF7\u8C28\u614E\u64CD\u4F5C",onOk:function(){return s()(t()().mark(function y(){var w,H,se;return t()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,le(ne);case 2:w=te.sent,w&&(me([]),(H=z.current)===null||H===void 0||(se=H.reloadAndRest)===null||se===void 0||se.call(H));case 4:case"end":return te.stop()}},y)}))()}});case 1:case"end":return B.stop()}},S)})),children:[(0,d.jsx)(O.Z,{}),(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.delete",defaultMessage:"\u5220\u9664"})]},"remove"),(0,d.jsxs)(m.ZP,{type:"primary",hidden:!oe.hasPerms("system:role:export"),onClick:s()(t()().mark(function S(){return t()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:ee();case 1:case"end":return B.stop()}},S)})),children:[(0,d.jsx)(J.Z,{}),(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.export",defaultMessage:"\u5BFC\u51FA"})]},"export")]},request:function(S){return(0,F.JV)(M()({},S)).then(function(R){var B={data:R.rows,total:R.total,success:!0};return B})},columns:Se,rowSelection:{onChange:function(S,R){return me(R)}},pagination:{pageSize:10,showTotal:function(S){return"\u5171 ".concat(S," \u6761")}}},"roleList")}),(ne==null?void 0:ne.length)>0&&(0,d.jsx)(a.S,{extra:(0,d.jsxs)("div",{children:[(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"}),(0,d.jsx)("a",{style:{fontWeight:600},children:ne.length}),(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,d.jsx)(m.ZP,{danger:!0,hidden:!oe.hasPerms("system:role:del"),onClick:s()(t()().mark(function Y(){return t()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:D.Z.confirm({title:"\u5220\u9664",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u9879\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){var B=s()(t()().mark(function y(){var w,H,se;return t()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,le(ne);case 2:w=te.sent,w&&(me([]),(H=z.current)===null||H===void 0||(se=H.reloadAndRest)===null||se===void 0||se.call(H));case 4:case"end":return te.stop()}},y)}));function V(){return B.apply(this,arguments)}return V}()});case 1:case"end":return R.stop()}},Y)})),children:(0,d.jsx)(i.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"\u6279\u91CF\u5220\u9664"})},"remove")}),(0,d.jsx)(f.default,{onSubmit:function(){var Y=s()(t()().mark(function S(R){var B;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(B=!1,!R.roleId){y.next=7;break}return y.next=4,ce(M()({},R));case 4:B=y.sent,y.next=10;break;case 7:return y.next=9,b(M()({},R));case 9:B=y.sent;case 10:B&&(ie(!1),ae(void 0),z.current&&z.current.reload());case 11:case"end":return y.stop()}},S)}));return function(S){return Y.apply(this,arguments)}}(),onCancel:function(){ie(!1),ae(void 0)},open:Pe,values:_e||{},menuTree:Ce||[],menuCheckedKeys:ye||[],statusOptions:Re}),(0,d.jsx)(U.default,{onSubmit:function(){var Y=s()(t()().mark(function S(R){var B;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,F.tm)(R);case 2:B=y.sent,B&&(De(!1),me([]),ae(void 0),l.ZP.success("\u914D\u7F6E\u6210\u529F\u3002"));case 4:case"end":return y.stop()}},S)}));return function(S){return Y.apply(this,arguments)}}(),onCancel:function(){De(!1),me([]),ae(void 0)},open:Ee,values:_e||{},deptTree:Ce||[],deptCheckedKeys:ye||[]})]})};L.default=ue},92982:function(q,L,e){e.d(L,{Hr:function(){return C},QK:function(){return W},Vd:function(){return l},a7:function(){return a},jK:function(){return i},n2:function(){return J},oH:function(){return u},pX:function(){return j},sF:function(){return O}});var T=e(97857),o=e.n(T),x=e(15009),t=e.n(x),A=e(99289),M=e.n(A),h=e(76772),s=e(33867),v=e(30964);function i(f){return D.apply(this,arguments)}function D(){return D=M()(t()().mark(function f(g){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,h.request)("/api/system/dict/type/list",{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:g}));case 1:case"end":return r.stop()}},f)})),D.apply(this,arguments)}function l(f){return(0,h.request)("/api/system/dict/type/".concat(f),{method:"GET"})}function j(f,g){return m.apply(this,arguments)}function m(){return m=M()(t()().mark(function f(g,Z){var r,U;return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log("getDictValueEnum resp:",g),E.next=3,(0,h.request)("/api/system/dict/data/type/".concat(g),{method:"GET"});case 3:if(r=E.sent,console.log("getDictValueEnum resp:",g,r),r.code!==s.iK.SUCCESS){E.next=11;break}return U={},r.data.forEach(function(b){U[b.dictValue]={text:b.dictLabel,label:b.dictLabel,value:Z?Number(b.dictValue):b.dictValue,key:b.dictCode,listClass:b.listClass,status:b.listClass}}),E.abrupt("return",U);case 11:return E.abrupt("return",{});case 12:case"end":return E.stop()}},f)})),m.apply(this,arguments)}function C(f,g){return c.apply(this,arguments)}function c(){return c=M()(t()().mark(function f(g,Z){var r,U;return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,h.request)("/api/system/dict/data/type/".concat(g),{method:"GET"});case 2:if(r=E.sent,r.code!==200){E.next=6;break}return U=r.data.map(function(b){return{text:b.dictLabel,label:b.dictLabel,value:Z?Number(b.dictValue):b.dictValue,key:b.dictCode,listClass:b.listClass,status:b.listClass}}),E.abrupt("return",U);case 6:return E.abrupt("return",[]);case 7:case"end":return E.stop()}},f)})),c.apply(this,arguments)}function u(f){return p.apply(this,arguments)}function p(){return p=M()(t()().mark(function f(g){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,h.request)("/api/system/dict/type",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:g}));case 1:case"end":return r.stop()}},f)})),p.apply(this,arguments)}function a(f){return _.apply(this,arguments)}function _(){return _=M()(t()().mark(function f(g){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,h.request)("/api/system/dict/type",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:g}));case 1:case"end":return r.stop()}},f)})),_.apply(this,arguments)}function O(f){return n.apply(this,arguments)}function n(){return n=M()(t()().mark(function f(g){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,h.request)("/api/system/dict/type/".concat(g),{method:"DELETE"}));case 1:case"end":return r.stop()}},f)})),n.apply(this,arguments)}function J(f){return(0,v.su)("/api/system/dict/type/export",{params:f},"dict_type_".concat(new Date().getTime(),".xlsx"))}function W(f){return F.apply(this,arguments)}function F(){return F=M()(t()().mark(function f(g){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,h.request)("/api/system/dict/type/optionselect",{params:o()({},g),method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}));case 1:case"end":return r.stop()}},f)})),F.apply(this,arguments)}},52728:function(q,L,e){e.d(L,{Af:function(){return s},Th:function(){return u},_8:function(){return j},bL:function(){return D},n_:function(){return C}});var T=e(15009),o=e.n(T),x=e(97857),t=e.n(x),A=e(99289),M=e.n(A),h=e(76772);function s(p,a){return v.apply(this,arguments)}function v(){return v=M()(o()().mark(function p(a,_){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/system/menu/list",t()({method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"},params:a},_||{})));case 1:case"end":return n.stop()}},p)})),v.apply(this,arguments)}function i(p,a){return request("/api/system/menu/".concat(p),_objectSpread({method:"GET"},a||{}))}function D(p,a){return l.apply(this,arguments)}function l(){return l=M()(o()().mark(function p(a,_){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/system/menu",t()({method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:a},_||{})));case 1:case"end":return n.stop()}},p)})),l.apply(this,arguments)}function j(p,a){return m.apply(this,arguments)}function m(){return m=M()(o()().mark(function p(a,_){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/system/menu",t()({method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:a},_||{})));case 1:case"end":return n.stop()}},p)})),m.apply(this,arguments)}function C(p,a){return c.apply(this,arguments)}function c(){return c=M()(o()().mark(function p(a,_){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/system/menu/".concat(a),t()({method:"DELETE"},_||{})));case 1:case"end":return n.stop()}},p)})),c.apply(this,arguments)}function u(){return(0,h.request)("/api/system/menu/treeselect",{method:"GET"})}},37563:function(q,L,e){e.d(L,{CE:function(){return F},JV:function(){return i},LA:function(){return f},Lp:function(){return a},Vl:function(){return Z},_d:function(){return j},cY:function(){return l},dY:function(){return g},iH:function(){return J},l5:function(){return u},mj:function(){return _},p7:function(){return W},sp:function(){return n},tm:function(){return O},ul:function(){return C}});var T=e(15009),o=e.n(T),x=e(97857),t=e.n(x),A=e(99289),M=e.n(A),h=e(33867),s=e(76772),v=e(30964);function i(r){return D.apply(this,arguments)}function D(){return D=M()(o()().mark(function r(U){return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,s.request)("/api/system/role/list",{method:"GET",headers:{"Content-Type":h.zc.FORM_URLENCODED},params:t()(t()({},U),{},{pageNum:(U==null?void 0:U.current)||1,pageSize:(U==null?void 0:U.pageSize)||10})}));case 1:case"end":return E.stop()}},r)})),D.apply(this,arguments)}function l(r){return(0,s.request)("/api/system/role/".concat(r),{method:"GET"})}function j(r){return m.apply(this,arguments)}function m(){return m=M()(o()().mark(function r(U){return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,s.request)("/api/system/role",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},data:U}));case 1:case"end":return E.stop()}},r)})),m.apply(this,arguments)}function C(r){return c.apply(this,arguments)}function c(){return c=M()(o()().mark(function r(U){return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,s.request)("/api/system/role",{method:"PUT",headers:{"Content-Type":"application/json;charset=UTF-8"},data:U}));case 1:case"end":return E.stop()}},r)})),c.apply(this,arguments)}function u(r){return p.apply(this,arguments)}function p(){return p=M()(o()().mark(function r(U){return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,s.request)("/api/system/role/".concat(U),{method:"DELETE"}));case 1:case"end":return E.stop()}},r)})),p.apply(this,arguments)}function a(r){return(0,v.su)("/api/system/role/export",{params:r},"role_".concat(new Date().getTime(),".xlsx"))}function _(r){return(0,s.request)("/api/system/menu/roleMenuTreeselect/".concat(r),{method:"get"})}function O(r){return(0,s.request)("/api/system/role/dataScope",{method:"put",data:r})}function n(r,U){var d={roleId:r,status:U};return(0,s.request)("/api/system/role/changeStatus",{method:"put",data:d})}function J(r){return(0,s.request)("/api/system/role/authUser/allocatedList",{method:"get",params:r})}function W(r){return(0,s.request)("/api/system/role/authUser/unallocatedList",{method:"get",params:r})}function F(r){return(0,s.request)("/api/system/role/authUser/cancel",{method:"put",data:r})}function f(r){return(0,s.request)("/api/system/role/authUser/cancelAll",{method:"put",params:r})}function g(r){return(0,s.request)("/api/system/role/authUser/selectAll",{method:"put",params:r,headers:{"Content-Type":h.zc.FORM_URLENCODED}})}function Z(r){return(0,s.request)("/api/system/role/deptTree/"+r,{method:"get"})}},31981:function(q,L,e){e.d(L,{C2:function(){return o},lt:function(){return t}});var T=e(87735);function o(A,M,h,s,v,i){var D={id:M||"id",name:h||"name",parentId:s||"parentId",parentName:v||"parentName",childrenList:i||"children"},l=[],j=[],m=[];A.forEach(function(c){var u=c,p=u[D.parentId];l[p]||(l[p]=[]),u.key=u[D.id],u.title=u[D.name],u.value=u[D.id],u[D.childrenList]=null,j[u[D.id]]=u,l[p].push(u)}),A.forEach(function(c){var u=c,p=u[D.parentId];j[p]||(u[D.parentName]="",m.push(u))});function C(c){var u=c;l[u[D.id]]&&(u[D.childrenList]||(u[D.childrenList]=[]),u[D.childrenList]=l[u[D.id]]),u[D.childrenList]&&u[D.childrenList].forEach(function(p){var a=p;a[D.parentName]=u[D.name],C(a)})}return m.forEach(function(c){C(c)}),m}var x=function(){return parse(window.location.href.split("?")[1])};function t(A){var M=A.map(function(h){var s={id:h.id,title:h.label,key:"".concat(h.id),value:h.id};return h.children&&(s.children=t(h.children)),s});return M}}}]);
